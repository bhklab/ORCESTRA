(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{105:function(e,t,a){},151:function(e,t,a){},152:function(e,t,a){},153:function(e,t,a){},154:function(e,t,a){},155:function(e,t,a){},156:function(e,t,a){},157:function(e,t,a){},160:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),r=a(20),i=a.n(r),l=(a(65),a(66),a(67),a(68),a(3)),o=a(4),c=a(6),u=a(5),m=a(7),d=a(12),h=a(23),p=Object(n.createContext)(),f=a(26);function b(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var v=function(e){function t(){return Object(l.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;fetch("/user/checkToken").then((function(e){return 200===e.status?e.json():{authenticated:!1,username:""}})).then((function(t){e.context.setAuthToken(t)}))}},{key:"render",value:function(){var e=this,t=this.context;return s.a.createElement(h.b,{exact:!0,path:this.props.path,render:function(a){return t.authenticated?s.a.cloneElement(e.props.component,function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?b(a,!0).forEach((function(t){Object(f.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):b(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},a)):s.a.createElement(h.a,{to:{pathname:e.props.redirect,state:{path:e.props.path}}})}})}}]),t}(s.a.Component);v.contextType=p;var g=v,S=(a(73),a(74),a(1)),E=a(9),y=(a(76),a(50)),O=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(c.a)(this,Object(u.a)(t).call(this))).onLoginClick=e.onLoginClick.bind(Object(S.a)(e)),e.onLogoutClick=e.onLogoutClick.bind(Object(S.a)(e)),e}return Object(m.a)(t,e),Object(o.a)(t,[{key:"onLoginClick",value:function(e){e.preventDefault(),this.props.routing.history.push({pathname:"/Authentication",state:{path:this.props.routing.path}})}},{key:"onLogoutClick",value:function(e){var t=this;e.preventDefault(),console.log(this.props.routing),fetch("/user/logout/:"+this.context.username).then((function(e){t.context.resetAuthToken(),t.props.routing.history.push({pathname:"/Authentication",state:{path:t.props.routing.location.pathname,logoutMsg:"You have logged out"}})}))}},{key:"render",value:function(){return s.a.createElement(s.a.Fragment,null,s.a.createElement("header",null,s.a.createElement(d.c,{exact:!0,to:"/"},s.a.createElement("img",{src:"/images/trumpet-orcestra.png",alt:""})),s.a.createElement("div",{className:"navBarContainer"},s.a.createElement("div",{className:"navBar"},s.a.createElement("div",null,s.a.createElement(d.c,{exact:!0,to:"/",activeClassName:"active-link"},"Home")),s.a.createElement("div",null,s.a.createElement(d.c,{exact:!0,to:"/PSetSearch",activeClassName:"active-link"},"Search and Request")),s.a.createElement("div",null,s.a.createElement(d.c,{exact:!0,to:"/Stats",activeClassName:"active-link"},"Statistics")),s.a.createElement("div",null,s.a.createElement(d.c,{exact:!0,to:"/Profile",activeClassName:"active-link"},"Profile")),s.a.createElement("div",null,s.a.createElement(d.c,{exact:!0,to:"/Contact",activeClassName:"active-link"},"Contact")),s.a.createElement("div",null,this.context.authenticated?s.a.createElement(E.Button,{label:"Logout",onClick:this.onLogoutClick}):s.a.createElement(E.Button,{label:"Login/Register",onClick:this.onLoginClick}))),s.a.createElement("div",{className:"burgerNav"},s.a.createElement(y.slide,{width:200,isOpen:!1},s.a.createElement("div",{className:"menu-item"},s.a.createElement(d.c,{exact:!0,to:"/",activeClassName:"active-link"},"Home")),s.a.createElement("div",{className:"menu-item"},s.a.createElement(d.c,{exact:!0,to:"/PSetSearch",activeClassName:"active-link"},"Search and Request")),s.a.createElement("div",{className:"menu-item"},s.a.createElement(d.c,{exact:!0,to:"/Stats",activeClassName:"active-link"},"Statistics")),s.a.createElement("div",{className:"menu-item"},s.a.createElement(d.c,{exact:!0,to:"/Profile",activeClassName:"active-link"},"Profile")),s.a.createElement("div",null,s.a.createElement(d.c,{exact:!0,to:"/Contact",activeClassName:"active-link"},"Contact")),s.a.createElement("div",{className:"menu-item"},this.context.authenticated?s.a.createElement(E.Button,{label:"Logout",onClick:this.onLogoutClick}):s.a.createElement(E.Button,{label:"Login/Register",onClick:this.onLoginClick}))))),s.a.createElement("div",{className:"loggedIn"},this.context.authenticated?"Logged in as: "+this.context.username:"")))}}]),t}(s.a.Component);O.contextType=p;var N=O,j=(a(92),function(e){function t(){return Object(l.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"mainContent"},s.a.createElement("div",{className:"home"},s.a.createElement("h1",null,"ORCESTRA"),s.a.createElement("h2",null,"Orchestration platform for reproducing pharmacogenomic analyses"),s.a.createElement("div",{className:"links"},s.a.createElement("a",{className:"button",href:"/Stats"},"View Statistics"),s.a.createElement("a",{className:"button",href:"/PSetSearch"},"Search and ",s.a.createElement("br",null),"Request PSets"),s.a.createElement("a",{className:"button",href:"/Profile"},"View Your Profile"))))}}]),t}(s.a.Component)),R=function(e){function t(){return Object(l.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"App"},s.a.createElement(N,{routing:this.props}),s.a.createElement(j,null))}}]),t}(s.a.Component),C=(a(93),a(51));function D(e){var t={};return t.datatype=q(e.dataType),t.datasetName=q(e.dataset),t.datasetVersion=q(e.dataset,!0),t.genome=q(e.genome),t.rnaTool=q(e.rnaTool),t.dnaTool=q(e.dnaTool),t.rnaRef=q(e.rnaRef),t.dnaRef=q(e.dnaRef),t.drugSensitivity=q(e.drugSensitivity,!0),t}function k(e){var t="/pset?",a=[];a.push(A("dtp",e.datatype)),a.push(A("dsv",e.datasetVersion)),a.push(A("dsn",e.datasetName)),a.push(A("gnm",e.genome)),a.push(A("rnat",e.rnaTool)),a.push(A("dnat",e.dnaTool)),a.push(A("rnar",e.rnaRef)),a.push(A("dnar",e.dnaRef)),a.push(A("dst",e.drugSensitivity));for(var n=0;n<a.length;n++)a[n].length>0&&(t+=a[n]+"&");return t=t.replace(/&$/,"")}function P(e){if(!w(e.dataType))return!0;if(1===e.dataType.length){if(!("RNA"!==e.dataType[0]||w(e.rnaRef)&&w(e.rnaTool)))return!0;if("DNA"===e.dataType[0]&&(!w(e.dnaRef)||!w(e.dnaTool)))return!0}else{if(!w(e.rnaRef))return!0;if(!w(e.dnaRef))return!0;if(!w(e.rnaTool))return!0;if(!w(e.dnaTool))return!0}return!w(e.genome)||(!w(e.dataset)||(!function(e){if("undefined"===typeof e||null===e)return!1;if(0===e.length)return!1;return!0}(e.name)||!function(e){if("undefined"===typeof e||null===e)return!1;if(0===e.length)return!1;if(!/^\w+([.-]?\w+)*@\w+([.-]?\w+)*(\.\w{2,3})+$/.test(e))return!1;return!0}(e.email)))}function w(e){return"undefined"!==typeof e&&null!==e&&!(Array.isArray(e)&&!e.length)}function T(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3?arguments[3]:void 0;a&&a(),e?n.show({severity:"success",summary:t.summary,detail:t.message}):n.show({severity:"error",summary:"An error occured",detail:t.toString(),sticky:!0})}function q(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=[];if("undefined"===typeof e||null===e)return a;if(0===Object.keys(e).length&&e.constructor===Object)return a;if(Array.isArray(e)){if(t)for(var n=0;n<e.length;n++)a.push(e[n].version);else for(var s=0;s<e.length;s++)a.push(e[s].name);return a}return t?a.push(e.version):a.push(e.name),a}function A(e,t){var a="";if(t.length>0)for(var n=0;n<t.length;n++)a+=e+"="+t[n],n<t.length-1&&(a+="&");return a}function x(e,t){fetch(e).then((function(e){return e.json()})).then((function(e){t(e)}))}var I=a(24),M=a.n(I),F=a(30),B=(a(96),a(52)),L=a(53),H=function(e){function t(){return Object(l.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=function(e){return s.a.createElement("div",{className:""},s.a.createElement("span",{style:{fontSize:"1em",margin:"1em .5em 0 0"}},e.label))};return this.props.isHidden?null:this.props.selectOne?s.a.createElement("div",{className:this.props.className},s.a.createElement("label",null,this.props.parameterName),s.a.createElement(L.Dropdown,{id:this.props.id,className:"paramInput",optionLabel:"label",value:this.props.selectedParameter,options:this.props.parameterOptions,onChange:this.props.handleUpdateSelection,filter:!0,itemTemplate:e,placeholder:"Select one...",disabled:this.props.disabled})):s.a.createElement("div",{className:this.props.className},s.a.createElement("label",null,this.props.parameterName),s.a.createElement(B.MultiSelect,{id:this.props.id,className:"paramInput",optionLabel:"label",value:this.props.selectedParameter,options:this.props.parameterOptions,onChange:this.props.handleUpdateSelection,filter:!0,itemTemplate:e,selectedItemTemplate:function(e){return e?s.a.createElement("div",{className:"my-multiselected-item-token"},s.a.createElement("span",null,e.label)):s.a.createElement("span",null,"Select...")},disabled:this.props.disabled}))}}]),t}(s.a.Component),V=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(c.a)(this,Object(u.a)(t).call(this))).state={drugSensitivityOptions:[],rnaRefOptions:[],dnaRefOptions:[],hideRNAToolRef:!1,hideDNAToolRef:!1,isReady:!1},e.handleFilterChange=e.handleFilterChange.bind(Object(S.a)(e)),e.setToolState=e.setToolState.bind(Object(S.a)(e)),e.setRefState=e.setRefState.bind(Object(S.a)(e)),e}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.setState({rnaRefOptions:this.props.formData.rnaRef,dnaRefOptions:this.props.formData.dnaRef,isReady:!0})}},{key:"handleFilterChange",value:function(){var e=Object(F.a)(M.a.mark((function e(t){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,this.props.setParentState([{name:t.target.id,value:t.value}]);case 3:if("dataType"!==t.target.id){e.next=7;break}this.setToolState(t),e.next=16;break;case 7:if("genome"!==t.target.id){e.next=11;break}this.setRefState(t),e.next=16;break;case 11:if("dataset"!==t.target.id){e.next=16;break}return console.log(t.value),this.setState({drugSensitivityOptions:[t.value.drugSensitivity]}),e.next=16,this.props.setParentState([{name:"drugSensitivity",value:t.value.drugSensitivity}]);case 16:this.props.autoUpdate&&this.props.requestUpdate();case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"setToolState",value:function(){var e=Object(F.a)(M.a.mark((function e(t){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(1!==t.value.length){e.next=12;break}if("RNA"!==this.props.parameters.dataType[0].name){e.next=7;break}return this.setState({hideDNAToolRef:!0}),e.next=5,this.props.setParentState([{name:"dnaTool",value:[]},{name:"dnaRef",value:[]}]);case 5:e.next=10;break;case 7:return this.setState({hideRNAToolRef:!0}),e.next=10,this.props.setParentState([{name:"rnaTool",value:[]},{name:"rnaRef",value:[]}]);case 10:e.next=13;break;case 12:this.setState({hideDNAToolRef:!1,hideRNAToolRef:!1});case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"setRefState",value:function(){var e=Object(F.a)(M.a.mark((function e(t){var a,n,s,r=this;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==t.value.length){e.next=4;break}this.setState({dnaRefOptions:this.props.formData.dnaRef,rnaRefOptions:this.props.formData.rnaRef}),e.next=9;break;case 4:return a=this.props.parameters.dnaRef,n=this.props.parameters.rnaRef,Array.isArray(this.props.parameters.genome)?(s=this.props.parameters.genome.map((function(e){return e.name})),a=a.filter((function(e){return s.includes(e.genome)&&e})),n=n.filter((function(e){return s.includes(e.genome)&&e})),this.setState({dnaRefOptions:this.props.formData.dnaRef.filter((function(e){return s.includes(e.genome)&&e})),rnaRefOptions:this.props.formData.rnaRef.filter((function(e){return s.includes(e.genome)&&e}))})):(a=a.filter((function(e){return r.props.parameters.genome.name===e.genome&&e})),n=n.filter((function(e){return r.props.parameters.genome.name===e.genome&&e})),this.setState({dnaRefOptions:this.props.formData.dnaRef.filter((function(e){return r.props.parameters.genome.name===e.genome&&e})),rnaRefOptions:this.props.formData.rnaRef.filter((function(e){return r.props.parameters.genome.name===e.genome&&e}))})),e.next=9,this.props.setParentState([{name:"dnaRef",value:a},{name:"rnaRef",value:n}]);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){return this.state.isReady?s.a.createElement(s.a.Fragment,null,s.a.createElement(H,{id:"dataType",className:this.props.dropdownClassName,isHidden:!1,parameterName:"Data Type:",parameterOptions:this.props.formData.dataType,selectedParameter:this.props.parameters.dataType,handleUpdateSelection:this.handleFilterChange}),s.a.createElement(H,{id:"dataset",className:this.props.dropdownClassName,isHidden:!1,parameterName:"Dataset:",selectOne:this.props.selectOne,parameterOptions:this.props.formData.dataset,selectedParameter:this.props.parameters.dataset,handleUpdateSelection:this.handleFilterChange}),s.a.createElement(H,{id:"genome",className:this.props.dropdownClassName,isHidden:!1,parameterName:"Genome:",selectOne:this.props.selectOne,parameterOptions:this.props.formData.genome,selectedParameter:this.props.parameters.genome,handleUpdateSelection:this.handleFilterChange}),s.a.createElement(H,{id:"rnaTool",className:this.props.dropdownClassName,isHidden:this.state.hideRNAToolRef,parameterName:"RNA Tool:",parameterOptions:this.props.formData.rnaTool,selectedParameter:this.props.parameters.rnaTool,handleUpdateSelection:this.handleFilterChange}),s.a.createElement(H,{id:"rnaRef",className:this.props.dropdownClassName,isHidden:this.state.hideRNAToolRef,parameterName:"RNA Ref:",parameterOptions:this.state.rnaRefOptions,selectedParameter:this.props.parameters.rnaRef,handleUpdateSelection:this.handleFilterChange}),s.a.createElement(H,{id:"dnaTool",className:this.props.dropdownClassName,isHidden:this.state.hideDNAToolRef,parameterName:"DNA Tool:",parameterOptions:this.props.formData.dnaTool,selectedParameter:this.props.parameters.dnaTool,handleUpdateSelection:this.handleFilterChange}),s.a.createElement(H,{id:"dnaRef",className:this.props.dropdownClassName,isHidden:this.state.hideDNAToolRef,parameterName:"DNA Ref:",parameterOptions:this.state.dnaRefOptions,selectedParameter:this.props.parameters.dnaRef,handleUpdateSelection:this.handleFilterChange})):s.a.createElement("div",null)}}]),t}(s.a.Component),z=(a(105),function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(c.a)(this,Object(u.a)(t).call(this))).setRequestView=function(t){e.props.setRequestView(t.value)},e.state={psetRequestMode:!1},e.sendFilterPSetRequest=e.sendFilterPSetRequest.bind(Object(S.a)(e)),e.setRequestView=e.setRequestView.bind(Object(S.a)(e)),e}return Object(m.a)(t,e),Object(o.a)(t,[{key:"sendFilterPSetRequest",value:function(){var e=this,t=k(D(this.props.parameters)),a="/pset"===t||"/pset?"===t;x(t,(function(t){e.props.updateAllData(t,a)}))}},{key:"render",value:function(){return s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"pSetFilterContainer"},s.a.createElement("div",{className:"pSetFilter"},s.a.createElement("h2",null,"PSet Parameters"),s.a.createElement("div",{className:"filterSet"},s.a.createElement("label",{className:"bold"},"Request PSet: "),s.a.createElement(C.InputSwitch,{checked:this.props.isRequest,tooltip:"Turn this on to request a PSet.",onChange:this.setRequestView})),s.a.createElement(V,{autoUpdate:!0,setParentState:this.props.setParentState,requestUpdate:this.sendFilterPSetRequest,parameters:this.props.parameters,formData:this.props.formData,dropdownClassName:"filterSet",selectOne:this.props.isRequest}))))}}]),t}(s.a.Component)),U=a(58),J=a(54),Y=a(21);function _(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var G=function(e){var t=Object(n.useContext)(p),a=Object(n.useState)({rows:10,first:0,start:0,end:10,totalRecords:0,loading:!0}),r=Object(U.a)(a,2),i=r[0],l=r[1];Object(n.useEffect)((function(){l(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?_(a,!0).forEach((function(t){Object(f.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):_(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},i,{loading:!1}))}),[]);var o=function(e,t){return function(a){a.preventDefault(),console.log("downloadOnePSet"),function(e){console.log("downloadOnePSet: "+e);var t=[e];fetch("/pset/download",{method:"POST",body:JSON.stringify({psetIDs:t}),headers:{"Content-type":"application/json"}}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))}(e);var n=document.createElement("a");n.setAttribute("download",null),n.style.display="none",n.setAttribute("href",t),document.body.appendChild(n),n.click(),document.body.removeChild(n)}},c=function(e,t){var a="";return e[t.field]&&(a=e[t.field].map((function(e){return s.a.createElement("div",{key:e.name},e.name)}))),s.a.createElement("div",null,a)};return s.a.createElement(J.DataTable,{value:e.allData,selection:e.selectedPSets,onSelectionChange:function(t){e.updatePSetSelection(t.value)},paginator:!0,rows:i.rows,scrollable:!0},t.authenticated&&s.a.createElement(Y.Column,{selectionMode:"multiple",style:{width:"2.5em"}}),s.a.createElement(Y.Column,{className:"textField",field:"name",header:"Name",style:{width:"10em"},body:function(e,t){var a="/"+e.doi;return s.a.createElement(d.b,{to:a},e.name)},sortable:!0}),s.a.createElement(Y.Column,{className:"textField",field:"dataset.name",header:"Dataset",style:{width:"6.5em"},sortable:!0}),s.a.createElement(Y.Column,{className:"textField",field:"drugSensitivity.version",header:"Drug Sensitivity",style:{width:"10.5em"},sortable:!0}),s.a.createElement(Y.Column,{field:"rnaTool",body:c,style:{width:"8em"},header:"RNA Tool",sortable:!0}),s.a.createElement(Y.Column,{field:"dnaTool",body:c,style:{width:"8em"},header:"DNA Tool",sortable:!0}),s.a.createElement(Y.Column,{field:"rnaRef",body:c,style:{width:"15em"},header:"RNA Ref",sortable:!0}),s.a.createElement(Y.Column,{field:"dnaRef",body:c,style:{width:"15em"},header:"DNA Ref",sortable:!0}),s.a.createElement(Y.Column,{field:"downloadLink",body:function(e,t){var a="Not Available";return e.downloadLink&&(a=s.a.createElement("a",{id:e._id,href:"",onClick:o(e._id,e.downloadLink)},"Download")),a},style:{width:"6.5em"},header:"Download"}))},$=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(c.a)(this,Object(u.a)(t).call(this))).saveSelectedPSets=function(t){t.preventDefault(),e.context.authenticated&&function(e,t,a){if(t.length){for(var n={username:e},s=[],r=0;r<t.length;r++)s.push(t[r]._id);n.psetId=s,fetch("/user/pset/add",{method:"POST",body:JSON.stringify({reqData:n}),headers:{"Content-type":"application/json"}}).then((function(e){return e.json()})).then((function(e){return a(1,e)})).catch((function(e){return a(0,e)}))}}(e.context.username,e.props.selectedPSets,(function(t,a){e.props.onSaveComplete(t,a)}))},e.saveSelectedPSets=e.saveSelectedPSets.bind(Object(S.a)(e)),e}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return this.context.authenticated?s.a.createElement(E.Button,{label:"Save",onClick:this.saveSelectedPSets,disabled:this.props.disabled}):"*Login or register to save existing PSets to your profile."}}]),t}(s.a.Component);$.contextType=p;var W=$,K=a(28),Q=a(55),X=a.n(Q),Z=a(18),ee=a(16),te=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(c.a)(this,Object(u.a)(t).call(this))).handleSubmitRequest=function(t){t.preventDefault();var a=e.state.parameters;a.drugSensitivity=a.dataset.drugSensitivity,console.log(a),Object(K.trackPromise)(fetch("/pset/request",{method:"POST",body:JSON.stringify({reqData:a}),headers:{"Content-type":"application/json"}}).then((function(e){return e.json()})).then((function(t){return T(1,t,e.initializeState,e.messages)})).catch((function(t){return T(0,t,e.initializeState,e.messages)})))},e.updateReqInputEvent=function(t){t.preventDefault();var a=e.state.parameters;a[t.target.id]=t.target.value,e.setState({parameters:a,notReadyToSubmit:P(a)})},e.state={allData:[],formDataOriginal:{},formData:{},searchAll:!0,selectedPSets:[],disableSaveBtn:!0,isRequest:!1,parameters:{dataType:[],dataset:[],drugSensitivity:[],genome:[],rnaTool:[],rnaRef:[],dnaTool:[],dnaRef:[],name:"",email:""},notReadyToSubmit:!0},e.updateAllData=e.updateAllData.bind(Object(S.a)(e)),e.setStateOnParamSelection=e.setStateOnParamSelection.bind(Object(S.a)(e)),e.updatePSetSelection=e.updatePSetSelection.bind(Object(S.a)(e)),e.initializeState=e.initializeState.bind(Object(S.a)(e)),e.showMessage=e.showMessage.bind(Object(S.a)(e)),e.setRequestView=e.setRequestView.bind(Object(S.a)(e)),e.handleSubmitRequest=e.handleSubmitRequest.bind(Object(S.a)(e)),e.updateReqInputEvent=e.updateReqInputEvent.bind(Object(S.a)(e)),e}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;x("/pset",(function(t){e.updateAllData(t)})),fetch("/formdata").then((function(e){return e.json()})).then((function(t){e.setState({formData:t[0],formDataOriginal:JSON.parse(JSON.stringify(t[0]))})}))}},{key:"showMessage",value:function(e,t){T(e,t,this.initializeState,this.messages)}},{key:"setStateOnParamSelection",value:function(e){for(var t=this.state.parameters,a=0;a<e.length;a++)t[e[a].name]=e[a].value;console.log(t),this.setState({parameters:t,notReadyToSubmit:P(t)})}},{key:"updateAllData",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.setState({allData:e,searchAll:t})}},{key:"updatePSetSelection",value:function(e){var t=this;this.setState({selectedPSets:e},(function(){w(t.state.selectedPSets)?t.setState({disableSaveBtn:!1}):t.setState({disableSaveBtn:!0})}))}},{key:"setRequestView",value:function(e){var t=this.state.parameters,a=this.state.formData;if(e)t.dataset.length&&(a.dataset=t.dataset,t.dataset=t.dataset[0]),t.genome.length&&(a.genome=t.genome,t.genome=t.genome[0]);else{if(console.log(t),a.dataset.length<this.state.formDataOriginal.dataset.length)t.dataset=a.dataset;else if(!Array.isArray(t.dataset)){var n=JSON.parse(JSON.stringify(t.dataset));t.dataset=[],t.dataset.push(n)}if(a.genome.length<this.state.formDataOriginal.genome.length)t.genome=a.genome;else if(!Array.isArray(t.genome)){var s=JSON.parse(JSON.stringify(t.genome));t.genome=[],t.genome.push(s)}a=this.state.formDataOriginal}this.setState({parameters:t,formData:JSON.parse(JSON.stringify(a)),notReadyToSubmit:P(t),isRequest:e})}},{key:"initializeState",value:function(){this.setState({selectedPSets:[],disableSaveBtn:!0})}},{key:"render",value:function(){var e=this;return s.a.createElement(s.a.Fragment,null,s.a.createElement(N,{routing:this.props}),s.a.createElement("div",{className:"pageContent"},s.a.createElement("h1",null,"Search or Request Pharmacogenomic Datasets"),s.a.createElement("div",{className:"pSetListContainer"},s.a.createElement(z,{updateAllData:this.updateAllData,setRequestView:this.setRequestView,setParentState:this.setStateOnParamSelection,isRequest:this.state.isRequest,formData:this.state.formData,parameters:this.state.parameters}),s.a.createElement("div",{className:"pSetTable"},s.a.createElement(ee.Messages,{ref:function(t){return e.messages=t}}),s.a.createElement("div",{className:"pSetSelectionSummary"},s.a.createElement("div",{className:"summaryPanel"},s.a.createElement("h2",null,"Summary"),s.a.createElement("div",{className:"pSetSummaryContainer"},s.a.createElement("div",{className:"pSetSummaryItem"},this.state.searchAll?s.a.createElement("span",null,s.a.createElement("span",{className:"pSetSummaryNum"},this.state.allData.length)," ",s.a.createElement("span",null,"dataset(s) available.")):s.a.createElement("span",null,s.a.createElement("span",{className:"pSetSummaryNum"},this.state.allData.length)," ",s.a.createElement("span",null,1===this.state.allData.length?" match":" matches")," found."))),s.a.createElement(W,{selectedPSets:this.state.selectedPSets,disabled:this.state.disableSaveBtn,onSaveComplete:this.showMessage})),this.state.isRequest&&s.a.createElement("div",{className:"requestFormPanel"},s.a.createElement("h2",null,"Request PSet"),s.a.createElement("div",{className:"reqFormInput"},s.a.createElement("label",null,"PSet Name:"),s.a.createElement(Z.InputText,{id:"name",className:"paramInput",value:this.state.parameters.name||"",onChange:this.updateReqInputEvent})),s.a.createElement("div",{className:"reqFormInput"},s.a.createElement("label",null,"Email to receive DOI:"),s.a.createElement(Z.InputText,{id:"email",className:"paramInput",value:this.state.parameters.email||"",onChange:this.updateReqInputEvent})),s.a.createElement("div",{className:"reqFormInput"},s.a.createElement((function(t){return Object(K.usePromiseTracker)().promiseInProgress?s.a.createElement("div",{className:"loaderContainer"},s.a.createElement(X.a,{type:"ThreeDots",color:"#3D405A",height:100,width:100})):s.a.createElement(E.Button,{label:"Submit Request",type:"submit",disabled:!1,onClick:e.handleSubmitRequest})}),null)))),s.a.createElement(G,{allData:this.state.allData,selectedPSets:this.state.selectedPSets,updatePSetSelection:this.updatePSetSelection,scrollHeight:"600px"})))))}}]),t}(s.a.Component);te.contextType=p;var ae=te,ne=(a(35),function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(c.a)(this,Object(u.a)(t).call(this))).displaySelectedParameter=e.displaySelectedParameter.bind(Object(S.a)(e)),e}return Object(m.a)(t,e),Object(o.a)(t,[{key:"displaySelectedParameter",value:function(e){var t="";if(Array.isArray(e))for(var a=0;a<e.length;a++)t+=e[a].label,a!==e.length-1&&(t+=", ");else t=e.label;return t||s.a.createElement("span",{className:"noneSelectedMsg"},"None selected")}},{key:"render",value:function(){return this.props.isHidden?null:s.a.createElement("div",{className:"parameterSelectionSet"},s.a.createElement("div",{className:"parameterName"},this.props.parameterName,":"),s.a.createElement("div",{className:"parameterSelection"},this.displaySelectedParameter(this.props.parameter)))}}]),t}(s.a.Component)),se=a(29),re=function(e){function t(){return Object(l.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=s.a.createElement(s.a.Fragment,null,s.a.createElement("div",null,s.a.createElement("span",{style:{float:"left"}},s.a.createElement(W,{selectedPSets:this.props.selectedValue,disabled:this.props.disableBtn,onSaveComplete:this.props.onComplete})),s.a.createElement(E.Button,{className:"modalCancelBtn",label:"Cancel",onClick:this.props.hide})));return s.a.createElement(s.a.Fragment,null,s.a.createElement(se.Dialog,{header:"Available PSets",visible:this.props.visible,onHide:this.props.hide,footer:e},s.a.createElement(G,{allData:this.props.tableValue,selectedPSets:this.props.selectedValue,updatePSetSelection:this.props.onSelectionChange,scrollHeight:"600px"})),s.a.createElement(E.Button,{label:"View available PSets",onClick:this.props.show}))}}]),t}(s.a.Component),ie=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(c.a)(this,Object(u.a)(t).call(this))).handleSubmitRequest=function(t){t.preventDefault(),function(e,t){console.log(e),fetch("/pset/request",{method:"POST",body:JSON.stringify({reqData:e}),headers:{"Content-type":"application/json"}}).then((function(e){return e.json()})).then((function(e){return t(1,e)})).catch((function(e){return t(0,e)}))}(e.state.reqData,(function(t,a){T(t,a,e.initializeState,e.messages)}))},e.updateReqInputEvent=function(t){t.preventDefault();var a=e.state.reqData;a[t.target.id]=t.target.value,e.setState({reqData:a,notReadyToSubmit:P(a)})},e.state={queryResult:[],selectedPSets:[],reqData:{dataType:[],dataset:{},genome:{},drugSensitivity:{},rnaTool:[],dnaTool:[],rnaRef:[],dnaRef:[],name:"",email:""},notReadyToSubmit:!1,isModalVisible:!1,disableModalBtn:!0},e.handleSubmitRequest=e.handleSubmitRequest.bind(Object(S.a)(e)),e.showMessage=e.showMessage.bind(Object(S.a)(e)),e.setStateOnParamSelection=e.setStateOnParamSelection.bind(Object(S.a)(e)),e.updateReqInputEvent=e.updateReqInputEvent.bind(Object(S.a)(e)),e.processAPIRequest=e.processAPIRequest.bind(Object(S.a)(e)),e.initializeState=e.initializeState.bind(Object(S.a)(e)),e.showModal=e.showModal.bind(Object(S.a)(e)),e.hideModal=e.hideModal.bind(Object(S.a)(e)),e.updatePSetSelection=e.updatePSetSelection.bind(Object(S.a)(e)),e}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.context.authenticated&&this.setState({email:this.context.username})}},{key:"showMessage",value:function(e,t){T(e,t,this.hideModal,this.messages)}},{key:"setStateOnParamSelection",value:function(e){for(var t=this.state.reqData,a=0;a<e.length;a++)t[e[a].name]=e[a].value;this.setState({reqData:t,notReadyToSubmit:P(t)})}},{key:"processAPIRequest",value:function(){var e=this,t=D(this.state.reqData);if(function(e){return!(e.datatype.length||e.datasetName.length||e.genome.length||e.rnaTool.length||e.dnaTool.length||e.rnaRef.length||e.dnaRef.length||e.drugSensitivity.length)}(t))this.setState({queryResult:[]});else{var a=k(t);console.log(a),x(a,(function(t){e.setState({queryResult:t})}))}}},{key:"initializeState",value:function(){this.setState({queryResult:[],selectedPSets:[],reqData:{dataType:[],dataset:{},genome:{},drugSensitivity:{},rnaTool:[],dnaTool:[],rnaRef:[],dnaRef:[],name:"",email:""},notReadyToSubmit:!0,isModalVisible:!1,disableModalSaveBtn:!0})}},{key:"showModal",value:function(){this.setState({isModalVisible:!0})}},{key:"hideModal",value:function(){this.setState({isModalVisible:!1,selectedPSets:[],disableModalBtn:!0})}},{key:"updatePSetSelection",value:function(e){var t=this;this.setState({selectedPSets:e},(function(){w(t.state.selectedPSets)?t.setState({disableModalBtn:!1}):t.setState({disableModalBtn:!0})}))}},{key:"render",value:function(){var e=this,t=s.a.createElement(re,{visible:this.state.isModalVisible,show:this.showModal,hide:this.hideModal,tableValue:this.state.queryResult,selectedValue:this.state.selectedPSets,disableBtn:this.state.disableModalBtn,onSelectionChange:this.updatePSetSelection,onComplete:this.showMessage});return s.a.createElement(s.a.Fragment,null,s.a.createElement(N,{routing:this.props}),s.a.createElement("div",{className:"pageContent"},s.a.createElement("h1",null,"Request Pipeline Analysis"),s.a.createElement(ee.Messages,{ref:function(t){return e.messages=t}}),s.a.createElement("div",{className:"psetRequest"},s.a.createElement("div",{className:"psetRequestForm"},s.a.createElement("h3",null,"Pipeline Analysis Request Form"),s.a.createElement("form",null,s.a.createElement(V,{autoUpdate:!0,setParentState:this.setStateOnParamSelection,requestUpdate:this.processAPIRequest,parameters:this.state.reqData,dropdownClassName:"reqInputSet",selectOne:!0,requestView:!0}),s.a.createElement("div",{className:"reqInputSet"},s.a.createElement("label",null,"PSet Name:"),s.a.createElement(Z.InputText,{id:"name",className:"paramInput",value:this.state.reqData.name||"",onChange:this.updateReqInputEvent})),s.a.createElement("div",{className:"reqInputSet"},s.a.createElement("label",null,"Email to receive DOI:"),s.a.createElement(Z.InputText,{id:"email",className:"paramInput",value:this.state.reqData.email||"",onChange:this.updateReqInputEvent})),s.a.createElement(E.Button,{label:"Submit Request",type:"submit",onClick:this.handleSubmitRequest,disabled:this.state.notReadyToSubmit}))),s.a.createElement("div",{className:"requestSelectionSummary"},s.a.createElement("div",{className:"psetAvailability"},s.a.createElement("h3",null,"Available PSets with Your Parameter Selection"),s.a.createElement("div",{className:"psetAvail"},s.a.createElement("span",{className:"pSetNum"},this.state.queryResult.length),1===this.state.queryResult.length?"match":"matches"," found.",s.a.createElement("span",{className:"pSetAvailLink"},this.state.queryResult.length?t:""))),s.a.createElement("div",{className:"requestSummary"},s.a.createElement("h3",null,"Your Parameter Selection"),s.a.createElement("div",{className:"parameterSelectionContainer"},s.a.createElement(ne,{parameterName:"Datatype",parameter:this.state.reqData.dataType,isHidden:!1}),s.a.createElement(ne,{parameterName:"Dataset",parameter:this.state.reqData.dataset,isHidden:!1}),s.a.createElement(ne,{parameterName:"Drug Sensitivity",parameter:this.state.reqData.drugSensitivity,isHidden:!1}),s.a.createElement(ne,{parameterName:"Genome",parameter:this.state.reqData.genome}),s.a.createElement(ne,{parameterName:"RNA Tool.",parameter:this.state.reqData.rnaTool,isHidden:this.state.hideRNAToolRef}),s.a.createElement(ne,{parameterName:"RNA Ref.",parameter:this.state.reqData.rnaRef,isHidden:this.state.hideRNAToolRef}),s.a.createElement(ne,{parameterName:"DNA Tool.",parameter:this.state.reqData.dnaTool,isHidden:this.state.hideRNAToolRef}),s.a.createElement(ne,{parameterName:"DNA Ref.",parameter:this.state.reqData.dnaRef,isHidden:this.state.hideDNAToolRef})))))))}}]),t}(s.a.Component);ie.contextType=p;a(151);var le=a(56),oe=a.n(le),ce=a(57),ue=a.n(ce)()(oe.a),me=function(e){function t(){return Object(l.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props.data.value,t=this.props.data.name;return s.a.createElement(ue,{data:[{type:"bar",x:e,y:t,orientation:"h",marker:{color:"#3D405A"}}],layout:{autosize:!0,title:this.props.title,yaxis:{autorange:"reversed"},titlefont:{size:18,color:"#3D405A"},font:{color:"#3D405A"}},style:{width:"100%"},useResizeHandler:!0})}}]),t}(s.a.Component),de=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(c.a)(this,Object(u.a)(t).call(this))).state={allData:[],chartData:{},selectedPSets:[],disableBtn:!0,isReady:!1},e.updatePSetSelection=e.updatePSetSelection.bind(Object(S.a)(e)),e.showMessages=e.showMessages.bind(Object(S.a)(e)),e.initializeState=e.initializeState.bind(Object(S.a)(e)),e}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;x("/pset/sort",(function(t){for(var a=[],n=[],s=[],r=0;r<t.length&&(a.push({name:t[r].name,value:t[r].download}),n.push(t[r].name),s.push(t[r].download),!(r>=9));r++);e.setState({allData:t,chartData:{data:a,name:n,value:s},isReady:!0})}))}},{key:"updatePSetSelection",value:function(e){var t=this;this.setState({selectedPSets:e},(function(){w(t.state.selectedPSets)?t.setState({disableBtn:!1}):t.setState({disableBtn:!0})}))}},{key:"showMessages",value:function(e,t){var a=this;T(e,t,this.initializeState,this.messages),x("/pset/sort",(function(e){a.setState({allData:e})}))}},{key:"initializeState",value:function(){this.setState({selectedPSets:[],disableBtn:!0})}},{key:"render",value:function(){var e=this;return s.a.createElement(s.a.Fragment,null,s.a.createElement(N,{routing:this.props}),s.a.createElement("div",{className:"pageContent"},s.a.createElement("h1",null,"PSet Usage and Downloads"),s.a.createElement("div",{className:"statContainer"},s.a.createElement("div",{className:"container rankingTable"},s.a.createElement("h3",null,"Download Ranking"),s.a.createElement(ee.Messages,{ref:function(t){return e.messages=t}}),s.a.createElement(G,{allData:this.state.allData,selectedPSets:this.state.selectedPSets,updatePSetSelection:this.updatePSetSelection,showDownload:!0,scrollHeight:"340px"}),s.a.createElement("div",{className:"rankingTableFooter"},s.a.createElement(W,{selectedPSets:this.state.selectedPSets,disabled:this.state.disableBtn,onSaveComplete:this.showMessages}))),s.a.createElement("div",{className:"container downloadHistogram"},this.state.isReady&&s.a.createElement(me,{data:this.state.chartData,title:"Number of Downloads"})))))}}]),t}(s.a.Component);de.contextType=p;var he=de,pe=(a(152),function(e){function t(){return Object(l.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return s.a.createElement(s.a.Fragment,null,s.a.createElement(N,{routing:this.props}),s.a.createElement("div",{className:"pageContent"},s.a.createElement("h1",null,"Contact Us")))}}]),t}(s.a.Component)),fe=(a(153),a(154),function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(c.a)(this,Object(u.a)(t).call(this))).state={user:{}},e.showModal=e.showModal.bind(Object(S.a)(e)),e.hideModal=e.hideModal.bind(Object(S.a)(e)),e}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;fetch("/user/?username="+this.context.username).then((function(e){return e.json()})).then((function(t){return e.setState({user:t})}))}},{key:"showModal",value:function(){}},{key:"hideModal",value:function(){}},{key:"render",value:function(){return s.a.createElement("div",{className:"userInfoContainer"},s.a.createElement("h2",null,"User Information"),s.a.createElement("div",{className:"userInfo"},"Username: ",this.state.user.username),s.a.createElement("div",{className:"userInfoBtn"},s.a.createElement(E.Button,{label:"Change User Settings",onClick:this.showModal})))}}]),t}(s.a.Component));fe.contextType=p;var be=fe,ve=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(c.a)(this,Object(u.a)(t).call(this))).downloadPSets=function(t){t.preventDefault();var a=e.props.selectedPSets,n=document.createElement("a");n.setAttribute("download",null),n.style.display="none",document.body.appendChild(n);for(var s=0;s<a.length;s++)a[s].downloadLink&&(n.setAttribute("href",a[s].downloadLink),n.click());document.body.removeChild(n),function(e,t){var a=[];console.log(e);for(var n=0;n<e.length;n++)a.push(e[n]._id);console.log(a),fetch("/pset/download",{method:"POST",body:JSON.stringify({psetIDs:a}),headers:{"Content-type":"application/json"}}).then((function(e){return e.json()})).then((function(e){t(1,e)})).catch((function(e){return t(0,e)}))}(e.props.selectedPSets,(function(e,t){}))},e.downloadPSets=e.downloadPSets.bind(Object(S.a)(e)),e}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return s.a.createElement(E.Button,{className:"downloadBtn",label:"Download",disabled:this.props.disabled,onClick:this.downloadPSets})}}]),t}(s.a.Component),ge=(a(155),function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(c.a)(this,Object(u.a)(t).call(this))).handleBtnClick=function(t){e.setState({dialogVisible:!0})},e.state={selectedPSets:[],btnDisabled:!0,dialogVisible:!1,btnYesDislabed:!1},e.handleBtnClick=e.handleBtnClick.bind(Object(S.a)(e)),e.handleSelectionChange=e.handleSelectionChange.bind(Object(S.a)(e)),e.onClickYes=e.onClickYes.bind(Object(S.a)(e)),e.onHide=e.onHide.bind(Object(S.a)(e)),e.showMessages=e.showMessages.bind(Object(S.a)(e)),e}return Object(m.a)(t,e),Object(o.a)(t,[{key:"handleSelectionChange",value:function(e){var t=this;this.setState({selectedPSets:e},(function(){t.state.selectedPSets&&t.state.selectedPSets.length>0?t.setState({btnDisabled:!1}):t.setState({btnDisabled:!0})}))}},{key:"showMessages",value:function(e,t){T(e,t,null,this.props.messages)}},{key:"onClickYes",value:function(){var e=this;this.setState({btnDisabled:!0,btnYesDislabed:!0}),this.props.handleBtnClick(this.state.selectedPSets,(function(t){t?e.setState({btnDisabled:!1}):e.setState({selectedPSets:[],dialogVisible:!1})}))}},{key:"onHide",value:function(){this.setState({dialogVisible:!1,btnYesDislabed:!1})}},{key:"render",value:function(){var e=s.a.createElement(s.a.Fragment,null,s.a.createElement("div",null,s.a.createElement(G,{allData:this.props.pset,selectedPSets:this.state.selectedPSets,updatePSetSelection:this.handleSelectionChange,scrollHeight:"350px",pending:this.props.pending})),s.a.createElement("div",{className:"footer"},this.props.pending?"":s.a.createElement(ve,{selectedPSets:this.state.selectedPSets,disabled:this.state.btnDisabled,onDownloadComplete:this.showMessages}),s.a.createElement(E.Button,{label:this.props.btnLabel,onClick:this.handleBtnClick,disabled:this.state.btnDisabled}))),t=s.a.createElement("p",null,"No data available."),a=s.a.createElement("div",null,s.a.createElement(E.Button,{label:"Yes",onClick:this.onClickYes,disabled:this.state.btnYesDislabed}),s.a.createElement(E.Button,{label:"Cancel",onClick:this.onHide}));return s.a.createElement("div",{className:"userPSet"},s.a.createElement("h2",null,this.props.heading),s.a.createElement("div",{className:"userPSetContent"},this.props.pset?e:t),s.a.createElement("div",null,s.a.createElement(se.Dialog,{header:this.props.pending?"Canceling PSet Request(s)":"Removing Pset(s)",footer:a,visible:this.state.dialogVisible,style:{width:"300px"},modal:!0,onHide:this.onHide},this.props.pending?"Are you sure you would like to cancel the selected PSet request(s)?":"Are you sure you would like to remove the selected PSet(s) from the saved list?")))}}]),t}(s.a.Component)),Se=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(c.a)(this,Object(u.a)(t).call(this))).removeFromSavedList=function(t,a){for(var n=[],s=0;s<t.length;s++)n.push(t[s]._id);fetch("/user/pset/remove",{method:"POST",body:JSON.stringify({username:e.context.username,psetID:n}),headers:{"Content-type":"application/json"}}).then((function(e){return e.json()})).then((function(t){T(1,t,null,e.messages);var s=e.state.psetSaved;s=e.removePSetByID(s,n),e.setState({psetSaved:s},a(0))})).catch((function(t){T(0,t,null,e.messages),a(1)}))},e.cancelPSetRequest=function(t,a){for(var n=[],s=0;s<t.length;s++)n.push(t[s]._id);fetch("/pset/cancel",{method:"POST",body:JSON.stringify({username:e.context.username,psetID:n}),headers:{"Content-type":"application/json"}}).then((function(e){return e.json()})).then((function(t){T(1,t,null,e.messages);var s=e.state.psetInProcess;s=e.removePSetByID(s,n),e.setState({psetInProcess:s},a(0))})).catch((function(t){T(0,t,null,e.messages),a(1)}))},e.state={username:"",userEmail:"",psetSaved:[],psetInProcess:[]},e.removeFromSavedList=e.removeFromSavedList.bind(Object(S.a)(e)),e.cancelPSetRequest=e.cancelPSetRequest.bind(Object(S.a)(e)),e.findPSetByID=e.findPSetByID.bind(Object(S.a)(e)),e.removePSetByID=e.removePSetByID.bind(Object(S.a)(e)),e}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;fetch("/user/pset/?username="+this.context.username).then((function(e){return e.json()})).then((function(t){for(var a=[],n=[],s=0;s<t.length;s++)"complete"===t[s].status?a.push(t[s]):n.push(t[s]);e.setState({psetSaved:a,psetInProcess:n})}))}},{key:"findPSetByID",value:function(e,t){for(var a=0;a<e.length;a++)if(e[a]._id===t)return a;return-1}},{key:"removePSetByID",value:function(e,t){for(var a=0;a<t.length;a++){var n=this.findPSetByID(e,t[a]);n>-1&&e.splice(n,1)}return e}},{key:"render",value:function(){var e=this;return s.a.createElement(s.a.Fragment,null,s.a.createElement(N,{routing:this.props}),s.a.createElement("div",{className:"pageContent"},s.a.createElement("h1",null,"Your Profile"),s.a.createElement("div",{className:"userProfile"},s.a.createElement(be,null),s.a.createElement("div",{className:"userPSetLists"},s.a.createElement(ee.Messages,{ref:function(t){return e.messages=t}}),s.a.createElement(ge,{heading:"Your Saved PSets",btnLabel:"Remove from List",pset:this.state.psetSaved,handleBtnClick:this.removeFromSavedList,messages:this.messages}),s.a.createElement(ge,{heading:"Your PSet Requests in Process",btnLabel:"Cancel Request",pset:this.state.psetInProcess,pending:!0,handleBtnClick:this.cancelPSetRequest})))))}}]),t}(s.a.Component);Se.contextType=p;var Ee=Se,ye=(a(156),function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(c.a)(this,Object(u.a)(t).call(this))).onFindClick=function(t){t.preventDefault();var a="user/check/?username="+e.state.email;fetch(a).then((function(e){return e.json()})).then((function(t){e.setState({userChecked:!0,userExists:t.exists,userRegistered:t.registered})}))},e.onLoginClick=function(t){t.preventDefault(),fetch("/user/login",{method:"POST",body:JSON.stringify({user:{username:e.state.email,password:e.state.password}}),headers:{"Content-type":"application/json"}}).then((function(e){return e.json()})).then((function(t){t.authenticated?(console.log("authenticated"),e.initializeState(),e.context.setAuthToken(t)):e.messages.show({severity:"error",summary:"Login Failed",detail:"Please re-enter your email and password."})}))},e.onRegisterClick=function(t){t.preventDefault(),fetch("/user/register",{method:"POST",body:JSON.stringify({user:{username:e.state.email,password:e.state.passwordReg1,exists:e.state.userExists}}),headers:{"Content-type":"application/json"}}).then((function(e){return e.json()})).then((function(t){t.status?(e.initializeState(),e.context.setAuthToken({authenticated:t.authenticated,username:t.username})):e.messages.show({severity:"error",summary:"Registration Failed",detail:"Please try again."})}))},e.state={email:"",password:"",passwordReg1:"",passwordReg2:"",userChecked:!1,userExists:!1,userRegistered:!1,btnFindDisabled:!0,btnLoginDisabled:!0,btnRegDisabled:!0},e.initializeState=e.initializeState.bind(Object(S.a)(e)),e.handleInputChange=e.handleInputChange.bind(Object(S.a)(e)),e.onFindClick=e.onFindClick.bind(Object(S.a)(e)),e.onLoginClick=e.onLoginClick.bind(Object(S.a)(e)),e.onRegisterClick=e.onRegisterClick.bind(Object(S.a)(e)),e.loginForm=e.loginForm.bind(Object(S.a)(e)),e.registerForm=e.registerForm.bind(Object(S.a)(e)),e.renderForm=e.renderForm.bind(Object(S.a)(e)),e}return Object(m.a)(t,e),Object(o.a)(t,[{key:"initializeState",value:function(){this.setState({email:"",password:"",passwordReg1:"",passwordReg2:"",userChecked:!1,userExists:!1,userRegistered:!1,btnFindDisabled:!0,btnLoginDisabled:!0,btnRegDisabled:!0})}},{key:"handleInputChange",value:function(e){var t=this,a=e.target.name;this.setState(Object(f.a)({},a,e.target.value),(function(){switch(a){case"email":/^\w+([.-]?\w+)*@\w+([.-]?\w+)*(\.\w{2,3})+$/.test(t.state.email)?t.setState({btnFindDisabled:!1}):t.setState({btnFindDisabled:!0});break;case"password":t.state.password.length>=6?t.setState({btnLoginDisabled:!1}):t.setState({btnLoginDisabled:!0});break;case"passwordReg1":t.state.passwordReg1.length>=6?t.state.passwordReg1===t.state.passwordReg2&&t.setState({btnRegDisabled:!1}):t.setState({btnRegDisabled:!0});break;case"passwordReg2":t.state.passwordReg2.length>=6?t.state.passwordReg1===t.state.passwordReg2&&t.setState({btnRegDisabled:!1}):t.setState({btnRegDisabled:!0})}}))}},{key:"loginForm",value:function(){return s.a.createElement(s.a.Fragment,null,s.a.createElement("h4",null,"Login with your password:"),s.a.createElement("div",{className:"pwdMsg"},"Password needs to be at least 6 characters in length"),s.a.createElement(Z.InputText,{className:"pwdInput",type:"password",name:"password",value:this.state.password,onChange:this.handleInputChange}),s.a.createElement("div",null,s.a.createElement(E.Button,{label:"Login",onClick:this.onLoginClick,disabled:this.state.btnLoginDisabled})))}},{key:"registerForm",value:function(){return s.a.createElement(s.a.Fragment,null,s.a.createElement("h4",null,this.state.userExists?"Email is not registered. ":"Email not found. ","Please register."),s.a.createElement("div",null,s.a.createElement("div",{className:"pwdMsg"},"Password needs to be at least 6 characters in length"),s.a.createElement(Z.InputText,{className:"pwdInput",type:"password",name:"passwordReg1",value:this.state.passwordReg1,onChange:this.handleInputChange})),s.a.createElement("div",null,s.a.createElement("label",null,"Confirm your password:"),s.a.createElement(Z.InputText,{className:"pwdInput",type:"password",name:"passwordReg2",value:this.state.passwordReg2,onChange:this.handleInputChange})),s.a.createElement("div",null,s.a.createElement(E.Button,{label:"Register",onClick:this.onRegisterClick,disabled:this.state.btnRegDisabled})))}},{key:"renderForm",value:function(){return this.state.userChecked?s.a.createElement("div",{className:"formContainer"},this.state.userRegistered?this.loginForm():this.registerForm()):""}},{key:"render",value:function(){var e=this,t=this.props.location.state.logoutMsg;return s.a.createElement(s.a.Fragment,null,s.a.createElement(N,{routing:this.props}),this.context.authenticated?s.a.createElement(h.a,{to:this.props.location.state.path}):s.a.createElement("div",{className:"mainContent"},s.a.createElement("div",{className:"loginRegContent"},s.a.createElement("div",{className:"logoutMsg"},t||""),s.a.createElement("h2",null,"Login/Register"),s.a.createElement(ee.Messages,{ref:function(t){return e.messages=t}}),s.a.createElement("h4",null,"Enter your email:"),s.a.createElement("div",{className:"emailInput"},s.a.createElement(Z.InputText,{type:"email",name:"email",value:this.state.email,onChange:this.handleInputChange}),s.a.createElement(E.Button,{className:"btnLoginFind",label:"Find",icon:"pi pi-arrow-right",onClick:this.onFindClick,disabled:this.state.btnFindDisabled})),this.renderForm())))}}]),t}(s.a.Component));ye.contextType=p;var Oe=ye,Ne=(a(157),a(31)),je=a(22),Re=function(e){function t(){return Object(l.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props.items.map((function(e){return s.a.createElement(je.AccordionTab,{key:e.name,header:e.name},e.commands.length?s.a.createElement("ul",null,e.commands.map((function(e){return s.a.createElement("li",{key:e},e)}))):"Not Available")}));return this.props.items.length?s.a.createElement(je.Accordion,{multiple:!0},e):s.a.createElement("div",{className:"subContent"},"Not Available")}}]),t}(s.a.Component),Ce=function(e){function t(){return Object(l.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props.items.map((function(e){return s.a.createElement(je.AccordionTab,{key:e.name,header:e.name},s.a.createElement("ul",null,s.a.createElement("li",{className:"listItem-1"},s.a.createElement("div",null,e.name.length?e.name:"Currently not available"),s.a.createElement("div",null,e.source.length?s.a.createElement("a",{href:e.source},e.source):"Currently not available"))))}));return this.props.items.length?s.a.createElement(je.Accordion,{multiple:!0},e):s.a.createElement("div",{className:"subContent"},"Not Available")}}]),t}(s.a.Component),De=function(e){function t(){return Object(l.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props.items.map((function(e){return s.a.createElement(je.AccordionTab,{key:e.name,header:e.name},s.a.createElement("ul",null,s.a.createElement("li",{className:"listItem-1"},s.a.createElement("div",null,e.name.length?e.name:"Currently not available"),s.a.createElement("div",null,e.source.length?s.a.createElement("a",{href:e.source},e.source):"Currently not available")),s.a.createElement("li",{className:"listItem-1"},s.a.createElement("div",null,e.cosmic.name),s.a.createElement("div",null,s.a.createElement("a",{href:e.cosmic.source},e.cosmic.source)," ")),s.a.createElement("li",{className:"listItem-1"},s.a.createElement("div",null,e.exonTarget.name),s.a.createElement("div",null,s.a.createElement("a",{href:e.exonTarget.source},e.exonTarget.source)))))}));return this.props.items.length?s.a.createElement(je.Accordion,{multiple:!0},e):s.a.createElement("div",{className:"subContent"},"Not Available")}}]),t}(s.a.Component),ke=function(e){function t(){return Object(l.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return s.a.createElement(je.Accordion,{className:"generalInfoAccordion"},s.a.createElement(je.AccordionTab,{header:"General Information"},s.a.createElement("h4",{className:"subContent"},"PSet Name: ",this.props.data.name),s.a.createElement("h4",{className:"subContent"},"Date Created: ",this.props.data.dateCreated),this.props.data.createdBy&&s.a.createElement("h4",{className:"subContent"},"Created By ",this.props.data.createdBy)))}}]),t}(s.a.Component),Pe=function(e){function t(){return Object(l.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=s.a.createElement("div",null,this.props.metadata.dataset.publication.length?this.props.metadata.dataset.publication.map((function(e){return s.a.createElement("li",{key:e.link,className:"pubList"},s.a.createElement("div",{className:"subContent"},e.citation),s.a.createElement("br",null),s.a.createElement("div",{className:"subContent"},s.a.createElement("a",{href:e.link},e.link)))})):s.a.createElement("div",{className:"subContent"},"Not available."));return s.a.createElement(s.a.Fragment,null,s.a.createElement("h1",{className:"tabMainHeader"},"Dataset: ",this.props.metadata.dataset.label),s.a.createElement("div",{className:"tabContent"},s.a.createElement("div",{className:"tabContentSection"},s.a.createElement("h3",null,"Publication: "),s.a.createElement("ul",null,e)),s.a.createElement("div",{className:"tabContentSection"},s.a.createElement("h3",null,"Drug Sensitivity"),s.a.createElement("h4",{className:"subContent"},"Source: ",this.props.metadata.drugSensitivity.source?s.a.createElement("a",{href:this.props.metadata.drugSensitivity.source},this.props.metadata.drugSensitivity.source):"Not available"),s.a.createElement("h4",{className:"subContent"},"Version: ",this.props.metadata.drugSensitivity.version)),s.a.createElement("div",{className:"tabContentSection"},s.a.createElement("h3",null,"Genome Version"),s.a.createElement("div",{className:"subContent"},this.props.metadata.genome.name?this.props.metadata.genome.name:"Not Available"))))}}]),t}(s.a.Component),we=function(e){function t(){return Object(l.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=s.a.createElement("div",null,this.props.metadata.rawSeqDataRNA?s.a.createElement("a",{href:this.props.metadata.rawSeqDataRNA},this.props.metadata.rawSeqDataRNA):"Not Available");return s.a.createElement(s.a.Fragment,null,s.a.createElement("h1",{className:"tabMainHeader"},"Analysis Details - RNA Data"),s.a.createElement("div",{className:"tabContent"},s.a.createElement("div",{className:"tabContentSection"},s.a.createElement("h3",null,"Raw Data Source: "),s.a.createElement("div",{className:"subContent"},e)),s.a.createElement("div",{className:"tabContentSection"},s.a.createElement("h3",null,"RNA Transcriptome"),s.a.createElement(Ce,{items:this.props.metadata.rnaRef})),s.a.createElement("div",{className:"tabContentSection"},s.a.createElement("h3",null,"Tools and Commands Used"),s.a.createElement(Re,{items:this.props.metadata.rnaTool}))))}}]),t}(s.a.Component),Te=function(e){function t(){return Object(l.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=s.a.createElement("div",null,this.props.metadata.rawSeqDataDNA?s.a.createElement("a",{href:this.props.metadata.rawSeqDataDNA},this.props.metadata.rawSeqDataDNA):"Not Available");return s.a.createElement(s.a.Fragment,null,s.a.createElement("h1",{className:"tabMainHeader"},"Analysis Details - DNA(Exome) Data"),s.a.createElement("div",{className:"tabContent"},s.a.createElement("div",{className:"tabContentSection"},s.a.createElement("h3",null,"Raw Data Source: "),s.a.createElement("div",{className:"subContent"},e)),s.a.createElement("div",{className:"tabContentSection"},s.a.createElement("h3",null,"Exome Reference"),s.a.createElement(De,{items:this.props.metadata.dnaRef})),s.a.createElement("div",{className:"tabContentSection"},s.a.createElement("h3",null,"Tools and Commands Used"),s.a.createElement(Re,{items:this.props.metadata.dnaTool}))))}}]),t}(s.a.Component),qe=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(c.a)(this,Object(u.a)(t).call(this))).state={pset:{},general:{},dataset:{},rna:{},dna:{},isReady:!1,message:""},e.showMessage=e.showMessage.bind(Object(S.a)(e)),e}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;console.log(this.props.match.params.id1+"/"+this.props.match.params.id2);var t="/pset/one/"+this.props.match.params.id1+"/"+this.props.match.params.id2;console.log(t),x(t,(function(t){console.log(t),t?e.setState({pset:t,general:{name:t.name,createdBy:t.createdBy,dateCreated:t.dateCreated},dataset:{dataset:t.dataset,genome:t.genome,drugSensitivity:t.drugSensitivity},rna:{rnaTool:t.rnaTool,rnaRef:t.rnaRef,rawSeqDataRNA:t.dataset.rawSeqDataRNA},dna:{dnaTool:t.dnaTool,dnaRef:t.dnaRef,rawSeqDataDNA:t.dataset.rawSeqDataDNA},isReady:!0}):e.setState({message:"We could not find a PSet with the ID."})}))}},{key:"showMessage",value:function(e,t){T(e,t,this.initializeState,this.messages)}},{key:"render",value:function(){var e=this;return s.a.createElement(s.a.Fragment,null,s.a.createElement(N,{routing:this.props}),s.a.createElement("div",{className:"pageContent"},s.a.createElement(ee.Messages,{ref:function(t){return e.messages=t}}),s.a.createElement("div",{className:"psetTitle"},s.a.createElement("h1",null,"Explore PSet - ",this.state.pset.name),s.a.createElement(ve,{disabled:!1,selectedPSets:[this.state.pset],onDownloadComplete:this.showMessage})),s.a.createElement(ke,{data:this.state.general}),s.a.createElement("div",{className:"tabContainer"},this.state.isReady?s.a.createElement(Ne.TabView,{renderActiveOnly:!1},s.a.createElement(Ne.TabPanel,{header:"Dataset"},s.a.createElement(Pe,{metadata:this.state.dataset})),this.state.pset.dataType.map((function(t){return s.a.createElement(Ne.TabPanel,{key:t.name,header:t.name},"RNA"===t.name?s.a.createElement(we,{metadata:e.state.rna}):s.a.createElement(Te,{metadata:e.state.dna}))}))):s.a.createElement("h3",null,this.state.message))))}}]),t}(s.a.Component),Ae=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(c.a)(this,Object(u.a)(t).call(this))).state={authenticated:!1,user:"",setAuthToken:function(t){e.setState({authenticated:t.authenticated,username:t.username})},resetAuthToken:function(){e.setState({authenticated:!1,user:""})}},e}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.state.authenticated||fetch("/user/checkToken").then((function(e){return 200===e.status?e.json():{authenticated:!1,username:""}})).then((function(t){e.state.setAuthToken(t)}))}},{key:"render",value:function(){var e=s.a.createElement(Ee,null);return s.a.createElement(p.Provider,{value:this.state},s.a.createElement(d.a,null,s.a.createElement(h.d,null,s.a.createElement(h.b,{exact:!0,path:"/",render:function(e){return s.a.createElement(R,Object.assign({path:"/"},e))}}),s.a.createElement(h.b,{exact:!0,path:"/PSetSearch",render:function(e){return s.a.createElement(ae,Object.assign({path:"/PSetSearch"},e))}}),s.a.createElement(h.b,{exact:!0,path:"/Stats",render:function(e){return s.a.createElement(he,Object.assign({path:"/Stats"},e))}}),s.a.createElement(h.b,{exact:!0,path:"/Contact",render:function(e){return s.a.createElement(pe,Object.assign({path:"/Contact"},e))}}),s.a.createElement(h.b,{exact:!0,path:"/Authentication",render:function(e){return s.a.createElement(Oe,e)}}),s.a.createElement(h.b,{path:"/:id1/:id2",render:function(e){return s.a.createElement(qe,Object.assign({path:"/:id1/:id2"},e))}}),s.a.createElement(g,{path:"/Profile",component:e,redirect:"/Authentication"}))))}}]),t}(s.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(s.a.createElement(Ae,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},35:function(e,t,a){},60:function(e,t,a){e.exports=a(160)},65:function(e,t,a){},73:function(e,t,a){},74:function(e,t,a){},76:function(e,t,a){},92:function(e,t,a){},93:function(e,t,a){},96:function(e,t,a){}},[[60,1,2]]]);
//# sourceMappingURL=main.e89f08b1.chunk.js.map