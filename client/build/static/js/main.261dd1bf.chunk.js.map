{"version":3,"sources":["context/auth.js","components/Navigation/Navigation.js","components/Footer/Footer.js","components/Routing/PrivateRoute.js","components/Routing/AdminRoute.js","components/PSet/PSetStyle.js","components/PSet/PSetAccordion.js","components/MainDialog/MainDialog.js","components/Main/Main.js","components/Shared/PSetDropdown/PSetDropdown.js","components/PSetSearch/subcomponents/PSetFilter.js","components/Shared/PSetTable.js","components/Shared/Buttons/SavePSetButton.js","components/Shared/APICalls.js","components/Shared/Helper.js","components/PSetSearch/PSetSearch.js","components/Dashboard/Dashboard.js","components/Stats/UpsetPlot.js","components/Stats/DatasetChart.js","components/Stats/Stats.js","components/Documentation/DocFunctionality/Overview.js","components/Documentation/DocFunctionality/Search.js","components/Documentation/DocFunctionality/Request.js","components/Documentation/DocFunctionality/UserProfile.js","components/Documentation/DocAPI/AvailablePSets.js","components/Documentation/DocAPI/PSetMetadata.js","components/Documentation/DocAPI/StatisticsAPI.js","components/Documentation/Documentation.js","components/Documentation/Support/Tutorial.js","components/Profile/subcomponents/UserInfo.js","components/Profile/subcomponents/UserPSet.js","components/Profile/Profile.js","components/Admin/Admin.js","components/Authentication/AuthForm.js","components/Authentication/Login.js","components/Authentication/Reset.js","components/PSet/TabContents/DatasetTabContent.js","components/PSet/TabContents/AccompanyDataTabContent.js","components/PSet/TabContents/RNATabContent.js","components/PSet/TabContents/DNATabContent.js","components/PSet/TabContents/PipelineTabContent.js","components/Shared/Buttons/DownloadPSetButton.js","components/PSet/PSet.js","components/CanonicalPSets/CanonicalPSets.js","components/Shared/NotFound404.js","components/Routing/Router.js","components/App/App.js","components/serviceWorker.js","index.js"],"names":["AuthContext","createContext","withRouter","props","auth","useContext","useState","isOnline","setIsOnline","location","history","useEffect","a","fetch","status","json","checkStatus","onLoginClick","event","preventDefault","push","pathname","state","path","onLogoutClick","username","then","res","resetAuthToken","logoutMsg","Fragment","exact","to","src","alt","className","activeClassName","authenticated","label","onClick","width","isOpen","Footer","href","PrivateRoute","Component","component","rest","render","redirect","AdminRoute","console","log","isAdmin","from","TabContainer","styled","div","TabHeader","h1","TabContent","TabContentSection","StyledAccordion","Accordion","PSetToolAccordion","toolAccordionTabs","this","items","map","item","key","name","header","commands","length","command","multiple","React","RNARefAccordion","rnaRefAccordionTabs","source","DNARefAccordion","exomeRefAccordionTabs","cosmic","exonTarget","GeneralInfoAccordion","doi","data","target","dateCreated","split","createdBy","DatasetDialog","datasetAccordionTabs","dataset","versions","version","drugSensitivity","publication","p","link","citation","visible","onHide","style","minWidth","minHeight","RNADialog","renderActiveOnly","rna","tool","ref","DNADialog","dna","OrcestraMain","statsData","setStatsData","rnaTool","dnaTool","rnaRef","dnaRef","formData","setFormData","pending","inProcess","dashboard","setDashboard","datasetVisible","setDatasetVisible","rnaVisible","setRNAVisible","dnaVisible","setDNAVisible","api","form","versionCombo","i","pset","fetchData","showDialog","type","hideDialog","alignSelf","value","field","body","rowData","column","route","PSetDropdown","dataTemplate","option","fontSize","margin","isHidden","selectOne","parameterName","id","optionLabel","selectedParameter","options","parameterOptions","onChange","handleUpdateSelection","filter","itemTemplate","placeholder","disabled","selectedItemTemplate","PSetFilter","context","SearchReqContext","formRef","useRef","paramRef","ready","setReady","current","drugSensOptions","disableDrugSensOptions","disableToolRefOptions","hideDataTypeOptions","genome","dataType","defaultData","initialize","setOptionsOnDatasetSelection","dt","default","setDataTypeOptions","accRNA","accompanyRNA","acc","accDNA","accompanyDNA","concat","forEach","hide","find","setParameterOptions","restoreParameters","visibleOptions","setDrugSensParamOptions","Array","isArray","v","some","drug","checked","isRequest","tooltip","e","request","ds","unavailable","tools","JSON","parse","stringify","shift","setIsRequest","setParameters","search","requestToggleOn","g","onDatasetSelectionSearch","PSetTable","rows","first","start","end","totalRecords","loading","setState","downloadPSet","method","psetID","headers","anchor","document","createElement","setAttribute","display","appendChild","click","removeChild","toolsRefTemplate","output","psets","selection","selectedPSets","onSelectionChange","updatePSetSelection","paginator","scrollable","resizableColumns","columnResizeMode","maxWidth","selectionMode","textAlign","sortable","download","downloadLink","_id","SavePSetButton","saveSelectedPSets","callback","userPSet","psetId","reqData","resData","catch","err","APICalls","onSaveComplete","bind","contextType","isReadyToSubmit","isSelected","hasName","email","test","isValidEmail","reqParam","messageAfterRequest","msgComponent","show","severity","summary","detail","message","sticky","toString","url","parameters","response","PSetSearch","setPSets","searchAll","setSearchAll","setSelectedPSets","disableSaveBtn","setDisableSaveBtn","readyToSubmit","setReadyToSubmit","setName","setEmail","initializeView","Helper","copy","Object","keys","all","params","showMessage","messages","initializeState","submitRequest","versionInfo","constructor","trackPromise","ok","Provider","el","usePromiseTracker","promiseInProgress","color","height","selected","scrollHeight","Dashboard","setData","setLoading","result","onSubmit","dateTimeTemplate","dateTimeStr","Date","toLocaleString","undefined","dateStyle","timeStyle","d","button","Plot","createPlotlyComponent","Plotly","UpsetPlot","bars","layout","autosize","xaxis","showgrid","zeroline","showticklabels","range","yaxis","tickfont","size","t","b","l","r","showlegend","useResizeHandler","config","displayModeBar","points","DatasetChart","upsetData","setUpsetData","barData","setBarData","datasets","metricName","isReady","setIsReady","isPlotReady","setIsPlotReady","getData","updateData","colors","j","setIndices","index","sets","x","fill","y","mode","marker","line","hoverinfo","names","symbol","text","barDatasets","sort","orientation","metric","inputId","findIndex","htmlFor","Stats","chartData","Overview","Search","Request","UserProfile","AvailablePSets","PSetMetadata","StatisticsAPI","Documentation","setDisplay","Tutorial","UserInfo","setShow","password1","setPassword1","password2","setPassword2","btnResetDisabled","setBtnResetDisabled","resetPwd","user","password","setAuthToken","UserPSet","handleBtnClick","dialogVisible","btnDisabled","btnYesDislabed","handleSelectionChange","onClickYes","showMessages","psetData","allData","btnLabel","noPSetData","dialogFooter","heading","footer","modal","Profile","removeFromSavedList","selectedPSet","saved","psetSaved","removePSetByID","cancelPSetRequest","psetInProcess","userEmail","findPSetByID","complete","psetArray","splice","MenuContainer","Admin","setSelected","canonical","updateCanonicalPSets","AuthForm","setPassword","passwordReg1","setPasswordReg1","passwordReg2","setPasswordReg2","userChecked","setUserChecked","userExists","setUserExists","userRegistered","setUserRegistered","btnFindDisabled","setBtnFindDisabled","btnLoginDisabled","setBtnLoginDisabled","btnRegDisabled","setBtnRegDisabled","handleInputChange","onFindClick","exists","registered","onRegisterClick","onResetClick","icon","msg","Reset","setBtnDisabled","token","match","DatasetTabContent","metadata","AccompanyDataTabContent","Math","random","s","getType","RNATabContent","rawSeqDataRNA","DNATabContent","rawSeqDataDNA","PipelineContent","PipelineTabContent","commitID","transform","image","input","cross","git","DownloadPSetButton","marginLeft","StyledTitle","PSet","setPSet","error","setError","apiStr","id1","id2","generalInfo","tabData","td","StyledContainer","StyledTable","table","NonCanonDiv","NonCannonTable","PSetContainer","CanonicalPSets","canonPSets","setCanonPSets","array","nameColumnTemplate","canonicals","nonCanonicals","nonCanonTable","NotFound404","Router","Main","Login","App","ReactGA","pageview","window","Boolean","hostname","ReactDOM","getElementById","navigator","serviceWorker","registration","unregister"],"mappings":"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","file":"static/js/main.261dd1bf.chunk.js","sourcesContent":["import { createContext } from 'react';\n\nexport const AuthContext = createContext();","import React, {useState, useEffect, useContext} from 'react';\nimport { NavLink } from 'react-router-dom';\nimport {Button} from 'primereact/button';\nimport {AuthContext} from '../../context/auth';\nimport './Navigation.css';\nimport { slide as Menu } from 'react-burger-menu';\nimport {withRouter} from 'react-router'\n\nconst Navigation = (props) => {\n\n    const auth = useContext(AuthContext);\n    const [isOnline, setIsOnline] = useState(false);\n    const { location, history } = props\n\n    useEffect(() => {\n        const checkStatus = async () => {\n            const status = await fetch('/api/pachyderm/status');\n            const json = await status.json();\n            setIsOnline(json.isOnline);\n        }\n        checkStatus();\n    }, []);\n\n    const onLoginClick = (event) => {\n        event.preventDefault();\n        history.push({pathname: '/Authentication', state:{path: location.pathname}});\n    }\n\n    const onLogoutClick = (event) => {\n        event.preventDefault();\n        fetch('/api/user/logout/:' + auth.username)\n            .then(res => {\n                auth.resetAuthToken();\n                history.push({pathname: '/Authentication', state:{path: location.pathname, logoutMsg: 'You have logged out'}});\n            });            \n    }\n\n    return(\n        <React.Fragment>\n            <header>\n                <NavLink exact to='/'><img src={process.env.PUBLIC_URL + \"/images/trumpet-orcestra.png\"} alt='' /></NavLink>\n                <div className='navBarContainer'>\n                    <div className='navBar'>\n                        <div><NavLink exact to='/' activeClassName='active-link'>Home</NavLink></div>\n                        <div><NavLink exact to=\"/PSetSearch\" activeClassName='active-link'>Search and Request</NavLink></div>\n                        <div><NavLink exact to=\"/Dashboard\" activeClassName='active-link'>Request Status</NavLink></div>\n                        <div><NavLink exact to=\"/Stats\" activeClassName='active-link'>Statistics</NavLink></div>\n                        <div><NavLink exact to=\"/Documentation\" activeClassName='active-link'>Documentation</NavLink></div>\n                        { auth.authenticated && <div className='menu-item'><NavLink exact to=\"/Profile\" activeClassName='active-link'>Profile</NavLink></div> }\n                        <div>\n                            {\n                                auth.authenticated ? \n                                <Button label='Logout' onClick={onLogoutClick}/> : <Button label='Login/Register' onClick={onLoginClick}/>\n                            }\n                        </div> \n                        <div>\n                            {isOnline ? \n                                <div className='pachydermStatus isOnline'>\n                                    <div className='icon'><i className='pi pi-check'></i></div><div className='text'>Pachyderm is <br />online</div>\n                                </div> \n                                : \n                                <span className='pachydermStatus isOffline'>\n                                    <div className='icon'><i className='pi pi-ban'></i></div><div className='text'>Pachyderm is <br />offline</div>\n                                </span>\n                            }\n                        </div>    \n                    </div>\n                    <div className='burgerNav'>\n                        <Menu width={ 200 } isOpen={true} > \n                            <div className='menu-item'><NavLink exact to='/' activeClassName='active-link'>Home</NavLink></div>\n                            <div className='menu-item'><NavLink exact to=\"/PSetSearch\" activeClassName='active-link'>Search and Request</NavLink></div>\n                            <div><NavLink exact to=\"/Dashboard\" activeClassName='active-link'>Request Status</NavLink></div>\n                            <div><NavLink exact to=\"/Documentation\" activeClassName='active-link'>Documentation</NavLink></div>\n                            { auth.authenticated && <div className='menu-item'><NavLink exact to=\"/Profile\" activeClassName='active-link'>Profile</NavLink></div> }\n                            <div className='menu-item'>\n                                {\n                                    auth.authenticated ? \n                                    <Button label='Logout' onClick={onLogoutClick}/> : <Button label='Login/Register' onClick={onLoginClick}/>\n                                }\n                            </div>\n                            <div>\n                                {isOnline ? \n                                    <div className='pachydermStatus isOnline'>\n                                        <div className='icon'><i className='pi pi-check'></i></div><div className='text'>Pachyderm is <br />online</div>\n                                    </div> \n                                    : \n                                    <span className='pachydermStatus isOffline'>\n                                        <div className='icon'><i className='pi pi-ban'></i></div><div className='text'>Pachyderm is <br />offline</div>\n                                    </span>\n                                }\n                            </div>\n                        </Menu>\n                    </div>   \n                </div>\n                \n                <div className='loggedIn'>{auth.authenticated ? 'Logged in as: ' + auth.username : ''}</div> \n            </header>\n        </React.Fragment>\n    );\n}\n\nexport default withRouter(Navigation);","import React from 'react';\nimport { NavLink } from 'react-router-dom';\nimport './Footer.css';\n\nconst Footer = (props) => {\n    return(\n        <div className='appFooter'>\n            <div className='footerContainer'>\n                <div className=\"footerMenu footerLinks\">\n                    <h3>Menu</h3>\n                    <NavLink exact to=\"/PSetSearch\" >Search and Request</NavLink>\n                    <NavLink exact to=\"/Dashboard\" >Request Status</NavLink>\n                    <NavLink exact to=\"/Stats\" >Statistics</NavLink>\n                </div>\n                <div className=\"footerSupport footerLinks\">\n                    <h3>Support</h3>\n                    <NavLink exact to=\"/Documentation\" >Documentation</NavLink>\n                    <NavLink exact to=\"/Tutorial\" >Contributing your data</NavLink>\n                    <a href=\"https://github.com/bhklab\">GitHub</a>\n                    <a href=\"https://bhklab.ca/\">BHKLab</a>\n                </div>\n                <div className=\"footerContact\">\n                    <h3>BHKLab</h3>\n                    <div className='contactInfo'>\n                        The MaRS center\n                        <br />\n                        101 College St, Toronto ON\n                        {' '}\n                        <br />\n                        TMDT RM 11-310\n                    </div>\n                </div>\n            </div>\n        </ div>\n    );\n} \n\nexport default Footer;","import React, {useContext} from 'react';\nimport { Route, Redirect } from 'react-router-dom';\nimport {AuthContext} from '../../context/auth';\n\nconst PrivateRoute = ({component: Component, ...rest}) => {\n    const auth = useContext(AuthContext)\n    return(\n        <Route {...rest} render={(props) => (\n            auth.authenticated === true\n            ? <Component {...props} />\n            :\n            <Redirect to={{pathname: rest.redirect, state:{path: props.location.pathname}}} />\n        )} />\n    ) \n}\n\nexport default PrivateRoute;","import React, {useContext} from 'react';\nimport { Route, Redirect } from 'react-router-dom';\nimport {AuthContext} from '../../context/auth';\n\nconst AdminRoute = ({component: Component, ...rest}) => {\n    const auth = useContext(AuthContext)\n    console.log(rest)\n    console.log(auth)\n    return(\n        <Route {...rest} render={(props) => (\n            auth.isAdmin === true\n            ? <Component {...props} />\n            :\n            <Redirect to={{pathname: rest.redirect, state:{from: props.location}}} />\n        )} />\n    ) \n}\n\nexport default AdminRoute;","import styled from 'styled-components';\nimport {Accordion} from 'primereact/accordion';\n\nexport const TabContainer = styled.div`\n    width: 100%;\n`\n\nexport const TabHeader = styled.h1`\n    margin-left: 20px;\n`\nexport const TabContent = styled.div`\n    margin-left: 40px;\n    margin-right: 20px;\n`\n\nexport const TabContentSection = styled.div`\n    margin-top: 30px;\n    margin-bottom: 50px;\n    h3 {\n        font-size: 16px;\n    }\n    .subContent {\n        margin-left: 20px;\n        font-size: 14px;\n        max-width: 90%;\n    }\n`\n\nexport const StyledAccordion = styled(Accordion)`\n    width: 100%;\n    margin-top: 10px;\n    margin-bottom: 30px;\n    h4 {\n        margin-left: 20px;\n        font-size: 14px;\n        max-width: 90%;\n    }\n`","import React from 'react';\nimport {Accordion,AccordionTab} from 'primereact/accordion';\nimport {StyledAccordion} from './PSetStyle';\n\nclass PSetToolAccordion extends React.Component {\n\n    render(){\n        const toolAccordionTabs = this.props.items.map((item) => \n            <AccordionTab key={item.name} header={item.name}>\n                {item.commands.length ? \n                    <ul>\n                        {item.commands.map((command) => \n                            <li key={command}>\n                                {command}\n                            </li>    \n                        )}\n                    </ul>\n                    :\n                    \"Not Available\"\n                }\n                   \n            </AccordionTab>\n        );\n        \n        return(\n            this.props.items.length ? \n                <Accordion multiple={true}>\n                    {toolAccordionTabs}\n                </Accordion>\n                :\n                <div className='subContent'>Not Available</div>\n        );\n    }\n\n}\n\nclass RNARefAccordion extends React.Component {\n    \n    render(){\n        const rnaRefAccordionTabs = this.props.items.map((item) => \n            <AccordionTab key={item.name} header={item.name}>\n                <ul>\n                    <li className='listItem-1'>\n                        <div>{item.name.length ? item.name : 'Currently not available'}</div>\n                        <div>{item.source.length ? <a href={item.source}>{item.source}</a> : 'Currently not available'}</div>\n                    </li>                    \n                </ul> \n            </AccordionTab>\n        );\n    \n        return(\n            this.props.items.length ? \n                <Accordion multiple={true}>\n                    {rnaRefAccordionTabs}\n                </Accordion>\n                :\n                <div className='subContent'>Not Available</div>\n        );\n    }\n    \n}\n\nclass DNARefAccordion extends React.Component {\n\n    render(){\n        const exomeRefAccordionTabs = this.props.items.map((item) => \n            <AccordionTab key={item.name} header={item.name}>\n                <ul>\n                    <li className='listItem-1'>\n                        <div>{item.name.length ? item.name: 'Currently not available'}</div>\n                        <div>{item.source.length ? <a href={item.source}>{item.source}</a> : 'Currently not available'}</div>\n                    </li>\n                    <li className='listItem-1'>\n                        <div>{item.cosmic.name}</div>\n                        <div><a href={item.cosmic.source}>{item.cosmic.source}</a> </div>\n                    </li>\n                    <li className='listItem-1'>\n                        <div>{item.exonTarget.name}</div>\n                        <div><a href={item.exonTarget.source}>{item.exonTarget.source}</a></div>\n                    </li>                       \n                </ul> \n            </AccordionTab>\n        );\n    \n        return(\n            this.props.items.length ? \n                <Accordion multiple={true}>\n                    {exomeRefAccordionTabs}\n                </Accordion>\n                :\n                <div className='subContent'>Not Available</div>\n        );\n    }\n\n}\n\nclass GeneralInfoAccordion extends React.Component {\n    render(){   \n        const doi = 'http://doi.org/' + this.props.data.doi\n        return(\n            <StyledAccordion className='generalInfoAccordion'>\n                <AccordionTab header=\"General Information\">\n                    <h4>PSet Name: {this.props.data.name}</h4>\n                    <h4>DOI:  <a href={doi} target=\"_blank\">{this.props.data.doi}</a></h4>\n                    <h4>Date Created: {this.props.data.dateCreated.split('T')[0]}</h4>\n                    {this.props.data.createdBy && <h4>Created By {this.props.data.createdBy}</h4>}\n                </AccordionTab>    \n            </StyledAccordion>    \n        );\n    }\n}\n\nexport {\n    PSetToolAccordion,\n    RNARefAccordion,\n    DNARefAccordion,\n    GeneralInfoAccordion\n}\n","import React from 'react';\nimport {Dialog} from 'primereact/dialog';\nimport {TabView,TabPanel} from 'primereact/tabview';\nimport {PSetToolAccordion, RNARefAccordion, DNARefAccordion} from '../PSet/PSetAccordion';\nimport {Accordion,AccordionTab} from 'primereact/accordion';\n\nconst DatasetDialog = (props) => {\n    \n    const datasetAccordionTabs = props.dataset.map((item) => \n        <TabPanel key={item.label} header={item.label}>\n            <div className='mainTabContent'>\n                <Accordion multiple={true}>\n                    {item.versions.map((version) => \n                        <AccordionTab key={version.version} header={version.version}>\n                            <div className='tabContentSection'>\n                                <h3>Drug Sensitivity</h3>\n                                <h4 className='subContent'>Version: {version.drugSensitivity.version}</h4>\n                                <h4 className='subContent'>Source: {version.drugSensitivity.source ? <a href={version.drugSensitivity.source}>{version.drugSensitivity.source}</a> : 'Not available'}</h4>\n                            </div>\n                            <div className='tabContentSection'>\n                                <h3>Publication: </h3>\n                                <ul>\n                                    <div>    \n                                        {version.publication.length ? \n                                            version.publication.map((p) => \n                                                <li key={p.link} className='pubList'>\n                                                    <div className='subContent'>{p.citation}</div>\n                                                    <br />\n                                                    <div className='subContent'><a href={p.link}>{p.link}</a></div>\n                                                </li>\n                                            )\n                                            :\n                                            <div className=\"subContent\">\n                                                Not available.\n                                            </div>\n                                        }  \n                                    </div>\n                                </ul> \n                            </div>\n                        </AccordionTab>\n                    )}     \n                </Accordion>\n            </div> \n        </TabPanel>\n    );\n    \n    return(\n        <Dialog header=\"Dataset Overview\" visible={props.visible} onHide={props.onHide} style={{minWidth: '50vw', minHeight: '30vh'}} >\n            <TabView>\n                {datasetAccordionTabs}\n            </TabView>\n        </Dialog>\n    )\n}\n\nconst RNADialog = (props) => {\n    return(\n        <Dialog header=\"RNA Pipeline Overview\" visible={props.visible} onHide={props.onHide} style={{minWidth: '50vw', minHeight: '30vh'}} >\n            <TabView renderActiveOnly={false}>\n                <TabPanel key='rnaTools' header=\"RNA Tools\">\n                    <h3>Available RNA Pipeline Tools</h3>\n                    <PSetToolAccordion items={props.rna.tool} />\n                </TabPanel>\n                <TabPanel key='rnaRef' header=\"RNA References\">\n                    <h3>Available RNA Transcriptome References</h3>\n                    <RNARefAccordion items={props.rna.ref} />\n                </TabPanel>\n            </TabView>\n        </Dialog>\n    )\n}\n\nconst DNADialog = (props) => {\n    return(\n        <Dialog header=\"DNA Sequence Alignment Overview\" visible={props.visible} onHide={props.onHide} style={{minWidth: '50vw', minHeight: '30vh'}} >\n            <TabView renderActiveOnly={false}>\n                <TabPanel key='dnaTools' header=\"DNA Tools\">\n                    <h3>Available DNA Pipeline Tools</h3>\n                    <PSetToolAccordion items={props.dna.tool} />\n                </TabPanel>\n                <TabPanel key='dnaRef' header=\"DNA References\">\n                    <h3>Available DNA Exome References</h3>\n                    <DNARefAccordion items={props.dna.ref} />\n                </TabPanel>\n            </TabView>\n        </Dialog>\n    )\n}\n\nexport {\n    DatasetDialog,\n    RNADialog,\n    DNADialog\n}","import React, {useState, useEffect} from 'react';\nimport {DataTable} from 'primereact/datatable';\nimport {Column} from 'primereact/column';\nimport { Link } from 'react-router-dom';\nimport {DatasetDialog, RNADialog, DNADialog} from '../MainDialog/MainDialog';\nimport './Main.css';\n\nconst OrcestraMain = (props) => {\n    \n    const [statsData, setStatsData] = useState([]);\n    const [formData, setFormData] = useState({\n        dataset: [],\n        rnaTool: [],\n        dnaTool: [],\n        rnaRef: [],\n        dnaRef: []\n    });\n    const [dashboard, setDashboard] = useState({\n        pending: 0,\n        inProcess: 0\n    });\n    const [datasetVisible, setDatasetVisible] = useState(false);\n    const [rnaVisible, setRNAVisible] = useState(false);\n    const [dnaVisible, setDNAVisible] = useState(false);\n\n    useEffect(() => {\n        const fetchData = async (api) => {\n            const res = await fetch(api);\n            const json = await res.json();\n            const dataset = json.form.dataset \n            let versionCombo = 0\n            for(let i = 0; i < dataset.length; i++){\n                versionCombo += dataset[i].versions.length\n            }\n            setStatsData(json.pset);\n            setFormData({...json.form, versionCombo: versionCombo});\n            setDashboard(json.dashboard);\n        }\n        fetchData('/api/landing/data');\n    }, [])\n\n    const nameColumnTemplate = (rowData, column) => {\n        let route = '/' + rowData.doi;\n        return(\n            <Link to={route} >{rowData.name}</Link>\n        );\n    }\n\n    const showDialog = (type) => {\n        switch(type){\n            case 'dataset':\n                setDatasetVisible(true);\n                break;\n            case 'rna':\n                setRNAVisible(true);\n                break;\n            case 'dna':\n                setDNAVisible(true);\n                break;\n            default:\n                break;\n        }\n    }\n\n    const hideDialog = (type) => {\n        switch(type){\n            case 'dataset':\n                setDatasetVisible(false);\n                break;\n            case 'rna':\n                setRNAVisible(false);\n                break;\n            case 'dna':\n                setDNAVisible(false);\n                break;\n            default:\n                break;\n        }\n    }\n\n    return (\n        <React.Fragment>\n            <div className='mainContent'>\n                <div className=\"home\">\n                    <h1>ORCESTRA</h1>   \n                    <h2>Orchestration platform for reproducing pharmacogenomic analyses</h2>\n                    <div className='mainMenuContainer'>\n                        <div className='mainMenuRow'>\n                            <div className='mainMenuColumn'>\n                                <div className='mainMenuItem'>\n                                    <h3>Search and Request PSets</h3>\n                                    <div className='mainMenuItemContent'>\n                                        <div>Design your own PSet using:</div>\n                                        <div className='mainMenuItemLine'>\n                                            <div className='largeNum'><button onClick={() => {showDialog('dataset')}}>{formData.versionCombo}</button></div> <div>Dataset/Drug sensitivity combinations</div>\n                                        </div>\n                                        <div className='mainMenuItemLine'><span className='largeNum'>\n                                            <button onClick={() => {showDialog('rna')}}>{formData.rnaTool.length}</button></span> <span>RNA pipelines.</span>\n                                        </div>\n                                        <div className='mainMenuItemLine'><span className='largeNum'>\n                                            <button onClick={() => {showDialog('dna')}}>{formData.dnaTool.length}</button></span> <span>DNA tools.</span>\n                                        </div>\n                                        <div className='mainMenuLink'>\n                                            <a className='button' href=\"/PSetSearch\">Search and Request</a>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                            <div className='mainMenuColumn'>\n                                <div className='mainMenuItem' style={{ alignSelf: 'flex-start'}}>\n                                    <h3>Canonical PSets</h3>\n                                    <div className='mainMenuItemContent'>\n                                        <div>The latest version of PSets created by BHK Lab.</div>\n                                        <div className='mainMenuLink'><a className='button' href=\"/Canonical\">View Canonical PSets</a></div>\n                                    </div>\n                                </div>\n                                <div className='mainMenuItem' style={{ alignSelf: 'flex-start'}}>\n                                    <h3>View PSet Request Status</h3>\n                                    <div className='mainMenuItemContent'>\n                                        <div>ORCESTRA is processing following requests:</div>\n                                        <div className='mainMenuItemLine'><span className='largeNum'>{dashboard.pending}</span> <span>Requests in queue.</span></div>\n                                        <div className='mainMenuItemLine'><span className='largeNum'>{dashboard.inProcess}</span> <span >Requests in process.</span></div>\n                                        <div className='mainMenuLink'><a className='button' href=\"/Dashboard\">View Dashboard</a></div>\n                                    </div>\n                                </div>\n                            </div> \n                            <div className='mainMenuColumn'>\n                                <div className='mainMenuItem'>\n                                    <h3>Top 5 Popular PSets</h3>\n                                    <div className='mainMenuItemContent'>\n                                        <DataTable value={statsData} >\n                                            <Column className='textField' field='download' header='Download' />\n                                            <Column className='textField' field='name' header='Name' body={nameColumnTemplate}/>\n                                        </DataTable>\n                                        <div className='mainMenuLink'><a className='button' href=\"/Stats\">View Statistics</a></div>\n                                    </div>\n                                </div> \n                                <div className='mainMenuItem'>\n                                    <h3>Generate PSets with Your Data</h3>\n                                    <div className='mainMenuItemContent'>\n                                        <p>\n                                            <b>You can generate PSets using your own datasets.</b> <br /> \n                                            For more information, please read about <a href='/Tutorial'>contributing your data</a>.\n                                        </p>    \n                                    </div>\n                                </div> \n                            </div>    \n                        </div>  \n                    </div>  \n                </div>\n            </div>\n            <DatasetDialog visible={datasetVisible} onHide={() => {hideDialog('dataset')}} dataset={formData.dataset} />\n            <RNADialog visible={rnaVisible} onHide={() => {hideDialog('rna')}} rna={{tool: formData.rnaTool, ref: formData.rnaRef}} />\n            <DNADialog visible={dnaVisible} onHide={() => {hideDialog('dna')}} dna={{tool: formData.dnaTool, ref: formData.dnaRef}} />\n        </React.Fragment>\n    );\n    \n}\n\nexport default OrcestraMain;","import React from 'react';\nimport './PSetDropdown.css';\nimport {MultiSelect} from 'primereact/multiselect';\nimport {Dropdown} from 'primereact/dropdown';\n\n// props: id, className, isHidden, selectOne, parameterName, parameterOptions[], selecedParameter[], handleUpdateSelection()\n\nclass PSetDropdown extends React.Component {\n    \n    render(){\n        const dataTemplate =  (option) => {\n            return(\n                <div className=\"\">\n                    <span style={{fontSize:'1em',margin:'1em .5em 0 0'}}>{option.label}</span>\n                </div>\n            );\n        }\n\n        const selectedDataTemplate = (item) => {\n            if (item) {\n                return (\n                    <div className=\"my-multiselected-item-token\">\n                        <span>{item.label}</span>\n                    </div>\n                );\n            }\n            else {\n                return <span>Select...</span>\n            }\n        }\n            \n        if(this.props.isHidden){\n            return(null);\n        }\n        if(this.props.selectOne){\n            return(\n                <div className='filterSet'>\n                    <label>{this.props.parameterName}</label>\n                    <Dropdown \n                        id={this.props.id} \n                        className='paramInput' \n                        optionLabel='label' \n                        value={this.props.selectedParameter}   \n                        options={this.props.parameterOptions} \n                        onChange={this.props.handleUpdateSelection}\n                        filter={true} \n                        itemTemplate={dataTemplate}\n                        placeholder=\"Select one...\"\n                        disabled={this.props.disabled}\n                    />\n                </div>\n            );\n        }\n        return(\n            <div className='filterSet'>\n                <label>{this.props.parameterName}</label>\n                <MultiSelect \n                    id={this.props.id}\n                    className='paramInput' \n                    optionLabel='label' \n                    value={this.props.selectedParameter} \n                    options={this.props.parameterOptions} \n                    onChange={this.props.handleUpdateSelection}\n                    filter={true} \n                    itemTemplate={dataTemplate} \n                    selectedItemTemplate={selectedDataTemplate}\n                    disabled={this.props.disabled}\n                />\n            </div>\n        );\n    }\n    \n}\n\nexport default PSetDropdown;","import React, {useState, useEffect, useContext, useRef} from 'react';\nimport {InputSwitch} from 'primereact/inputswitch';\nimport PSetDropdown from '../../Shared/PSetDropdown/PSetDropdown';\nimport {SearchReqContext} from '../PSetSearch';\nimport './PSetFilter.css';\n\nconst PSetFilter = () => {\n    \n    const context = useContext(SearchReqContext);\n    const formRef = useRef();\n    const paramRef = useRef();\n\n    const [ready, setReady] = useState(false);\n    \n    useEffect(() => {\n        const initialize = async () => {\n            const res = await fetch('/api/formData');\n            const json = await res.json();\n            console.log(json)\n            formRef.current = json;\n            formRef.current.drugSensOptions = [];\n            formRef.current.disableDrugSensOptions = true;\n            formRef.current.disableToolRefOptions = false;\n            formRef.current.hideDataTypeOptions = false;\n            paramRef.current = { dataset: [], drugSensitivity: [], genome: [], dataType: [], rnaTool: [], rnaRef: [], defaultData: [] }\n            setReady(true)\n        }\n        initialize();\n    }, []);\n\n\n    //function to show rnaRef options that belong to a selected genome(s), and hide others.\n    const onGenomeSelection = (genome) => {\n        console.log(genome)\n        // if genomes are not selected, show all rnaRef options\n        if(genome.length === 0){\n            formRef.current.rnaRef.forEach(ref => {ref.hide = false})\n        // if one or more genome is selected, show rnaRef options that belong to the selected genome(s)\n        }else{\n            if(Array.isArray(genome)){\n                formRef.current.rnaRef.forEach(ref => {\n                    ref.hide = (genome.find(g => {return ref.genome === g.name})) ? false : true;\n                })\n            }else{\n                formRef.current.rnaRef.forEach(ref => {\n                    ref.hide = (ref.genome === genome.name) ? false : true;\n                })\n            }\n        }\n    }\n\n    const onDatasetSelectionRequest = (dataset) => {\n        console.log('onDatasetSelectionRequest')\n        formRef.current.drugSensOptions = [];\n        //disable the drug sensitivity options if no dataset is selected.\n        if(typeof dataset === 'undefined'){\n            formRef.current.disableDrugSensOptions = true;\n        }else{\n            // set drug sensitivity and optional data type options\n            setDrugSensParamOptions(dataset);\n            formRef.current.disableDrugSensOptions = false;\n        }\n        setOptionsOnDatasetSelection(dataset);\n    }\n\n    //show drug sensitivity options available for selected dataset(s)\n    const onDatasetSelectionSearch = (dataset) => {\n        // empty current options\n        formRef.current.drugSensOptions = [];\n        // enable the drug sensitivity options only if at least one dataset is selected.\n        if(dataset.length){\n            formRef.current.disableDrugSensOptions = false;\n        }else{\n            formRef.current.disableDrugSensOptions = true;\n        }\n        // set drug sensitivity options\n        dataset.forEach(ds => {\n            setDrugSensParamOptions(ds);\n        })\n    }\n\n    const setOptionsOnDatasetSelection = (dataset) => {\n        // handle form options depending on a selected dataset\n        switch(dataset.name){\n            case 'CCLE':\n                paramRef.current.defaultData = formRef.current.dataType.filter(dt => {return dt.default});\n                paramRef.current.dataType = [];\n                setDataTypeOptions(dataset);\n                formRef.current.disableToolRefOptions = false;\n                formRef.current.hideDataTypeOptions = false;\n                break;\n            case 'CTRPv2':\n                paramRef.current.defaultData = [];\n                paramRef.current.dataType = [];\n                paramRef.current.rnaTool = [];\n                paramRef.current.rnaRef = [];\n                formRef.current.disableToolRefOptions = true;\n                formRef.current.hideDataTypeOptions = true;\n                break;\n            case 'FIMM':\n                paramRef.current.defaultData = [];\n                paramRef.current.dataType = [];    \n                paramRef.current.rnaTool = [];\n                paramRef.current.rnaRef = [];\n                formRef.current.disableToolRefOptions = true;\n                formRef.current.hideDataTypeOptions = true;\n                break;\n            case 'gCSI':\n                paramRef.current.defaultData = formRef.current.dataType.filter(dt => {return dt.default});\n                paramRef.current.dataType = []; \n                setDataTypeOptions(dataset);   \n                formRef.current.disableToolRefOptions = false;\n                formRef.current.hideDataTypeOptions = false;\n                break;\n            case 'GDSC':\n                paramRef.current.defaultData = formRef.current.dataType.filter(dt => {return dt.default});\n                paramRef.current.dataType = []; \n                setDataTypeOptions(dataset);   \n                formRef.current.disableToolRefOptions = false;\n                formRef.current.hideDataTypeOptions = false;\n                break;\n            default:\n                paramRef.current.defaultData = formRef.current.dataType.filter(dt => {return dt.default});\n                paramRef.current.dataType = [];     \n                formRef.current.disableToolRefOptions = false;\n                formRef.current.hideDataTypeOptions = true;\n                break;\n        }\n    }\n\n    const setDataTypeOptions = (dataset) => {\n        const accRNA = formRef.current.accompanyRNA.filter(acc => {return acc.dataset === dataset.name});\n        const accDNA = formRef.current.accompanyDNA.filter(acc => {return acc.dataset === dataset.name});\n        const options = accRNA.concat(accDNA);\n        formRef.current.dataType.forEach(dt => {\n            dt.hide = (options.find(option => {return option.name === dt.name})) ? false : true;\n        })   \n    }\n\n    const requestToggleOn = (request) => {\n        formRef.current.dataset.forEach(ds => {ds.hide = ds.unavailable ? true : false})\n        formRef.current.dataType.forEach(dt => {dt.hide = (dt.name === 'rnaseq') ? true : false})\n        paramRef.current.dataType = []\n        if(paramRef.current.dataset.length){\n            setParameterOptions('dataset');\n            paramRef.current.dataset = paramRef.current.dataset[0];\n            paramRef.current.drugSensitivity = [];\n            setOptionsOnDatasetSelection(paramRef.current.dataset)\n            // set drug sensitivity options\n            formRef.current.drugSensOptions = [];\n            setDrugSensParamOptions(paramRef.current.dataset);\n        }\n        if(paramRef.current.genome.length){\n            setParameterOptions('genome');\n            paramRef.current.genome = paramRef.current.genome[0];\n        }\n        if(paramRef.current.rnaTool.length){\n            setParameterOptions('rnaTool');\n            // limit selection of RNA tools to two\n            let tools = JSON.parse(JSON.stringify(paramRef.current.rnaTool));\n            while(tools.length > 2){\n                tools.shift()\n            }\n            paramRef.current.rnaTool = tools;\n        }\n        if(paramRef.current.rnaRef.length){\n            setParameterOptions('rnaRef');\n            paramRef.current.rnaRef = paramRef.current.rnaRef[0];\n        }\n        context.setIsRequest(request);\n        context.setParameters({...paramRef.current, search: true});\n    }\n\n    const requestToggleOff = (request) => {   \n        formRef.current.dataset.forEach(ds => {ds.hide = false});\n        restoreParameters('dataset');\n        paramRef.current.drugSensitivity = [];\n        paramRef.current.dataType = [];\n        restoreParameters('genome');\n        restoreParameters('rnaRef');\n        formRef.current.hideDataTypeOptions = false;\n        formRef.current.dataType.forEach(dt => {dt.hide = false});\n        formRef.current.dataset.forEach(ds => {ds.hide = false});\n        formRef.current.genome.forEach(g => {g.hide = false});\n        formRef.current.rnaRef.forEach(ref => {ref.hide = false});\n        context.setIsRequest(request);\n        context.setParameters({...paramRef.current, search: true});\n    }\n\n    const setParameterOptions = (name) => {\n        formRef.current[name].forEach(ref => {\n            ref.hide = paramRef.current[name].find(p => {return ref.name === p.name}) ? false : true\n        })\n    }\n\n    const restoreParameters = (name) => {\n        const visibleOptions = formRef.current[name].filter(option => {return !option.hide});\n        if(visibleOptions.length < formRef.current[name].length){\n            paramRef.current[name] = visibleOptions;\n            if(name === 'dataset'){\n                // restore drug sensitivity options\n                formRef.current.drugSensOptions = [];\n                visibleOptions.forEach(option => {\n                    setDrugSensParamOptions(option)\n                })\n            }\n        }else if(!Array.isArray(paramRef.current[name])){\n            paramRef.current[name] = [paramRef.current[name]];\n            if(name === 'dataset'){\n                // restore drug sensitivity options\n                formRef.current.drugSensOptions = [];\n                setDrugSensParamOptions(paramRef.current[name])\n            }\n        }\n    }\n\n    const setDrugSensParamOptions = (dataset) => {\n        dataset.versions.forEach(v => {\n            if(!formRef.current.drugSensOptions.some(drug => drug.label === v.label)){\n                formRef.current.drugSensOptions.push(v);\n            }\n        })\n    }\n    \n    return(\n        <React.Fragment>\n        {\n            ready&&\n            <div className='pSetFilterContainer'>\n                <div className='pSetFilter'>\n                    <h2>PSet Parameters</h2>\n                    <div className='filterSet'>\n                        <label className='bold'>Request PSet: </label> \n                        <InputSwitch checked={context.isRequest} tooltip=\"Turn this on to request a PSet.\" \n                            onChange={(e) => {\n                                if(e.value){ \n                                    requestToggleOn(e.value); \n                                }else{ \n                                    requestToggleOff(e.value); \n                                }\n                            }} \n                        />\n                    </div>\n\n                    <PSetDropdown id='dataset' isHidden={false} parameterName='Dataset:' selectOne={context.isRequest}  \n                        parameterOptions={formRef.current.dataset.filter(ds => {return(!ds.hide)})} selectedParameter={paramRef.current.dataset} \n                        handleUpdateSelection={(e) => {\n                            if(context.isRequest){\n                                onDatasetSelectionRequest(e.value)\n                            }else{\n                                onDatasetSelectionSearch(e.value)\n                            }\n                            paramRef.current.dataset = e.value;\n                            context.setParameters({...paramRef.current, dataset: e.value, search: true});\n                        }} />\n                    \n                    <PSetDropdown id='drugSensitivity' isHidden={false} parameterName='Drug Sensitivity:' selectOne={context.isRequest} \n                        disabled={formRef.current.disableDrugSensOptions}\n                        parameterOptions={formRef.current.drugSensOptions} selectedParameter={paramRef.current.drugSensitivity} \n                        handleUpdateSelection={(e) => {\n                            paramRef.current.drugSensitivity = e.value;\n                            context.setParameters({...paramRef.current, drugSensitivity: e.value, search: true});\n                        }} />\n                    \n                    <PSetDropdown id='genome' isHidden={false} parameterName='Genome:' selectOne={context.isRequest} \n                        parameterOptions={formRef.current.genome.filter(g => {return(!g.hide)})} selectedParameter={paramRef.current.genome} \n                        handleUpdateSelection={(e) => {\n                            onGenomeSelection(e.value)\n                            paramRef.current.genome = e.value;\n                            context.setParameters({...paramRef.current, genome: e.value, search: true});\n                        }} />\n\n                    <PSetDropdown id='rnaTool' disabled={formRef.current.disableToolRefOptions} parameterName='RNA Tool:' \n                        parameterOptions={formRef.current.rnaTool} selectedParameter={paramRef.current.rnaTool} \n                        handleUpdateSelection={(e) => {\n                            if(context.isRequest && e.value.length > 2){\n                                while(e.value.length > 2){ e.value.shift() }\n                            }\n                            paramRef.current.rnaTool = e.value;\n                            context.setParameters({...paramRef.current, rnaTool: e.value, search: true});\n                        }} />\n\n                    <PSetDropdown id='rnaRef' disabled={formRef.current.disableToolRefOptions} parameterName='RNA Ref:' selectOne={context.isRequest} \n                        parameterOptions={formRef.current.rnaRef.filter(ref => {return(!ref.hide)})} selectedParameter={paramRef.current.rnaRef} \n                        handleUpdateSelection={(e) => {\n                            paramRef.current.rnaRef = e.value;\n                            context.setParameters({...paramRef.current, rnaRef: e.value, search: true});\n                        }} />\n                    \n                    {\n                        (context.isRequest && !formRef.current.disableToolRefOptions) && <span style={{fontSize: '12px'}}>* RNA sequencing data is included by default</span>\n                    }\n                    <PSetDropdown id='dataType' isHidden={formRef.current.hideDataTypeOptions} parameterName={context.isRequest ? 'Data Type (Optional):' : 'Data Type:'}\n                        parameterOptions={formRef.current.dataType.filter(dt => {return(!dt.hide)})} selectedParameter={paramRef.current.dataType} \n                        handleUpdateSelection={(e) => {\n                            paramRef.current.dataType = e.value;\n                            context.setParameters({...paramRef.current, dataType: e.value, search: true});\n                        }} />\n                    \n                </div>\n            </div>\n        }   \n        </React.Fragment>\n    );\n}\n\nexport default PSetFilter;","import React, {useState, useEffect} from 'react';\nimport {DataTable} from 'primereact/datatable';\nimport {Column} from 'primereact/column';\nimport { Link } from 'react-router-dom';\n\nconst PSetTable = (props) => {\n    \n    const [state, setState] = useState({\n        rows: 10,\n        first: 0,\n        start: 0,\n        end: 10,\n        totalRecords: 0,\n        loading: true\n    })\n\n    useEffect(()=>{\n        setState({...state, loading: false})\n    }, []);\n\n    const downloadPSet = (id, link) => async (event) => {\n        event.preventDefault();\n        console.log('downloadOnePSet');\n        await fetch('/api/pset/download', {\n            method: 'POST',\n            body: JSON.stringify({psetID: id}),\n            headers: {'Content-type': 'application/json'}\n        })\n        const anchor = document.createElement('a');\n        anchor.setAttribute('download', null);\n        anchor.style.display = 'none';\n        anchor.setAttribute('href', link);\n        document.body.appendChild(anchor);\n        anchor.click();\n        document.body.removeChild(anchor);\n    }\n\n    const toolsRefTemplate = (rowData, column) => {\n        let output ='';\n        if(rowData[column.field]){\n            output = rowData[column.field].map(item => <div key={item.name}>{item.label}</div>);\n        }\n        return(\n            <div>{output}</div>\n        );\n    }\n\n    const dataTypeTemplate = (rowData, column) => {\n        let output ='';\n        if(rowData[column.field]){\n            output = rowData[column.field].map(item => <div key={item.name}>{item.name} ({item.type})</div>);\n        }\n        return(\n            <div>{output}</div>\n        );\n    }\n\n    const nameColumnTemplate = (rowData, column) => {\n        let route = '/' + rowData.doi;\n        return(\n            <Link to={route} target=\"_blank\">{rowData.name}</Link>\n        );\n    }\n\n    const downloadTemplate = (rowData, column) => {\n        let link = 'Not Available';\n        if(rowData.downloadLink){\n            link = <a id={rowData._id} href='#' onClick={downloadPSet(rowData._id, rowData.downloadLink)}>Download</a>\n        }\n        return(\n            link\n        )\n    }\n\n    const canonicalTemplate = (rowData, column) => {\n        let output = ''\n        if(rowData[column.field]){\n            output = 'Yes'\n        }\n        return(\n            <div>{output}</div>\n        );\n    }\n\n    const updatePSetSelectionEvent = event => {\n        props.updatePSetSelection(event.value);\n    }\n\n    return(\n        <DataTable \n            value={props.psets} \n            selection={props.selectedPSets} onSelectionChange={updatePSetSelectionEvent} \n            paginator={true} rows={state.rows} \n            scrollable={true} resizableColumns={true} columnResizeMode=\"fit\" style={{maxWidth: '900px'}}\n        >\n            {props.authenticated && <Column selectionMode=\"multiple\" style={{width: '2em', textAlign: 'center'}} />}\n            <Column className='textField' field='name' header='Name' style={{width:'6em'}} body={nameColumnTemplate} sortable={true} />\n            <Column className='textField' field='dataset.name' header='Dataset' style={{width:'4em'}} sortable={true} />\n            <Column className='textField' field='dataset.versionInfo' header='Drug Sensitivity' style={{width:'6em'}} sortable={true} />\n            <Column field='rnaTool' body={toolsRefTemplate} style={{width:'5em'}} header='RNA Tool' sortable={true}  />\n            <Column field='rnaRef' body={toolsRefTemplate} style={{width:'5em'}} header='RNA Ref' sortable={true} />\n            <Column field='dataType' body={dataTypeTemplate} style={{width:'5em'}} header='Molecular Data' />\n            <Column field='canonical' body={canonicalTemplate} style={{width:'3.5em', textAlign: 'center'}} header='Canonical' />\n            {props.download && <Column field='downloadLink' body={downloadTemplate} style={{width:'3.5em', textAlign: 'center'}} header='Download' /> }\n        </DataTable>\n    );\n\n}\n\nexport default PSetTable;","import React from 'react';\nimport {Button} from 'primereact/button';\nimport {AuthContext} from '../../../context/auth';\nimport * as APICalls from '../APICalls';\n\nclass SavePSetButton extends React.Component{\n    constructor(){\n        super();\n        this.saveSelectedPSets = this.saveSelectedPSets.bind(this);\n    }\n\n    static contextType = AuthContext;\n\n    saveSelectedPSets = event => {\n        event.preventDefault();\n        if(this.context.authenticated){\n            APICalls.saveOrUpdateUserPSets(this.context.username, this.props.selectedPSets, (status, data) => {this.props.onSaveComplete(status, data)});\n        }\n    }\n\n    render(){\n        return(\n            this.context.authenticated ? <Button label='Save' onClick={this.saveSelectedPSets} disabled={this.props.disabled}/> : '*Login or register to save existing PSets to your profile.'\n        );\n    }\n}\n\nexport default SavePSetButton;\n","\nexport function queryPSet(api, callback){\n    //console.log(api);\n    fetch(api)  \n        .then(res => res.json())\n        .then(resData => {\n            callback(resData);\n        }   \n    );\n}\n\nexport function saveOrUpdateUserPSets(username, selectedPSets, callback){\n    if(selectedPSets.length){\n        var userPSet = { username: username };\n        var psetId = [];\n        for(let i = 0; i < selectedPSets.length; i++){\n            psetId.push(selectedPSets[i]._id);\n        }\n        userPSet.psetId = psetId;\n\n        fetch('/api/user/pset/add', {\n            method: 'POST',\n            body: JSON.stringify({reqData: userPSet}),\n            headers: {\n                'Content-type': 'application/json'\n            }\n        })\n            .then(res => res.json())\n            .then(resData => callback(1, resData))\n            .catch(err => callback(0, err));\n\n    }\n}\n\nexport function requestPSet(data, callback){\n    console.log(data);\n    fetch('/api/pset/request', {\n        method: 'POST',\n        body: JSON.stringify({\n            reqData: data\n        }),\n        headers: {\n            'Content-type': 'application/json'\n        }\n    })\n        .then(res => res.json())\n        .then(resData => callback(1, resData))\n        .catch(err => callback(0, err));\n}\n\nexport function downloadPSet(psetID){\n    console.log('downloadOnePSet: ' + psetID);\n    fetch('/api/pset/download', {\n        method: 'POST',\n        body: JSON.stringify({\n            psetID: psetID\n        }),\n        headers: {\n            'Content-type': 'application/json'\n        }\n    })\n        .then(res => res.json())\n        .catch(err => console.log(err));\n}","// Helper functions used for PSet API requests.\n\nexport function isNoneSelected(filterset){\n    if(!filterset.datatype.length && \n        !filterset.datasetName.length && \n        !filterset.genome.length && \n        !filterset.rnaTool.length &&\n        !filterset.dnaTool.length &&\n        !filterset.rnaRef.length &&\n        !filterset.dnaRef.length &&\n        !filterset.drugSensitivity.length){\n        return(true);\n    }\n    return(false);\n}\n\nexport function isReadyToSubmit(request){\n    //if(!isSelected(request.dataType)){return(false)}\n\n    if(!isSelected(request.genome)){return(false)}\n\n    if(!hasName(request.name)){return(false)}\n\n    if(!isValidEmail(request.email)){return(false)}\n    \n    if(!isSelected(request.dataset)){\n        return(false)\n    }else if(request.dataset.name === 'CTRPv2' || request.dataset.name === 'FIMM'){\n        return(true)\n    }\n    \n    //if(!isSelected(request.rnaRef)){return(false)}\n\n    //if(!isSelected(request.rnaTool)){return(false)}\n\n    if(!isSelected(request.drugSensitivity)){\n        return(false);\n    }\n\n    return(true);\n}\n\nexport function isSelected(reqParam){\n    if(typeof reqParam === 'undefined' || reqParam === null){\n        return(false);\n    }\n    if(Array.isArray(reqParam) && !reqParam.length){\n        return(false);\n    }\n    return(true);\n}\n\nexport function messageAfterRequest(status, data, initialize=null, msgComponent){\n    if(initialize){\n        initialize();\n    }\n    if(status){\n        msgComponent.show({severity: 'success', summary: data.summary, detail: data.message, sticky: true});\n    }else{\n        msgComponent.show({severity: 'error', summary: 'An error occured', detail: data.toString(), sticky: true});\n    } \n}\n\nfunction hasName(name){\n    if(typeof name === 'undefined' || name === null){\n        return(false);\n    }\n    if(name.length === 0){\n        return(false);\n    }\n    return(true);\n}\n\nfunction isValidEmail(email){\n    const regex = /^\\w+([.-]?\\w+)*@\\w+([.-]?\\w+)*(\\.\\w{2,3})+$/;\n    if(typeof email === 'undefined' || email === null){\n        return(false);\n    }\n    if(email.length === 0){\n        return(false);\n    }\n    if(!regex.test(email)){\n        return(false);\n    }\n    return(true);\n}\n","import React, {useState, useEffect, useContext} from 'react';\nimport './PSetSearch.css';\nimport PSetFilter from './subcomponents/PSetFilter';\nimport PSetTable from '../Shared/PSetTable';\nimport SavePSetButton from '../Shared/Buttons/SavePSetButton';\nimport {usePromiseTracker} from \"react-promise-tracker\";\nimport {trackPromise} from 'react-promise-tracker';\nimport Loader from 'react-loader-spinner';\nimport {Button} from 'primereact/button';\nimport {InputText} from 'primereact/inputtext';\nimport {Messages} from 'primereact/messages';\nimport * as Helper from '../Shared/Helper';\nimport {AuthContext} from '../../context/auth';\n\nexport const SearchReqContext = React.createContext();\n\nasync function fetchData(url, parameters) {\n    const response = await fetch(url, {\n        method: 'POST',\n        body: JSON.stringify({parameters: {...parameters, status: 'complete'}}),\n        headers: {'Content-type': 'application/json'}\n    });\n    const json = await response.json();\n    return(json);\n}\n\nconst PSetSearch = () => {\n    \n    const auth = useContext(AuthContext);\n    \n    const [psets, setPSets] = useState([]);\n    const [searchAll, setSearchAll] = useState(true);\n    const [selectedPSets, setSelectedPSets] = useState([]);\n    const [disableSaveBtn, setDisableSaveBtn] = useState(true);\n    const [isRequest, setIsRequest] = useState(false);\n    const [readyToSubmit, setReadyToSubmit] = useState(true);\n    \n    const [parameters, setParameters] = useState({\n        dataset: [],\n        drugSensitivity: [],\n        genome: [],\n        dataType: [],\n        rnaTool: [],\n        rnaRef: [],\n        search: false\n    });\n    \n    const [name, setName] = useState('');\n    const [email, setEmail] = useState('');\n\n    const [ready, setReady] = useState(false)\n\n    useEffect(() => {\n        const initializeView = async () => {\n            const psets = await fetchData('/api/pset/search');\n            setPSets(psets);\n            setSearchAll(true);\n            setReady(true);\n        }\n        initializeView();\n    }, []);\n\n    useEffect(() => {\n        setDisableSaveBtn(Helper.isSelected(selectedPSets) ? false : true)\n    }, [selectedPSets]);\n\n    useEffect(() => {   \n        async function search() {\n            console.log('search');\n            console.log(parameters);\n            let copy = JSON.parse(JSON.stringify(parameters));\n            Object.keys(copy).forEach(key => {\n                if(!Array.isArray(copy[key])){\n                    copy[key] = [copy[key]];\n                }\n            });\n            const psets = await fetchData('/api/pset/search', copy);\n            let all = true;\n            Object.keys(parameters).forEach(key => {\n                if(Array.isArray(parameters[key]) && parameters[key].length){\n                    all = false;\n                }\n            });\n            setPSets(psets);\n            setSearchAll(all);\n        }\n\n        if(parameters.search){\n            search();\n        }\n        \n        if(isRequest){\n            let params = {...parameters};\n            params.name = name;\n            params.email = email;\n            setReadyToSubmit(Helper.isReadyToSubmit(params));\n        }\n    }, [parameters])\n\n    useEffect(() => {\n        let params = {...parameters};\n        params.name = name;\n        params.email = email;\n        setReadyToSubmit(Helper.isReadyToSubmit(params));\n    }, [name, email])\n\n    const showMessage = (status, data) => {\n        let severity = status ? 'success' : 'error';\n        PSetSearch.messages.show({severity: severity, summary: data.summary, detail: data.message, sticky: true});\n        initializeState();\n    }\n\n    const updatePSetSelection = (selected) => {\n        setSelectedPSets(selected);\n    }\n\n    const initializeState = () => {\n        setSelectedPSets([]);\n        setDisableSaveBtn(true);\n    }\n\n    const submitRequest = async event => {\n        event.preventDefault();\n        let dataset = {name: parameters.dataset.name, label: parameters.dataset.label, versionInfo: parameters.drugSensitivity.version}\n        let reqData = {...parameters}\n        let dataType = parameters.defaultData.concat(parameters.dataType)\n        let rnaRef = {...parameters.rnaRef}\n\n        reqData.dataset = dataset\n        reqData.dataType = dataType\n        reqData.rnaRef = (Object.keys(rnaRef).length === 0 && rnaRef.constructor === Object ? [] : [rnaRef])\n        reqData.name = name\n        reqData.email = email\n        \n        // delete any unnecessary fields for the database.\n        delete reqData.drugSensitivity\n        delete reqData.defaultData \n        delete reqData.search\n        reqData.dataType.forEach(dt => {delete dt.hide})\n        reqData.rnaRef.forEach(ref => {delete ref.hide})\n\n        console.log(reqData)\n        \n        const res = await trackPromise(fetch('/api/pset/request', {\n                method: 'POST',\n                body: JSON.stringify({reqData: reqData}),\n                headers: {'Content-type': 'application/json'}\n            }));\n        const resData = await res.json();\n        showMessage(res.ok, resData);\n        initializeState();\n    }\n\n    const SubmitRequestButton = () => {\n        const {promiseInProgress} = usePromiseTracker();\n        return(\n            promiseInProgress ? \n                <div className='loaderContainer'>\n                    <Loader type=\"ThreeDots\" color=\"#3D405A\" height={100} width={100} />\n                </div>\n                :\n                <Button label='Submit Request' type='submit' disabled={!readyToSubmit} onClick={submitRequest}/>\n        );\n    }\n        \n    return(\n        <SearchReqContext.Provider value={{ \n                parameters: parameters, \n                setParameters: setParameters, \n                isRequest: isRequest, \n                setIsRequest: setIsRequest\n            }}\n        >\n            <div className='pageContent'>\n                <h2>Search or Request Pharmacogenomic Datasets</h2>\n                <div className='pSetListContainer'>\n                    <PSetFilter />\n                    <div className='pSetTable'>\n                        <Messages ref={(el) => PSetSearch.messages = el} />\n                        <div className='pSetSelectionSummary'>\n                            <div className='summaryPanel'>\n                                <h2>Summary</h2>\n                                <div className='pSetSummaryContainer'>\n                                    <div className='pSetSummaryItem'>\n                                        {\n                                            searchAll ? \n                                            <span><span className='pSetSummaryNum'>{psets.length ? psets.length : 0}</span> <span>dataset(s) available.</span></span>\n                                            :\n                                            <span><span className='pSetSummaryNum'>{psets.length}</span> <span>{psets.length === 1 ? ' match' : ' matches'}</span> found.</span>\n                                        }\n                                    </div>\n                                </div>\n                                <SavePSetButton selectedPSets={selectedPSets} disabled={disableSaveBtn} onSaveComplete={showMessage} />\n                            </div>\n                            {\n                                isRequest &&\n                                <div className='requestFormPanel'>\n                                    <h2>Request PSet</h2>\n                                    <div className='reqFormInput'>\n                                        <label>PSet Name:</label>\n                                            <InputText id='name' className='paramInput' value={name || ''} onChange={(e) => {setName(e.target.value)}} />\n                                    </div>\n                                    <div className='reqFormInput'>\n                                        <label>Email to receive DOI:</label>\n                                            <InputText id='email' className='paramInput' value={email || ''} onChange={(e) => {setEmail(e.target.value)}} />\n                                    </div>\n                                    <div className='reqFormInput'>\n                                        <SubmitRequestButton />\n                                    </div>\n                                </div>\n                            }\n                        </div>\n                        {\n                            ready ?\n                            <PSetTable \n                                psets={psets} selectedPSets={selectedPSets} \n                                updatePSetSelection={updatePSetSelection} scrollHeight='600px'\n                                authenticated={auth.authenticated}\n                                download={true}\n                            /> \n                            :\n                            <div className='tableLoaderContainer'>\n                                <Loader type=\"ThreeDots\" color=\"#3D405A\" height={100} width={100} />\n                            </div>\n                        }  \n                    </div>\n                </div>\n            </div>\n        </SearchReqContext.Provider>\n    );\n}\n\nexport default PSetSearch;","import React, {useState, useEffect, useContext} from 'react';\nimport './Dashboard.css';\nimport {usePromiseTracker} from \"react-promise-tracker\";\nimport {trackPromise} from 'react-promise-tracker';\nimport Loader from 'react-loader-spinner';\nimport {Messages} from 'primereact/messages';\nimport {DataTable} from 'primereact/datatable';\nimport {Column} from 'primereact/column';\nimport {AuthContext} from '../../context/auth';\n\nconst Dashboard = (props) => {\n    \n    const auth = useContext(AuthContext);\n    const [data, setData] = useState([]);\n    const [loading, setLoading] = useState(true);\n\n    const { promiseInProgress } = usePromiseTracker();\n\n    const show = (message) => {\n        Dashboard.messages.show(message);\n    }\n\n    const fetchData = async (url) => {\n        const response = await fetch(url);\n        const json = await response.json();\n        setData(json);\n        setLoading(false);\n    }\n\n    const submitRequest = async (id) => {\n        const result = await trackPromise(fetch(\n            '/api/pset/process', \n            { \n                method: 'POST', \n                body: JSON.stringify({id: id}), \n                headers: {'Content-type': 'application/json'} \n            }\n        ));\n        const json = await result.json();\n        return({ok: result.ok, data: json});\n    }\n\n    useEffect(() => {\n        fetchData('/api/pset?status=pending&status=in-process');\n    }, []);\n    \n    const onSubmit = async (event) => {\n        event.preventDefault();\n        console.log(event.target.id);\n        const result = await submitRequest(event.target.id);\n        if(result.ok){\n            show({severity: 'success', summary: result.data.summary, detail: result.data.message, sticky: true});\n        }else{\n            show({severity: 'error', summary: result.data.summary, detail: result.data.message, sticky: true});\n        }\n        await fetchData('/api/pset?status=pending&status=in-process');\n    }\n\n    const dateTimeTemplate = (rowData, column) => {\n        let dateTimeStr = '';\n        if(rowData[column.field]){\n            dateTimeStr = new Date(rowData[column.field]).toLocaleString(undefined, {dateStyle: 'long', timeStyle: 'medium'});\n        }\n        return(<div>{dateTimeStr}</div>)\n    }\n\n    const buttonTemplate = (rowData, column) => {\n        let button = '';\n        if(rowData.status === 'pending'){\n            button = <button id={rowData._id} onClick={onSubmit} className='dashboardBtn' type='button'>Submit</button>\n        }\n        return(<div className='dashBoardBtnContainer'>{button}</div>)\n    }\n\n    return(\n        <div className='pageContent'>\n            <div className='dashboardWrapper'>\n                <h2>PSet Request Status Board</h2>\n                <Messages ref={(el) => Dashboard.messages = el }></Messages>\n                <div className='dashboardSummary'>\n                    <h2>Request Status Summary</h2>\n                    <div className='dashboardSummaryContainer'>\n                        <div className='dashboardSummarySection'>\n                            <span className='number'>{ data.filter(d => d.status === 'pending').length }</span> pending request(s).\n                        </div>\n                        <div className='dashboardSummarySection'>\n                            <span className='number'>{ data.filter(d => d.status === 'in-process').length }</span> request(s) in process.\n                        </div>    \n                    </div>    \n                </div>\n                <div className='dashboardTable'>\n                    {\n                        !loading ?\n                            data.length > 0 ?\n                            <DataTable value={data} paginator={true}  scrollable={true} rows={10} >\n                                <Column className='textField' field='status' header='Status' style={{width:'2em'}} sortable={true} />\n                                <Column className='textField' field='name' header='Name' style={{width:'5em'}} sortable={true} />\n                                <Column className='textField' field='dateSubmitted' header='Submitted Date' body={dateTimeTemplate} style={{width:'4em'}} sortable={true} />\n                                <Column className='textField' field='dateProcessed' header='Process Start Date' body={dateTimeTemplate} style={{width:'4em'}} sortable={true} />\n                                { auth.isAdmin && <Column body={buttonTemplate} style={{width:'1.5em'}}/> }\n                            </DataTable>\n                            :\n                            <h3>There are no pending or in-process requests.</h3>\n                        :   \n                        <div className='dashboardTableLoaderContainer'>\n                            <Loader type=\"ThreeDots\" color=\"#3D405A\" height={100} width={100} />\n                        </div>\n                    } \n                    {\n                        promiseInProgress && \n                        <div className='dashboardTableOverlay'>\n                            <div className='dashboardLoaderContainer'>\n                                <Loader type=\"ThreeDots\" color=\"#3D405A\" height={100} width={100} />\n                            </div>\n                        </div>   \n                    }\n                </div> \n            </div>   \n        </div>  \n    );\n}\n\nexport default Dashboard;","import React from 'react';\nimport Plotly from \"plotly.js-basic-dist\";\nimport createPlotlyComponent from \"react-plotly.js/factory\";\nconst Plot = createPlotlyComponent(Plotly);\n\nconst UpsetPlot = (props) => {\n\n    return(\n        <div className='upsetPlot'>\n            {\n                Object.keys(props.data).length && \n                <React.Fragment>\n                    <Plot\n                        data= {props.data.bars}\n                        layout={ {\n                            autosize: true,\n                            xaxis: {\n                                showgrid: false,\n                                zeroline: false,\n                                showticklabels: false,\n                                range: [-1, props.data.bars.length + 1]\n                            },\n                            yaxis: {\n                                tickfont: {\n                                    size: 12\n                                },\n                                showgrid: true,\n                                showticklabels: true\n                            },\n                            margin: {t: 10, b: 0, l: 120, r: 10},\n                            showlegend: false\n                        } }\n                        style = {{width: '2000px', height: '250px'}}\n                        useResizeHandler = {true}\n                        config = {{displayModeBar: false}}\n                    />\n                    <Plot\n                        data= {props.data.points}\n                        layout={ {\n                            autosize: true,\n                            xaxis: {\n                                showgrid: false,\n                                zeroline: false,\n                                showticklabels: false,\n                                range: [-1, props.data.points.length + 1]\n                            },\n                            yaxis: {\n                                showgrid: true,\n                                tickfont: {\n                                    size: 12\n                                },\n                                showticklabels: true\n                            },\n                            margin: {t: 0, b: 10, l: 120, r: 10},\n                            showlegend: false\n                        } }\n                        style = {{ width: '2000px', height: '200px'}}\n                        useResizeHandler = {true}\n                        config = {{displayModeBar: false}}\n                    />\n                </React.Fragment>\n            }\n        </div>\n    )\n}\n\nexport default UpsetPlot","import React, {useEffect, useState} from 'react';\nimport Plotly from \"plotly.js-basic-dist\";\nimport createPlotlyComponent from \"react-plotly.js/factory\";\nimport {Checkbox} from 'primereact/checkbox';\nimport {RadioButton} from 'primereact/radiobutton';\nimport UpsetPlot from './UpsetPlot'\nimport Loader from 'react-loader-spinner';\nconst Plot = createPlotlyComponent(Plotly);\n\nconst DatasetChart = props => {\n\n    const metricSet = [\n        {name: 'Numer of Cell Lines', value: 'cellLines'},\n        {name: 'Numer of Drugs', value: 'drugs'},\n        {name: 'Number of Tissue Types', value: 'tissues'},\n        {name: 'Numer of Cell-Line Drug Pairs ', value: 'cellLineDrugPairs'},\n        {name: 'Numer of Genes', value: 'genes'}\n    ]\n    const [upsetData, setUpsetData] = useState({})\n    const [barData, setBarData] = useState([])\n    const [parameters, setParameters] = useState({\n        datasets: [],\n        metricName: ''\n    })\n    const [isReady, setIsReady] = useState(false)\n    const [isPlotReady, setIsPlotReady] = useState(false)\n\n    useEffect(() => {\n        const getData = async () => {\n            const res = await fetch('/api/stats/metrics/options')\n            const json = await res.json()\n            console.log(json)\n            setParameters({\n                datasets: json,\n                metricName: 'cellLines'\n            })\n        } \n        getData()\n        setIsReady(true)\n    }, [])\n\n    useEffect(() => {\n        const updateData = async () => {\n            const res = await fetch('/api/stats/metrics/data', {\n                method: 'POST',\n                body: JSON.stringify({parameters: parameters}),\n                headers: {'Content-type': 'application/json'}\n            })\n            const json = await res.json()\n\n            if(parameters.metricName === 'cellLines' || parameters.metricName === 'drugs' || parameters.metricName === 'tissues'){\n                let points = []\n                let bars = []\n                let data = json.upsetData.data\n                console.log(json.upsetData)\n                for(let i = 0; i < data.length; i++){\n                    let datasets = []\n                    let colors = []\n                    for(let j = 0; j < data[i].setIndices.length; j++){\n                        let index = data[i].setIndices[j]\n                        datasets.push(json.upsetData.sets[index].name)\n                        colors.push(json.upsetData.sets[index].color)\n                    }\n                    data[i].datasets = datasets\n                    data[i].colors = colors\n                }\n\n                for(let i = 0; i < data.length; i++){\n\n                    points.push({\n                            x: new Array(data[i].datasets.length).fill(i),\n                            y: data[i].datasets,\n                            mode: data[i].datasets.length > 1 ? 'lines+markers' : 'markers',\n                            type: 'scatter',\n                            marker: {\n                                size: 10,\n                                color: data[i].colors\n                            },\n                            line: {\n                                color: '#777777'\n                            },\n                            hoverinfo: 'text'\n                    }) \n\n                    bars.push({\n                            x: [i, i],\n                            y: [0, data[i].names.length],\n                            mode: 'markers+lines',\n                            type: 'scatter',\n                            line: {\n                                color: data[i].colors.length > 1 ? '#777777' : data[i].colors[0],\n                                width: 10\n                            },\n                            marker: {\n                                color: data[i].colors.length > 1 ? '#777777' : data[i].colors[0],\n                                symbol: 'line-ew',\n                                size: 10\n                            },\n                            text: data[i].names.length,\n                            hoverinfo: 'text'\n                    })\n                }\n                setUpsetData({points: points, bars: bars})\n            }else{\n                const barDatasets = json.barData\n                barDatasets.sort((a, b) => (a.value > b.value) ? 1: -1)\n\n                setBarData([{\n                    x: barDatasets.map((item) => {return item.value}), \n                    y: barDatasets.map((item) => {return item.name}), \n                    type: 'bar',\n                    orientation: 'h',\n                    marker: {\n                        color: barDatasets.map((item) => {return item.color})\n                    }\n                }])\n            }\n            setIsPlotReady(true)\n        }\n        setIsPlotReady(false)\n        if(isReady){\n            console.log(parameters)\n            updateData()\n        }\n    }, [parameters])\n    \n    return (\n        <React.Fragment>\n            <h4>Select Dataset Metrics to View</h4>\n            <div className='stats-dataset-metric-control'>\n                {\n                    metricSet.map((metric) => {\n                        return(\n                            <div className='stats-chart-control-checkbox' key={metric.value}>\n                                <RadioButton inputId={metric.name} value={metric.value} checked={parameters.metricName === metric.value}\n                                    onChange={e => {\n                                        let params = {...parameters}\n                                        params.metricName = e.value\n                                        setParameters(params)\n                                    }\n                                }></RadioButton>\n                                <div>{metric.name}</div>\n                            </div>\n                        )\n                    })\n                }\n            </div>    \n            <div className='stats-dataset-chart'>\n                {isPlotReady ? \n                    <div className='stats-dataset-plot'>\n                        {\n                            parameters.metricName === 'cellLineDrugPairs' || parameters.metricName === 'genes' ?\n                            <Plot\n                                data= {barData}\n                                layout={ {\n                                    autosize: true,\n                                    margin: {t: 50, b: 50, l: 130, r: 10},\n                                    showlegend: false\n                                } }\n                                style = {{width: \"100%\", height: '300px'}}\n                                useResizeHandler = {true}\n                                config = {{displayModeBar: false}}\n                            />\n                            :\n                            <UpsetPlot data={upsetData} />\n                        }\n                    </div>\n                    :\n                    <div className='componentLoaderContainer'>\n                        <Loader type=\"ThreeDots\" color=\"#3D405A\" height={100} width={100} />\n                    </div>\n                }\n                <div className='stats-dataset-chart-control'>\n                    <h4>Select Dataset(s) to View</h4>\n                    {\n                        parameters.datasets.map((dataset) => {\n                            return(\n                                <div className='stats-chart-control-checkbox dataset-checkbox' key={dataset.name}>\n                                    <Checkbox inputId={dataset.name} value={dataset.name} checked={dataset.checked}\n                                        onChange={e => {\n                                            let params = {...parameters}\n                                            let index = params.datasets.findIndex(item => item.name === dataset.name)\n                                            params.datasets[index].checked = e.checked\n                                            setParameters(params)\n                                        }\n                                    }></Checkbox>\n                                    <label htmlFor={dataset.name}>{dataset.name}</label>\n                                </div>\n                            )\n                        })\n                    }\n                </div>  \n            </div>\n        </React.Fragment>\n    );\n}\n\nexport default DatasetChart;","import React, {useState, useEffect} from 'react';\nimport './Stats.css';\nimport {DataTable} from 'primereact/datatable';\nimport {Column} from 'primereact/column';\nimport { Link } from 'react-router-dom';\nimport DatasetChart from './DatasetChart';\nimport Loader from 'react-loader-spinner';\n\nconst Stats = () => {\n\n    const [psets, setPSets] = useState([])\n    const [chartData] = useState([])\n    const [isReady, setIsReady] = useState(false)\n\n    useEffect(() => {\n        const getData = async () => {\n            const res = await fetch('/api/stats/data')\n            const json = await res.json()\n            console.log(json)\n            setPSets(json.psets)\n            setIsReady(true)\n        }\n        getData()\n    }, [])\n    \n    const nameColumnTemplate = (rowData, column) => {\n        let route = '/' + rowData.doi;\n        return(\n            <Link to={route} target=\"_blank\">{rowData.name}</Link>\n        );\n    }\n        \n    return(\n        <div className='pageContent'>\n            <h2>Dataset Metrics and PSet Usage Statistics</h2>\n            {\n                isReady ?\n                <div className='statContainer'>\n                    <div className='container downloadHistogram'>\n                        <h3>Dataset Metrics</h3>\n                        <DatasetChart chartData={chartData} />\n                    </div>\n                    <div className='container rankingTable'>\n                        <h3>Download Ranking</h3>\n                        <DataTable \n                            value={psets} paginator={true} rows={10} scrollable={true} \n                            resizableColumns={true} columnResizeMode=\"fit\"\n                        >\n                            <Column className='textField' field='download' header='Number of Downloads' style={{width:'5%', textAlign:'center'}} sortable={true} />\n                            <Column className='textField' field='name' header='Name' style={{width:'7%', textAlign:'center'}} body={nameColumnTemplate} sortable={true} />\n                            <Column className='textField' field='dataset' header='Dataset' style={{width:'5%', textAlign:'center'}} sortable={true} />\n                            <Column className='textField' field='version' header='Drug Sensitivity' style={{width:'5%', textAlign:'center'}} sortable={true} />\n                        </DataTable>\n                    </div>  \n                </div>\n                :\n                <div className='componentLoaderContainer'>\n                    <Loader type=\"ThreeDots\" color=\"#3D405A\" height={100} width={100} />\n                </div>\n            }\n        </div>\n    );\n}\n\nexport default Stats;","import React from 'react';\n\nconst Overview = () => {\n    return(\n        <div className='documentation'>\n            <h1>Overview</h1>\n\n                <div>\n                    <h3>Introduction</h3>\n                    <p>\n                        <b>ORCESTRA</b> is a new web application that enables users to search, request and manage pharmacogenomic datasets (PSets).\n                        <br />\n                        PSets are generated with an automated pipeline by using a verion controll platform called Pachyderm. Upon completion of the pipeline, a newly generated PSet is uploaded to Zenodo, a data-sharing platform, and is assigned a DOI.\n                        <br />\n                        With Pachyderm's strict version controlling system, coupled with the DOI assignment, ORCESTRA ensures that your experiements with PSets are transparent and easily reproducible.\n                    </p>\n                    <h3>System Overview</h3>  \n                    <p>\n                        The <b>ORCESTRA</b> system consists of three main layers:   \n                    </p>  \n                    <ol>\n                        <li><b>Web application layer</b> which allows users to view and submit PSet requests</li>\n                        <li><b>Data processing layer</b> which utilizes a version control software called Pachyderm to process requested data</li>\n                        <li><b>Data sharing layer</b> which utilizes Zenodo to ensure that the generated dataset is tagged with a DOI</li>\n                    </ol>     \n                    <div className='img-architecture'>\n                        <img src={process.env.PUBLIC_URL + \"/images/documentation/architecture.png\"} alt=''/>\n                    </div>\n                    <div className='bottom-fill'></div>  \n                </div>  \n        </div>    \n    );\n}\n\nexport default Overview","import React from 'react';\n\nconst Search = () => {\n    return(\n        <div className='documentation'>\n            <h1>Search</h1>\n                <div>\n                    <h3>How to search existing PSets</h3>\n                    <p>\n                        Existing PSets can be searched on <a href='/PSetSearch'>Search and Request</a> page.<br />\n                        User can select different pipeline parameters uder PSet Parameters pane. Each selection of parameters triggers a database search. The search result is displayed on the data table as shown in the figure below.\n                    </p> \n                    <div className='img-full'>\n                        <img src={process.env.PUBLIC_URL + \"/images/documentation/search.png\"} alt='' />\n                    </div>  \n                    <h3>How to view metadata of a PSet</h3>\n                    <p>\n                        Metadata of a PSet can be viewed by clicking a dataset name on the search table.<br />\n                        Explore PSet view is displayed as in the figure below where user can view publications associated with the dataset, and command lines used in the pipeline to generate the PSet.\n                    </p> \n                    <div className='img-full'>\n                        <img src={process.env.PUBLIC_URL + \"/images/documentation/explore_pset.png\"} alt='' />\n                    </div>\n                    <div className='bottom-fill'></div> \n                </div>      \n        </div>    \n    );\n}\n\nexport default Search","import React from 'react';\n\nconst Request = () => {\n    return(\n        <div className='documentation'>\n            <h1>Request</h1> \n                <div>\n                    <h3>How to request a PSet</h3>\n                    <p>\n                        To request a PSet, turn on the Request mode on <a href='/PSetSearch'>Search and Request</a> view with the toggle button on top of the PSet Parameters pane. In the requets mode, two text fields to enter the PSet name and email address to receive pipeline completion notification will be displayed.<br />\n                        Once all the information is filled out, including the PSet name and email address, the Submit Request button becomes active.<br />\n                        PSet request is submitted upon clicking the Submit button.\n                    </p> \n                    <div className='img-full'>\n                        <img src={process.env.PUBLIC_URL + \"/images/documentation/request.png\"} alt='' />\n                    </div>  \n                    <h3>How to check status of your request</h3>\n                    <p>\n                        Status of your pipeline request can be viewed at <a href='/Dashboard'>Request Status</a> view.<br /> \n                        Status of your request can either be \"pending\" or \"in-process\". Pending requests are the ones that have been successfully submitted, and will be processed once the Pachyderm cluster is online. In-process requests have been successfully submitted, and the pipeline execution has been started.\n                    </p> \n                    <div className='img-full'>\n                        <img src={process.env.PUBLIC_URL + \"/images/documentation/request_status.png\"} alt='' />\n                    </div> \n                    <div className='bottom-fill'></div>\n                </div>\n        </div>    \n    );\n}\n\nexport default Request","import React from 'react';\n\nconst UserProfile = () => {\n    return(\n        <div className='documentation'>\n            <h2>User Profile and Usage Statistics</h2>\n            <div>\n                <h3>What you can do with your profile</h3>\n                <p>\n                    <b>ORCESTRA</b> comes with user account feature which allows registred users to:\n                    <ul>\n                        <li>Save existing PSets as \"favorites\".</li>\n                        <li>Keep track of the user's PSet reguqest status.</li>\n                    </ul>\n                    To register for the user account, simply click on the \"Login/Register\" button on navigation \n                    bar, and enter your email address and password.\n                </p>   \n            </div>\n            <div>\n                <h3>Usage Statistics</h3>\n                <p>\n                    <b>ORCESTRA</b>'s usage metrics can be viewed at <a href='http://orcestra.ca/Stats'>Statistics</a> page.<br />\n                    <b>ORCESTRA</b> currently provides the download ranking of the existing PSets.\n                </p>   \n            </div>\n        </div>    \n    );\n}\n\nexport default UserProfile","import React, {useState, useEffect} from 'react';\nimport {ScrollPanel} from 'primereact/scrollpanel';\n\nconst AvailablePSets = () => {\n    \n    const [data, setData] = useState([])\n\n    useEffect(() => {\n        const getData = async () => {\n            const res = await fetch('/api/psets/available')\n            const data = await res.json()\n            setData(JSON.stringify(data, null, 2))\n        }\n        getData()\n    }, [])\n    \n    return(\n        <div className='documentation'>\n            <h2>List of Available PSets</h2>\n            <p>\n                This RESTful API call restrieves a list of available PSets in the database:<br />\n                <code className='code'>curl http://api.orcestra.ca/psets/available</code><br />\n                Current result of the successful API call is as follows:<br />\n            </p>\n            <ScrollPanel className='documentation-scroll'>\n                <div>\n                    <pre>\n                        {data}\n                    </pre>    \n                </div>\n            </ScrollPanel>\n        </div>    \n    );\n}\n\nexport default AvailablePSets","import React, {useState, useEffect} from 'react';\nimport {ScrollPanel} from 'primereact/scrollpanel';\n\nconst PSetMetadata = () => {\n    const [data, setData] = useState([])\n\n    useEffect(() => {\n        const getData = async () => {\n            const res = await fetch('/api/pset/10.5281/zenodo.3905462')\n            const data = await res.json()\n            console.log(data)\n            setData(JSON.stringify(data, null, 2))\n        }\n        getData()\n    }, [])\n    \n    return(\n        <div className='documentation'>\n            <h2>Single PSet</h2>\n            <p>\n                This RESTful API call restrieves a PSet associated with specified DOI:<br />\n                <code className='code'>curl http://api.orcestra.ca/pset/[ DOI ]</code><br />\n                Example:<br />\n                <code className='code'>curl http://api.orcestra.ca/pset/10.5281/zenodo.3905462</code><br />\n                Current result of the successful API call is as follows:<br />\n            </p>\n            <ScrollPanel className='documentation-scroll'>\n            <div>\n                <pre>\n                    {data}\n                </pre>    \n            </div>\n            </ScrollPanel>\n        </div>    \n    );\n}\n\nexport default PSetMetadata","import React, {useState, useEffect} from 'react';\nimport {ScrollPanel} from 'primereact/scrollpanel';\n\nconst StatisticsAPI = () => {\n    const [data, setData] = useState([])\n\n    useEffect(() => {\n        const getData = async () => {\n            const res = await fetch('/api/psets/statistics/5')\n            const data = await res.json()\n            setData(JSON.stringify(data, null, 2))\n        }\n        getData()\n    }, [])\n    \n    return(\n        <div className='documentation'>\n            <h2>Statistics</h2>\n            <p>\n                This RESTful API call restrieves a list of PSets ordered by the number of downloads:<br />\n                <code className='code'>curl http://api.orcestra.ca/psets/statistics/[ number of psets to be returned ]</code><br />\n                Example:<br />\n                <code className='code'>curl http://api.orcestra.ca/psets/statistics/5</code><br />\n                Current result of the successful API call is as follows:<br />\n            </p>\n            <ScrollPanel className='documentation-scroll'>\n            <div>\n                <pre>\n                    {data}\n                </pre>    \n            </div>\n            </ScrollPanel>\n        </div>    \n    );\n}\n\nexport default StatisticsAPI","import React, { useState } from 'react';\nimport './Documentation.css';\n\nimport Overview from './DocFunctionality/Overview';\nimport Search from './DocFunctionality/Search';\nimport Request from './DocFunctionality/Request';\nimport UserProfile from './DocFunctionality/UserProfile';\nimport AvailablePSets from './DocAPI/AvailablePSets';\nimport PSetMetadata from './DocAPI/PSetMetadata';\nimport StatisticsAPI from './DocAPI/StatisticsAPI';\n\nconst Documentation = (props) => {\n    \n    const [display, setDisplay] = useState('overview');\n\n    return(\n        <div className='pageContent'>\n            <div className='documentationContent'>\n                <nav className='documentationNav'>\n                    <h2>Functionality</h2>\n                    <ul>\n                        <li className={display === 'overview' ? 'selected' : undefined}>\n                            <button type='button' onClick={() => setDisplay('overview')}>Overview</button>\n                        </li>\n                        <li className={display === 'search' ? 'selected' : undefined}>\n                            <button type='button' onClick={() => setDisplay('search')}>Search</button>\n                        </li>    \n                        <li className={display === 'request' ? 'selected' : undefined}>\n                            <button type='button' onClick={() => setDisplay('request')}>Request</button>\n                        </li>\n                        <li className={display === 'userProfile' ? 'selected' : undefined}>\n                            <button type='button' onClick={() => setDisplay('userProfile')}>Profile/Statistics</button>\n                        </li>\n                    </ul> \n                    <h2>API</h2>\n                    <ul>\n                        <li className={display === 'api-psets-available' ? 'selected' : undefined}>\n                            <button type='button' onClick={() => setDisplay('api-psets-available')}>Available PSets</button>\n                        </li>\n                        <li className={display === 'api-pset-single' ? 'selected' : undefined}>\n                            <button type='button' onClick={() => setDisplay('api-pset-single')} >Single PSet</button>\n                        </li>\n                        <li className={display === 'api-statistics' ? 'selected' : undefined}>\n                            <button type='button' onClick={() => setDisplay('api-statistics')}>Statistics</button>\n                        </li>    \n                    </ul>\n                </nav>\n                {display === 'overview' && <Overview /> }\n                {display === 'search' && <Search /> }\n                {display === 'request' && <Request /> }\n                {display === 'userProfile' && <UserProfile /> }\n                {display === 'api-psets-available' && <AvailablePSets /> }\n                {display === 'api-pset-single' && <PSetMetadata /> }\n                {display === 'api-statistics' && <StatisticsAPI /> }\n            </div>\n        </div>\n    );\n}\n\nexport default Documentation;","import React from 'react';\nimport {ScrollPanel} from 'primereact/scrollpanel';\nimport './Tutorial.css';\n\nconst Tutorial = (props) => {\n    return(\n        <React.Fragment>\n            <div className='pageContent'>\n                <div className='tutorial-container'>\n                    <h2>Generating PSet with Your Data</h2>\n                    <ScrollPanel className='tutorial-scroll'>\n                        <div className='tutorial-text'>\n                            If you would like to generate a PSet with your own data, plase submit the data to <b>support@orcestra.ca</b>. <br />\n                            Please ensure your data submission follows the respective format below:<br />\n                            The following are a list of requirements that must be fulfilled in order to successfully generate a PharmacoSet (PSet) object in PharmacoGx:\n                        </div>\n                        <ol className='tutorial-list'>\n                            <li>\n                                <h2>Cell line annotation</h2>\n                                <div className='tutorial-text'>\n                                    Please provide the number of cell lines that will be utilized, along with their respective cell line ID’s (e.g. 184A1, 22RV1).\n                                </div>    \n                            </li> \n                            <li>\n                                <h2>Drug annotation</h2>\n                                <div className='tutorial-text'>\n                                    Please provide the number of drugs that will be utilized, along with their respective  drug ID’s (preferably PubChem) (e.g. lapatinib).\n                                </div> \n                            </li> \n                            <li>\n                                <h2>Tissue annotation</h2>\n                                <div className='tutorial-text'>\n                                    Tissue types for each cell line ID provided (e.g. breast).\n                                </div> \n                            </li> \n                            <li>\n                                <h2>Cell line metadata</h2>\n                                <div className='tutorial-text'>\n                                    Metadata for each cell ID (e.g. transcriptional subtype for each cell id).\n                                </div> \n                            </li>   \n                            <li>\n                                <h2>Drug metadata</h2>\n                                <div className='tutorial-text'>\n                                    Metadata for each drug ID.\n                                </div> \n                            </li>  \n                            <li>\n                                <h2>Processed drug response data</h2>\n                                <div className='tutorial-text'>\n                                    <ol>\n                                        <li>\n                                            <div>\n                                                Sensitivity info (cell line id and drug id for each cell line and drug pair used in sensitivity measurements, minimum and maximum drug dose for each cell line and drug pair, number of concentrations tested for each cell line and drug pair).\n                                            </div>\n                                            <img  src={process.env.PUBLIC_URL + \"/images/tutorial/sensitivity.png\"} alt='' />\n                                        </li> \n                                        <li>\n                                            <div>\n                                                Raw Sensitivity (Drug dose values for each cell line and drug pair, along with their respective viability values).\n                                            </div>\n                                            <h4>Doses</h4>\n                                            <img  src={process.env.PUBLIC_URL + \"/images/tutorial/doses.png\"} alt='' />\n                                            <h4>Viability</h4>\n                                            <img  src={process.env.PUBLIC_URL + \"/images/tutorial/viability.png\"} alt='' />\n                                        </li>\n                                        <li>\n                                            <div>\n                                                Sensitivity Profiles (AAC, IC50, EC50, Einf etc values for each cell line and drug pair)\n                                            </div>\n                                            <img  src={process.env.PUBLIC_URL + \"/images/tutorial/sensitivity_profiles.png\"} alt='' />\n                                        </li>       \n                                    </ol> \n                                    <p>\n                                        Note: Please ensure sensitivity info, profiles, and raw sensitivity are in an organized data frame in R.\n                                    </p>       \n                                </div>\n                            </li> \n                            <li>\n                                <h2>Processed molecular profiles</h2>\n                                <div className='tutorial-text'>\n                                    <ol>\n                                        <li>\n                                            Please provide the processed molecular data you would like to include in the PSet (e.g Kallisto h5 abundance files), along with processing details (e.g. reference genome, transcriptome).\n                                        </li>\n                                        <li>\n                                            Phenotypic (e.g. batch ids) and feature data (e.g. gencode gene id) for each cell line used in the molecular profiles.\n                                        </li>\n                                    </ol>    \n                                </div> \n                            </li> \n                        </ol>\n                    </ScrollPanel>\n                </div>\n            </div>\n        </React.Fragment>\n    )\n}\n\nexport default Tutorial","import React, {useState, useContext, useEffect} from 'react';\nimport { Link } from \"react-router-dom\";\nimport './UserInfo.css'\nimport {Button} from 'primereact/button';\nimport {InputText} from 'primereact/inputtext';\nimport {Messages} from 'primereact/messages';\nimport {AuthContext} from '../../../context/auth';\n\nconst UserInfo = (props) => {\n    const auth = useContext(AuthContext);\n    const [show, setShow] = useState(false)\n    const [password1, setPassword1] = useState('')\n    const [password2, setPassword2] = useState('')\n    const [btnResetDisabled, setBtnResetDisabled] = useState(true)\n\n    useEffect(() => {\n        password1.length >= 6 ?  password1 === password2 && setBtnResetDisabled(false) : setBtnResetDisabled(true);\n    }, [password1, password2])\n    \n    const showPwdReset = (event) => {\n        event.preventDefault()\n        setShow(true)\n    }\n\n    const hidePwdReset = (event) => {\n        event.preventDefault()\n        setShow(false)\n    }\n\n    const resetPwd = async (event) => {\n        event.preventDefault()\n        const res = await fetch('/api/user/reset', {\n            method: 'POST',\n            body: JSON.stringify({\n                user: { username: auth.username, password: password1 }   \n            }),\n            headers: { 'Content-type': 'application/json' }\n        })\n        const data = await res.json();\n        if(data.authenticated){\n            console.log('authenticated');\n            auth.setAuthToken(data);\n            setPassword1('')\n            setPassword2('')\n            setShow(false)\n            UserInfo.messages.show({severity: 'success', summary: 'Password changed'});\n        }else{\n            UserInfo.messages.show({severity: 'error', summary: 'Error occurred', detail: 'Password could not be changed'});\n        }\n    }\n\n    return(\n        <div className='userInfoContainer'>\n            <h2>User Information</h2>\n            <Messages ref={(el) => UserInfo.messages = el}></Messages>\n            <div className='userInfo'>Username: {auth.username}</div>\n            { auth.isAdmin && <div className='userInfo'><Link to = '/admin'>Admin Menu</Link></div> }\n            {\n                show &&\n                <div>\n                    <div>\n                        <div className='pwdMsg'>Password needs to be at least 6 characters in length</div>\n                        <InputText className='pwdInput' type='password' name='password1' value={password1} onChange={(e) => {setPassword1(e.target.value)}}/>\n                    </div>\n                    <div>\n                        <label>Confirm your password:</label>\n                        <InputText className='pwdInput' type='password' name='password2' value={password2} onChange={(e) => {setPassword2(e.target.value)}}/>\n                    </div> \n                </div> \n            }\n            <div className='userInfoBtn'>\n                {\n                    show ? \n                    <div>\n                        <Button className='pwdReset' label='Reset' onClick={resetPwd} disabled={btnResetDisabled}/>\n                        <Button className='pwdReset' label='Cancel' onClick={hidePwdReset}/>\n                    </div>\n                    :\n                    <Button label='Reset password' onClick={showPwdReset}/>\n                }\n                \n            </div>\n        </div>\n    );\n}\n\nexport default UserInfo;","import React from 'react';\nimport PSetTable from '../../Shared/PSetTable';\nimport {Button} from 'primereact/button';\n// import DownloadPSetButton from '../../Shared/Buttons/DownloadPSetButton';\nimport {Dialog} from 'primereact/dialog';\nimport * as Helper from '../../Shared/Helper';\nimport './UserPSet.css';\n\nclass UserPSet extends React.Component{\n    \n    constructor(){\n        super();\n        this.state = {\n            selectedPSets: [],\n            btnDisabled: true,\n            dialogVisible: false,\n            btnYesDislabed: false\n        }\n        this.handleBtnClick = this.handleBtnClick.bind(this);\n        this.handleSelectionChange = this.handleSelectionChange.bind(this);\n        this.onClickYes = this.onClickYes.bind(this);\n        this.onHide = this.onHide.bind(this);\n        this.showMessages = this.showMessages.bind(this);\n    }\n\n    handleSelectionChange(selected){\n        this.setState({selectedPSets: selected}, () => {\n            if(this.state.selectedPSets && this.state.selectedPSets.length > 0){\n                this.setState({btnDisabled: false});\n            }else{\n                this.setState({btnDisabled: true});\n            }\n        });\n    }\n\n    handleBtnClick = event => {\n        this.setState({dialogVisible: true});\n    }\n\n    showMessages(status, data){\n        Helper.messageAfterRequest(status, data, null, this.props.messages);\n    }\n\n    onClickYes(){\n        this.setState({\n            btnDisabled: true,\n            btnYesDislabed: true\n        });\n        this.props.handleBtnClick(this.state.selectedPSets, (err)=>{\n            if(!err){\n                this.setState({\n                    selectedPSets: [],\n                    dialogVisible: false,\n                });\n            }else{\n                this.setState({btnDisabled: false});\n            }   \n        });\n    }\n    \n    onHide(){\n        this.setState({\n            dialogVisible: false,\n            btnYesDislabed: false\n        });\n    }\n    \n    render(){\n\n        const psetData = (\n            <React.Fragment>\n                <div>\n                    <PSetTable \n                        allData={this.props.pset} selectedPSets={this.state.selectedPSets} \n                        updatePSetSelection={this.handleSelectionChange} \n                        scrollHeight='350px' \n                        pending={this.props.pending}\n                        download={true}\n                        authenticated={true}\n                    />\n                </div>\n                <div className='footer'>\n                { !this.props.pending && <Button label={this.props.btnLabel} onClick={this.handleBtnClick} disabled={this.state.btnDisabled} /> } \n                </div>\n            </React.Fragment>\n        );\n\n        const noPSetData = (\n            <p>No data available.</p>\n        );\n\n        const dialogFooter = (\n            <div>\n                <Button label=\"Yes\" onClick={this.onClickYes} disabled={this.state.btnYesDislabed}/>\n                <Button label=\"Cancel\" onClick={this.onHide} />\n            </div>\n        );\n        \n        return(\n            <div className='userPSet'>\n                <h2>{this.props.heading}</h2>\n                <div className='userPSetContent'>\n                    {this.props.pset ? psetData : noPSetData}\n                </div>\n                <div>\n                    <Dialog header={'Removing Pset(s)'} footer={dialogFooter} visible={this.state.dialogVisible} style={{width: '300px'}} modal={true} onHide={this.onHide}>\n                        { 'Are you sure you would like to remove the selected PSet(s) from the saved list?' }\n                    </Dialog>\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default UserPSet;","import React from 'react';\nimport './Profile.css';\nimport UserInfo from './subcomponents/UserInfo';\nimport UserPSet from './subcomponents/UserPSet';\nimport {Messages} from 'primereact/messages';\nimport {AuthContext} from '../../context/auth';\nimport * as Helper from '../Shared/Helper';\n\nclass Profile extends React.Component{\n\n    constructor(){\n        super();\n        this.state = {\n            username: '',\n            userEmail: '',\n            psetSaved: [],\n            psetInProcess: []\n        }\n        this.removeFromSavedList = this.removeFromSavedList.bind(this);\n        this.cancelPSetRequest = this.cancelPSetRequest.bind(this);\n        this.findPSetByID = this.findPSetByID.bind(this);\n        this.removePSetByID = this.removePSetByID.bind(this);\n    }\n\n    static contextType = AuthContext;\n\n    componentDidMount(){\n        fetch('/api/user/pset/?username=' + this.context.username)  \n            .then(res => res.json())\n            .then(resData => {\n                let complete = [];\n                let pending = [];\n                for(let i = 0; i < resData.length; i++){\n                    if(resData[i].status === 'complete'){\n                        complete.push(resData[i]);\n                    }else{\n                        pending.push(resData[i]);\n                    }\n                }\n                this.setState({\n                    psetSaved: complete,\n                    psetInProcess: pending\n                });\n            });\n    }\n\n    removeFromSavedList = (selectedPSet, callback) => {\n        var psetID = []\n        for(let i = 0; i < selectedPSet.length; i++){\n            psetID.push(selectedPSet[i]._id);\n        }\n        fetch('/api/user/pset/remove', {\n            method: 'POST',\n            body: JSON.stringify({username: this.context.username, psetID: psetID}),\n            headers: {\n                'Content-type': 'application/json'\n            }\n        })\n            .then(res => res.json())\n            .then(resData => {\n                Helper.messageAfterRequest(1, resData, null, this.messages);\n                var saved = this.state.psetSaved;\n                saved = this.removePSetByID(saved, psetID);\n                this.setState({psetSaved: saved}, callback(0));\n            })\n            .catch(err => {\n                Helper.messageAfterRequest(0, err, null, this.messages);\n                callback(1);\n            });\n    }\n\n    cancelPSetRequest = (selectedPSet, callback) => {\n        var psetID = []\n        for(let i = 0; i < selectedPSet.length; i++){\n            psetID.push(selectedPSet[i]._id);\n        }\n        fetch('/api/pset/cancel', {\n            method: 'POST',\n            body: JSON.stringify({username: this.context.username, psetID: psetID}),\n            headers: {\n                'Content-type': 'application/json'\n            }\n        })\n            .then(res => res.json())\n            .then(resData => {\n                Helper.messageAfterRequest(1, resData, null, this.messages);\n                var inProcess = this.state.psetInProcess;\n                inProcess = this.removePSetByID(inProcess, psetID);\n                this.setState({psetInProcess: inProcess}, callback(0));\n            })\n            .catch(err => {\n                Helper.messageAfterRequest(0, err, null, this.messages);\n                callback(1);\n            });\n    }\n\n    findPSetByID(psetArray, id){\n        for(let i = 0; i < psetArray.length; i++){\n            if(psetArray[i]._id === id){\n                return(i)\n            }\n        }\n        return(-1);\n    }\n\n    removePSetByID(psets, selected){\n        for(let i = 0; i < selected.length; i++){\n            let index = this.findPSetByID(psets, selected[i]);\n            if(index > -1){\n                psets.splice(index, 1);\n            }\n        }\n        return(psets);\n    }\n\n    render(){   \n        return(\n            <div className='pageContent'>\n                <h2>Your Profile</h2>\n                <div className='userProfile'>\n                    <UserInfo />\n                    <div className='userPSetLists'>\n                        <Messages ref={(el) => this.messages = el} />\n                        <UserPSet heading='Your Saved PSets' btnLabel='Remove from List' \n                            pset={this.state.psetSaved} \n                            handleBtnClick={this.removeFromSavedList}\n                            messages={this.messages}\n                        />\n                        <UserPSet heading='Your PSet Requests in Process'\n                            pset={this.state.psetInProcess} \n                            pending={true}\n                        />\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default Profile;","import React, {useState, useEffect, useContext} from 'react';\nimport PSetTable from '../Shared/PSetTable';\nimport {Messages} from 'primereact/messages';\nimport {Button} from 'primereact/button';\nimport styled from 'styled-components';\nimport {trackPromise} from 'react-promise-tracker';\nimport Loader from 'react-loader-spinner';\nimport {AuthContext} from '../../context/auth';\n\nconst MenuContainer = styled.div`\n    display: flex;\n    align-items: center;\n    button {\n        margin-left: 20px;\n    }\n`\n\nconst Admin = props => {\n    \n    const auth = useContext(AuthContext);\n\n    const [data, setData] = useState({ready: false, psets: []})\n    const [selected, setSelected] = useState([])\n\n    useEffect(() => {\n        const getData = async () => {\n            const res = await trackPromise(fetch('/api/pset/search', {\n                method: 'POST',\n                body: JSON.stringify({status: 'complete'}),\n                headers: {'Content-type': 'application/json'}\n            }))\n            const json = await res.json()\n            setSelected(json.filter(p => {return p.canonical}))\n            setData({ready: true, psets: json})\n        }\n        getData()\n    }, [])\n\n    const updateCanonicalPSets = async (event) => {\n        event.preventDefault()\n        setData({...data, ready: false})\n        const res = await trackPromise(fetch('/api/pset/canonical/update', {\n            method: 'POST',\n            body: JSON.stringify({selected: selected}),\n            headers: {'Content-type': 'application/json'}\n        }))\n        const json = await res.json()\n        setSelected(json.filter(p => {return p.canonical}))\n        setData({ready: true, psets: json})\n    }\n\n    const handleSelectionChange = (selection) => {\n        setSelected(selection)\n    }\n    \n    return(\n        <div className='pageContent'>\n            <h2>Administrator's Menu</h2>\n            <Messages ref={(el) => Admin.messages = el} />\n            <MenuContainer>\n                <h3>Update Canonical PSets</h3>\n                <Button label='Update' type='submit' onClick={updateCanonicalPSets} />\n            </MenuContainer>\n            {\n                data.ready ?\n                <PSetTable \n                    allData={data.psets} selectedPSets={selected} \n                    updatePSetSelection={handleSelectionChange} scrollHeight='600px'\n                    authenticated={auth.authenticated}\n                    download={false}\n                /> \n                :\n                <Loader type=\"ThreeDots\" color=\"#3D405A\" height={100} width={100} />\n            }\n        </div>\n    )\n}\n\nexport default Admin","import React, {useState, useContext, useEffect} from 'react';\nimport {Button} from 'primereact/button';\nimport {InputText} from 'primereact/inputtext';\nimport {Messages} from 'primereact/messages';\nimport {AuthContext} from '../../context/auth';\n\nconst AuthForm = (props) => {\n    \n    const auth = useContext(AuthContext);\n    \n    const [email, setEmail] = useState('');\n    const [password, setPassword] = useState('');\n    const [passwordReg1, setPasswordReg1] = useState('');\n    const [passwordReg2, setPasswordReg2] = useState('');\n    const [userChecked, setUserChecked] = useState(false);\n    const [userExists, setUserExists] = useState(false);\n    const [userRegistered, setUserRegistered] = useState(false);\n    const [btnFindDisabled, setBtnFindDisabled] = useState(true);\n    const [btnLoginDisabled, setBtnLoginDisabled] = useState(true);\n    const [btnRegDisabled, setBtnRegDisabled] = useState(true);\n\n    useEffect(() => {\n        const regex = /^\\w+([.-]?\\w+)*@\\w+([.-]?\\w+)*(\\.\\w{2,3})+$/;\n        regex.test(email) ? setBtnFindDisabled(false) : setBtnFindDisabled(true);\n    }, [email]);\n\n    useEffect(() => {\n        password.length >= 6 ? setBtnLoginDisabled(false) : setBtnLoginDisabled(true);\n    }, [password]);\n\n    useEffect(() => {\n        passwordReg1.length >= 6 ?  passwordReg1 === passwordReg2 && setBtnRegDisabled(false) : setBtnRegDisabled(true);\n    }, [passwordReg1, passwordReg2])\n\n    const handleInputChange = (event) => {\n        var name = event.target.name;\n        switch(name){\n            case 'email':\n                setEmail(event.target.value);\n                break;\n            case 'password':\n                setPassword(event.target.value);\n                break;\n            case 'passwordReg1':\n                setPasswordReg1(event.target.value);\n                break;\n            case 'passwordReg2':\n                setPasswordReg2(event.target.value);\n                break;\n            default:\n                break;\n        }\n    }\n\n    const initialize = () => {\n        setEmail('');\n        setPassword('');\n        setPasswordReg1('');\n        setPasswordReg2('');\n        setUserChecked(false);\n        setUserExists(false);\n        setUserRegistered(false);\n        setBtnFindDisabled(true);\n        setBtnLoginDisabled(true);\n        setBtnRegDisabled(true);\n    }\n\n    const onFindClick = async (event) => {\n        event.preventDefault();\n        const api = '/api/user/check/?username=' + email;\n        const res = await fetch(api);\n        const json = await res.json();\n        if(res.ok){\n            setUserChecked(true);\n            setUserExists(json.exists);\n            setUserRegistered(json.registered);\n        }\n    }\n\n    const onLoginClick = async (event) => {\n        event.preventDefault();\n        const res = await fetch('/api/user/login', {\n            method: 'POST',\n            body: JSON.stringify({\n                user: { username: email, password: password }   \n            }),\n            headers: { 'Content-type': 'application/json' }\n        })\n        const data = await res.json();\n        if(data.authenticated){\n            console.log('authenticated');\n            initialize();\n            auth.setAuthToken(data);\n        }else{\n            AuthForm.messages.show({severity: 'error', summary: 'Login Failed', detail: 'Please re-enter your email and password.'});\n        }\n    }\n\n    const onRegisterClick = async (event) => {\n        event.preventDefault();\n        const res = await fetch('/api/user/register', {\n            method: 'POST',\n            body: JSON.stringify({\n                user: { username: email, password: passwordReg1, exists: userExists }\n            }),\n            headers: { 'Content-type': 'application/json' }\n        })\n        const data = await res.json();\n        if(res.status){\n            initialize();\n            auth.setAuthToken({authenticated: data.authenticated, username: data.username});\n        }else{\n            AuthForm.messages.show({severity: 'error', summary: 'Registration Failed', detail: data.message});\n        }\n    }\n\n    const onResetClick = async (event) => {\n        event.preventDefault()\n        console.log('reset click')\n        const res = await fetch('/api/user/reset/email', {\n            method: 'POST',\n            body: JSON.stringify({\n                email: email \n            }),\n            headers: { 'Content-type': 'application/json' }\n        })\n        const data = await res.json()\n        if(res.ok){\n            AuthForm.messages.show({severity: 'success', summary: 'Email has been sent.', detail: 'Please follow the link in the email to reset your password.'});\n        }else{\n            AuthForm.messages.show({severity: 'error', summary: 'An error occurred', detail: data.message});\n        }\n    }\n\n    const loginForm = () => {\n        return(\n            <React.Fragment>\n                <h4>Login with your password:</h4>\n                <div className='pwdMsg'>Password needs to be at least 6 characters in length</div>\n                <InputText className='pwdInput' type='password' name='password' value={password} onChange={handleInputChange}/>\n                <div>\n                    <Button label='Login' onClick={onLoginClick} disabled={btnLoginDisabled}/>\n                </div>\n                <div>\n                    <button className='forgotPasswordBtn' onClick={onResetClick}>Reset your password</button>\n                </div>\n            </React.Fragment>\n        );\n    }\n\n    const registerForm = () => {\n        return(\n            <React.Fragment>\n                <h4>{userExists ? 'Email is not registered. ': 'Email not found. '}Please register.</h4>\n                <div>\n                    <div className='pwdMsg'>Password needs to be at least 6 characters in length</div>\n                    <InputText className='pwdInput' type='password' name='passwordReg1' value={passwordReg1} onChange={handleInputChange}/>\n                </div>\n                <div>\n                    <label>Confirm your password:</label>\n                    <InputText className='pwdInput' type='password' name='passwordReg2' value={passwordReg2} onChange={handleInputChange}/>\n                </div>\n                <div>\n                    <Button label='Register' onClick={onRegisterClick} disabled={btnRegDisabled}/>\n                </div>\n            </React.Fragment>\n        );\n    }\n\n    \n    return(\n        <React.Fragment>\n            <h2>Login/Register</h2>\n            <Messages ref={(el) => AuthForm.messages = el}></Messages>\n            <h4>Enter your email:</h4>\n            <div className='emailInput'>\n                <InputText type='email' name='email' value={email} onChange={handleInputChange}/>\n                <Button className='btnLoginFind' label='Find' icon=\"pi pi-arrow-right\" onClick={onFindClick} disabled={btnFindDisabled}/>\n            </div>\n            { userChecked ? <div className='formContainer'>{userRegistered ? loginForm() : registerForm()}</div> : '' }\n        </React.Fragment>\n    );\n}\n\nexport default AuthForm;","import React, {useContext} from 'react';\nimport { Redirect } from 'react-router-dom';\nimport AuthForm from './AuthForm';\nimport './Login.css';\nimport {AuthContext} from '../../context/auth';\nimport {withRouter} from 'react-router';\n\nconst Login = (props) => {\n    const auth = useContext(AuthContext);\n    const { location } = props\n    const msg = location.state ? location.state.logoutMsg : undefined;\n\n    return(\n        <React.Fragment>\n            {auth.authenticated ? \n                    location.state && location.state.path !== '/' ? \n                    <Redirect to={location.state.path}/> \n                    :\n                    <Redirect to={'/Profile'}/> \n                : \n                <div className='pageContent'>\n                    <div className=\"loginRegContent\">\n                        <div className='logoutMsg'>{msg ? msg : ''}</div>\n                        <AuthForm />\n                    </div>   \n                </div>\n            }\n        </React.Fragment>\n    );\n}\n\nexport default withRouter(Login);","import React, {useState, useEffect} from 'react';\nimport {InputText} from 'primereact/inputtext';\nimport {Button} from 'primereact/button';\nimport {Messages} from 'primereact/messages';\nimport './Login.css';\n\nconst Reset = (props) => {\n\n    const [email, setEmail] = useState('')\n    const [password1, setPassword1] = useState('')\n    const [password2, setPassword2] = useState('')\n    const [btnDisabled, setBtnDisabled] = useState(true)\n\n    useEffect(() => {\n        const regex = /^\\w+([.-]?\\w+)*@\\w+([.-]?\\w+)*(\\.\\w{2,3})+$/;\n        (password1.length >= 6 && password1 === password2 && regex.test(email)) ? setBtnDisabled(false) : setBtnDisabled(true)\n    }, [email, password1, password2])\n\n    const onResetClick = async (event) => {\n        event.preventDefault()\n        const res = await fetch('/api/user/reset/token', {\n            method: 'POST',\n            body: JSON.stringify({\n                user: { \n                    username: email, \n                    password: password1,\n                    token: props.match.params.token \n                }   \n            }),\n            headers: { 'Content-type': 'application/json' }\n        })\n        const data = await res.json()\n        console.log(data)\n        if(data.status){\n            Reset.messages.show({severity: 'success', summary: 'Password has been reset', detail: 'Please login using your new password.'});\n        }else{\n            Reset.messages.show({severity: 'error', summary: 'Password could not be reset', detail: data.message});\n        }\n    }\n    \n    return(\n        <React.Fragment>\n            <div className='pageContent'>\n                <div className=\"loginRegContent\">\n                    <h2>Reset Password</h2>\n                    <Messages ref={(el) => Reset.messages = el}></Messages>\n                    <div className='emailInput'>\n                        <label>Email:</label>\n                        <InputText type='email' name='email' value={email} onChange={(e) => {setEmail(e.target.value)}}/>\n                    </div>\n                    <div className='formContainer'>\n                        <h4>Enter new password</h4>\n                        <div>\n                            <div className='pwdMsg'>Password needs to be at least 6 characters in length</div>\n                            <InputText className='pwdInput' type='password' name='password1' value={password1} onChange={(e) => {setPassword1(e.target.value)}}/>\n                        </div>\n                        <div>\n                            <label>Confirm new password:</label>\n                            <InputText className='pwdInput' type='password' name='password2' value={password2} onChange={(e) => {setPassword2(e.target.value)}}/>\n                        </div>\n                        <div>\n                            <Button label='Reset' onClick={onResetClick} disabled={btnDisabled}/>\n                        </div>\n                    </div>\n                </div> \n            </div>\n        </React.Fragment>\n    );\n}\n\nexport default Reset","import React from 'react';\nimport { TabHeader, TabContent, TabContentSection} from '../PSetStyle';\n\nclass DatasetTabContent extends React.Component{\n\n    render(){          \n        const publication = (\n            <div>    \n            {this.props.metadata.dataset.versionInfo.publication.length ? \n                this.props.metadata.dataset.versionInfo.publication.map((item) => \n                    <li key={item.link} className='pubList'>\n                        <div className='subContent'>{item.citation}</div>\n                        <br />\n                        <div className='subContent'><a href={item.link}>{item.link}</a></div>\n                    </li>\n                )\n                :\n                <div className=\"subContent\">\n                    Not available.\n                </div>\n                }  \n            </div> \n        );\n        \n        return(\n            <React.Fragment>\n                <TabHeader>Dataset: {this.props.metadata.dataset.label}</TabHeader>\n                <TabContent>\n                    <TabContentSection>\n                        <h3>Drug Sensitivity</h3>\n                        <h4 className='subContent'>Source: {\n                            this.props.metadata.dataset.versionInfo.drugSensitivity.source ? \n                            <a href={this.props.metadata.dataset.versionInfo.drugSensitivity.source}>{this.props.metadata.dataset.versionInfo.drugSensitivity.source}</a> \n                            : 'Not available'\n                            }\n                        </h4>\n                        <h4 className='subContent'>Version: {this.props.metadata.dataset.versionInfo.drugSensitivity.version}</h4>\n                    </TabContentSection>\n                    \n                    <TabContentSection>\n                        <h3>Publication: </h3>\n                        <ul>\n                            {publication}\n                        </ul> \n                    </TabContentSection>\n                    \n                    <TabContentSection>\n                        <h3>Genome Version</h3>\n                        <div className='subContent'>{this.props.metadata.genome.name ? this.props.metadata.genome.name : \"Not Available\"}</div>\n                    </TabContentSection>\n                </TabContent> \n            </React.Fragment>\n        );\n    }\n}\n\nexport default DatasetTabContent;","import React from 'react';\nimport { TabContentSection} from '../PSetStyle';\n\nconst getType = function(type){\n    switch(type){\n        case 'rna':\n            return 'Microarray'\n        case 'cnv':\n            return 'Copy Number Variation'\n        case 'mut':\n            return 'Mutation'\n        case 'fusion':\n            return 'Fusion'\n        default:\n            return ''\n    }\n}\n\nconst AccompanyDataTabContent = props => {\n    \n    return(\n        <React.Fragment>\n            {\n                props.data.map(d => {\n                    return(\n                        <div key={Math.random()}>\n                        {\n                            Array.isArray(d.source) ?\n                            d.source.map(s => {\n                                return(\n                                    <TabContentSection key={Math.random()}>\n                                        <h3>{s.label}</h3>\n                                        <h4 className='subContent'>Source: {<a href={s.source}>{s.source}</a>}</h4>\n                                    </TabContentSection>\n                                )\n                            })\n                            :\n                            <TabContentSection key={Math.random()}>\n                                <h3>{getType(d.type)}</h3>\n                                <h4 className='subContent'>Source: {<a href={d.source}>{d.source}</a>}</h4>\n                            </TabContentSection>\n                        }\n                        </div>\n                    )\n                })\n            }\n        </React.Fragment>    \n    )\n}\n\nexport default AccompanyDataTabContent","import React from 'react';\nimport {PSetToolAccordion, RNARefAccordion} from '../PSetAccordion';\nimport AccompanyDataTabContent from './AccompanyDataTabContent';\nimport { TabHeader, TabContent, TabContentSection} from '../PSetStyle';\n\nconst RNATabContent = props => {\n    const rawSeqDataRNA = props.metadata.find(x => x.name === 'rawSeqDataRNA')\n    const rnaRef = props.metadata.find(x => x.name === 'rnaRef')\n    const rnaTool = props.metadata.find(x => x.name === 'rnaTool')\n    const accRNA = props.metadata.find(x => x.name === 'accRNA')\n\n    return(\n        <React.Fragment>\n            <TabHeader>RNA Data</TabHeader>\n            <TabContent>\n                {\n                    rawSeqDataRNA &&\n                    <TabContentSection>\n                        <h3>Raw Data Source: </h3>\n                        <div className='subContent'>\n                            <a href={rawSeqDataRNA.value}>{rawSeqDataRNA.value}</a>\n                        </div>\n                    </TabContentSection>\n                }\n                {\n                    rnaRef &&\n                    <TabContentSection>\n                        <h3>RNA Transcriptome</h3>\n                        <RNARefAccordion items={rnaRef.value} />\n                    </TabContentSection>\n                }\n                {\n                    rnaTool &&\n                    <TabContentSection>\n                        <h3>Tools and Commands Used</h3>\n                        <PSetToolAccordion items={rnaTool.value} />\n                    </TabContentSection>\n                }\n                {\n                    accRNA &&\n                    <AccompanyDataTabContent data={accRNA.value} />\n                }\n            </TabContent>\n        </React.Fragment>\n    );\n}\n\nexport default RNATabContent;","import React from 'react';\nimport {PSetToolAccordion, DNARefAccordion} from '../PSetAccordion';\nimport AccompanyDataTabContent from './AccompanyDataTabContent';\nimport { TabHeader, TabContent, TabContentSection} from '../PSetStyle';\n\nconst DNATabContent = props => {\n    const rawSeqDataDNA = props.metadata.find(x => x.name === 'rawSeqDataDNA')\n    const dnaRef = props.metadata.find(x => x.name === 'dnaRef')\n    const dnaTool = props.metadata.find(x => x.name === 'dnaTool')\n    const accDNA = props.metadata.find(x => x.name === 'accDNA')\n\n    return(\n        <React.Fragment>\n            <TabHeader>DNA Data</TabHeader>\n            <TabContent>\n                {\n                    rawSeqDataDNA &&\n                    <TabContentSection>\n                        <h3>Raw Data Source: </h3>\n                        <div className='subContent'>\n                            <a href={rawSeqDataDNA.value}>{rawSeqDataDNA.value}</a>\n                        </div>\n                    </TabContentSection>\n                }\n                {\n                    dnaRef &&\n                    <TabContentSection>\n                        <h3>Exome Reference</h3>\n                        <DNARefAccordion items={dnaRef.value} />\n                    </TabContentSection>\n                }\n                {\n                    dnaTool &&\n                    <TabContentSection>\n                        <h3>Tools and Commands Used</h3>\n                        <PSetToolAccordion items={dnaTool.value} />\n                    </TabContentSection>\n                }\n                {\n                    accDNA &&\n                    <AccompanyDataTabContent data={accDNA.value} />\n                }\n            </TabContent>\n        </React.Fragment>\n    );\n}\n\nexport default DNATabContent;","import React from 'react';\nimport { TabHeader, TabContent, StyledAccordion} from '../PSetStyle';\nimport {Accordion,AccordionTab} from 'primereact/accordion';\nimport styled from 'styled-components';\n\nconst PipelineContent = styled.div`\n    display: flex;\n    align-items: center;\n    h3 {\n        margin-right: 10px;\n    }\n`\n\nconst PipelineTabContent = props => {\n    return(\n        <React.Fragment>\n            <TabHeader>Pipeline Data</TabHeader>\n            <TabContent>\n                <PipelineContent>\n                    <h3>Pachyderm CommitID:</h3>\n                    <div>{props.data.commitID}</div>\n                </PipelineContent>\n                <PipelineContent>\n                    <h3>Docker Image: </h3>\n                    <a target=\"_blank\" href={'https://hub.docker.com/r/' + props.data.config.transform.image.split(':')[0]}>\n                        {props.data.config.transform.image}\n                    </a>\n                </PipelineContent>\n                <PipelineContent>\n                    <h3>Pipeline Repository: </h3>\n                    <a target=\"_blank\" href={props.data.config.input.cross[0].git.url}>{props.data.config.input.cross[0].git.url}</a>\n                </PipelineContent>\n                <StyledAccordion>\n                    <AccordionTab header='Pipeline Configuration File'>\n                        <pre>\n                            {JSON.stringify(props.data.config, null, 2)}\n                        </pre>\n                    </AccordionTab>\n                </StyledAccordion>\n            </TabContent>\n        </React.Fragment> \n    )\n}\n\nexport default PipelineTabContent","import React from 'react';\nimport {Button} from 'primereact/button';\n\nconst DownloadPSetButton = props => {\n\n    const downloadPSet = async (event) => {\n        event.preventDefault();\n        \n        const anchor = document.createElement('a');\n        anchor.setAttribute('download', null);\n        anchor.style.display = 'none';\n        anchor.setAttribute('href', props.pset.downloadLink)\n        document.body.appendChild(anchor);\n        anchor.click();\n        document.body.removeChild(anchor);\n\n        await fetch('/api/pset/download', {\n            method: 'POST',\n            body: JSON.stringify({psetID: props.pset._id}),\n            headers: {'Content-type': 'application/json'}\n        })\n    }\n\n    return(\n        <Button label='Download' disabled={props.disabled} onClick={downloadPSet} style={{marginLeft: '30px'}}/>\n    );\n}\n\nexport default DownloadPSetButton;","import React, {useState, useEffect} from 'react';\nimport {TabView,TabPanel} from 'primereact/tabview';\nimport DatasetTabContent from './TabContents/DatasetTabContent';\nimport RNATabContent from './TabContents/RNATabContent';\nimport DNATabContent from './TabContents/DNATabContent';\nimport PipelineTabContent from './TabContents/PipelineTabContent';\nimport {GeneralInfoAccordion} from './PSetAccordion';\nimport DownloadPSetButton from '../Shared/Buttons/DownloadPSetButton';\nimport {TabContainer} from './PSetStyle';\nimport styled from 'styled-components';\n\nconst StyledTitle = styled.div`\n    display: flex;\n    align-items: baseline;\n`\n\nconst PSet = (props) => {\n    const [pset, setPSet] = useState({})\n    const [ready, setReady] = useState(false)\n    const [error, setError] = useState(false)\n\n    useEffect(() => {\n        const getData = async () => {\n            let apiStr = '/api/pset/one/' + props.match.params.id1 + '/' + props.match.params.id2;\n            try{\n                const res = await fetch(apiStr)\n                if(res.ok){\n                    const json = await res.json()\n                    console.log(json)\n                    setPSet(json)\n                    setReady(true)\n                }else{\n                    setError(true)\n                }\n            }catch(error){\n                console.log(error)\n                setError(true)\n            } \n        }\n        getData()\n    }, [])\n\n    return(\n        <div className='pageContent'>\n            {\n                ready &&\n                <React.Fragment>\n                    <StyledTitle>\n                        <h2>Explore PSet - {pset.name}</h2>\n                        <DownloadPSetButton disabled={false} pset={pset} />\n                    </StyledTitle>\n                    <GeneralInfoAccordion data={pset.generalInfo}/>\n                    <TabContainer>\n                        <TabView renderActiveOnly={false}>\n                            {\n                                pset.tabData.map(td => (\n                                    <TabPanel key={Math.random()} header={td.header}>\n                                        {td.header === 'Dataset' && <DatasetTabContent metadata={td.data} />}\n                                        {td.header === 'RNA' && <RNATabContent metadata={td.data} />}\n                                        {td.header === 'DNA' && <DNATabContent metadata={td.data} />}\n                                        {td.header === 'Pipeline' && <PipelineTabContent data={td.data} />}\n                                    </TabPanel>\n                                ))\n                            }\n                        </TabView>\n                    </TabContainer>\n                </React.Fragment>\n            } \n            { error && <h3>PSet with the specified DOI could not be found</h3>}\n        </div>\n    );\n}\n\nexport default PSet;","import React, {useState, useEffect} from 'react';\nimport { Accordion, AccordionTab } from 'primereact/accordion';\nimport { Link } from 'react-router-dom';\nimport styled from 'styled-components'\n\nconst StyledContainer = styled.div`\n    margin-bottom: 20px;\n    border-radius: 10px;\n    padding-top: 5px;\n    padding-left: 30px;\n    padding-right: 30px;\n    padding-bottom: 30px;\n    background-color: rgba(255, 255, 255, 0.8);\n`\n\nconst StyledTable = styled.table`   \n    margin-left: 30px;\n    margin-bottom: 10px;\n    .psetName {\n        font-size: 16px;\n    }\n    .rnaRefColumn {\n        width: 30%;\n    }\n    td {\n        width: 20%;\n        margin: 0;\n        padding-right: 50px;\n        padding-bottom: 10px;\n        font-size: 14px;\n        font-family: arial, san-serif;\n    }\n    td .bold {\n        font-weight: bold;\n    }\n`\n\nconst NonCanonDiv = styled.div`\n    margin-left: 30px;\n    width: 60%;\n`\n\nconst NonCannonTable = styled.table`\n    td {\n        margin: 0;\n        padding-right: 30px;\n        padding-bottom: 10px;\n    }\n`\n\nconst PSetContainer = styled.div`\n    margin-bottom: 30px;\n    padding-bottom: 30px;\n    border-bottom: 1px solid #999999;\n`\n\nconst CanonicalPSets = (props) => {\n    \n    const [canonPSets, setCanonPSets] = useState([])\n    \n    useEffect(() => {\n        const getData = async () => {\n            const res = await fetch('/api/pset/canonical')\n            const json = await res.json()\n            console.log(json)\n            setCanonPSets(json)\n        }\n        getData()\n    }, [])\n\n    const toolsRefTemplate = (array) => {\n        let output ='Not Available';\n        if(array.length){\n            output = array.map(item => <div key={item.name}>{item.label}</div>);\n        }\n        return(\n            <div>{output}</div>\n        );\n    }\n\n    const nameColumnTemplate = (data) => {\n        let route = '/' + data.doi;\n        return(\n            <Link to={route} target=\"_blank\">{data.name}</Link>\n        );\n    }\n\n    const canonTable = (psets) => (\n        <StyledTable>\n            <tbody>\n            {psets.map(pset => {\n                return(\n                    <tr key={pset.name}>\n                        <td className='psetName'>{nameColumnTemplate(pset)}</td>\n                        <td><div>Drug Sensitivity Data:</div> <span className='bold'>{pset.dataset.versionInfo}</span></td>\n                        <td>RNA Tools: <span className='bold'>{toolsRefTemplate(pset.rnaTool)}</span></td>\n                        <td className='rnaRefColumn'>RNA Ref: <span className='bold'>{toolsRefTemplate(pset.rnaRef)}</span></td>\n                    </tr>\n                )\n            })}\n            </tbody>\n        </StyledTable>    \n    )\n\n    const nonCanonTable = (psets) => (\n        <NonCannonTable>\n            <tbody>\n            {psets.map(pset => {\n                return(\n                    <tr key={pset.name}>\n                        <td className='psetName'>{nameColumnTemplate(pset)}</td>\n                        <td><div>Drug Sensitivity Data:</div> {pset.dataset.versionInfo}</td>\n                        <td>RNA Tools: {toolsRefTemplate(pset.rnaTool)}</td>\n                        <td className='rnaRefColumn'>RNA Ref: {toolsRefTemplate(pset.rnaRef)}</td>\n                    </tr>\n                )\n            })}\n            </tbody>\n        </NonCannonTable> \n    )\n\n    return(\n        <div className='pageContent'>\n            <h2>List of Canonical PSets (The Latest Version of PSets Created by BHK Lab)</h2>\n            <StyledContainer>\n            {\n                canonPSets.map(dataset => (\n                    <PSetContainer key={dataset.dataset}>\n                        <h4>{dataset.dataset}</h4>\n                        {canonTable(dataset.canonicals)}  \n                        {\n                            dataset.nonCanonicals.length ?\n                            <NonCanonDiv>\n                                <Accordion>\n                                    <AccordionTab header='Other Versions'>\n                                        {nonCanonTable(dataset.nonCanonicals)}\n                                    </AccordionTab>\n                                </Accordion>\n                            </NonCanonDiv>\n                            :\n                            ''\n                        }\n                    </PSetContainer>    \n                ))\n            }\n            </StyledContainer>\n        </div>\n    )\n}\n\nexport default CanonicalPSets","import React from 'react';\n\nconst NotFound404 = (props) => {\n\n    return(\n        <React.Fragment>\n            <div className='pageContent'>\n                <h2>The page you are looking for could not be found.</h2>\n            </div>\n        </React.Fragment>\n    );\n}\n\nexport default NotFound404;","import React from 'react';\nimport { Route, Switch } from 'react-router-dom';\nimport { AuthContext } from \"../../context/auth\";\nimport Navigation from '../Navigation/Navigation';\nimport Footer from '../Footer/Footer';\nimport PrivateRoute from './PrivateRoute';\nimport AdminRoute from './AdminRoute';\nimport Main from '../Main/Main';\nimport PSetSearch from '../PSetSearch/PSetSearch';\nimport Dashboard from '../Dashboard/Dashboard';\nimport Stats from '../Stats/Stats';\nimport Documentation from '../Documentation/Documentation';\nimport Tutorial from '../Documentation/Support/Tutorial';\nimport Profile from '../Profile/Profile';\nimport Admin from '../Admin/Admin';\nimport Login from '../Authentication/Login';\nimport Reset from '../Authentication/Reset';\nimport PSet from '../PSet/PSet';\nimport CanonicalPSets from '../CanonicalPSets/CanonicalPSets';\nimport NotFound404 from '../Shared/NotFound404';\n\nclass Router extends React.Component{\n    constructor(){\n        super();\n        this.state = {\n            authenticated: false,\n            isAdmin: false,\n            username: '',\n            setAuthToken: (value) => {\n                this.setState({\n                    authenticated: value.authenticated,\n                    username: value.username,\n                    isAdmin: value.isAdmin\n                });\n            },\n            resetAuthToken: () => {\n                this.setState({\n                    authenticated: false,\n                    isAdmin: false,\n                    user: ''\n                });\n            }\n        }\n    }\n\n    componentDidMount(){\n        if(!this.state.authenticated){\n            fetch('/api/user/checkToken')\n            .then(res => {\n                return(res.json());\n            })\n            .then(data => {this.state.setAuthToken(data)});\n        }\n    }\n\n    render(){\n        return(\n            <AuthContext.Provider value={this.state}>\n                <Navigation />\n                <Switch>\n                    <Route exact path ='/' component={Main} /> \n                    <Route exact path ='/PSetSearch' component={PSetSearch}/>\n                    <Route exact path ='/Dashboard' component={Dashboard}/>\n                    <Route exact path ='/Stats' component={Stats}/>\n                    <Route exact path ='/Documentation' component={Documentation}/>\n                    <Route exact path ='/Tutorial' component={Tutorial}/>\n                    <Route exact path='/Authentication' component={Login} />\n                    <Route path ='/Reset/:token' component={Reset} />\n                    <Route path='/:id1/:id2' component={PSet} />\n                    <Route path='/Canonical' component={CanonicalPSets} />\n                    <PrivateRoute path='/Profile' component={Profile} redirect='/Authentication' />\n                    <AdminRoute path='/admin' component={Admin} redirect='/profile' />\n                    <Route component={NotFound404}/>\n                </Switch>\n                <Footer />\n            </AuthContext.Provider>\n        );\n    }\n}\n\nexport default Router;","import React, {useEffect} from 'react';\nimport ReactGA from 'react-ga';\nimport './App.css';\nimport './PrimeStyle.css';\nimport Router from '../Routing/Router';\n\nconst App = () => {\n\t\n\t// Google Analytics set up\n\tuseEffect(() => {\n\t\tReactGA.initialize('UA-102362625-2')\n\t\tReactGA.pageview(window.location.pathname + window.location.search)\n\t}, [])\n\t\n\treturn (\n\t\t<div className=\"App\">\n\t\t\t<Router />\n\t\t</div>\n\t)\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport 'primereact/resources/themes/nova-light/theme.css';\nimport 'primereact/resources/primereact.min.css';\nimport 'primeicons/primeicons.css';\nimport App from './components/App/App';\nimport { BrowserRouter } from 'react-router-dom';\nimport * as serviceWorker from './components/serviceWorker';\n\nReactDOM.render((\n    <BrowserRouter>\n        <App />\n    </BrowserRouter>\n), document.getElementById('root'));\n\nserviceWorker.unregister();\n"],"sourceRoot":""}