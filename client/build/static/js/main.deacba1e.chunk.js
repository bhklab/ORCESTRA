(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{115:function(e,t,a){},116:function(e,t,a){},117:function(e,t,a){},119:function(e,t,a){},125:function(e,t,a){},150:function(e,t,a){},151:function(e,t,a){},152:function(e,t,a){},153:function(e,t,a){},154:function(e,t,a){},156:function(e,t,a){},157:function(e,t,a){},158:function(e,t,a){},161:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),r=a(23),l=a.n(r),i=(a(64),a(65),a(66),a(67),a(3)),c=a(4),o=a(6),u=a(5),m=a(7),d=a(10),p=a(26),h=Object(n.createContext)(),f=a(31);function b(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var v=function(e){function t(){return Object(i.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;fetch("/user/checkToken").then((function(e){return 200===e.status?e.json():{authenticated:!1,username:""}})).then((function(t){e.context.setAuthToken(t)}))}},{key:"render",value:function(){var e=this,t=this.context;return s.a.createElement(p.b,{exact:!0,path:this.props.path,render:function(a){return t.authenticated?s.a.cloneElement(e.props.component,function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?b(a,!0).forEach((function(t){Object(f.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):b(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},a)):s.a.createElement(p.a,{to:{pathname:e.props.redirect,state:{path:e.props.path}}})}})}}]),t}(s.a.Component);v.contextType=h;var E=v,g=(a(72),a(73),a(8)),S=a.n(g),y=a(16),O=a(11),N=a(13),j=(a(76),a(51)),C=function(e){var t=Object(n.useContext)(h),a=Object(n.useState)(!1),r=Object(O.a)(a,2),l=r[0],i=r[1];Object(n.useEffect)((function(){(function(){var e=Object(y.a)(S.a.mark((function e(){var t,a;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/pachyderm/status");case 2:return t=e.sent,e.next=5,t.json();case 5:a=e.sent,i(a.isOnline);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]);var c=function(t){t.preventDefault(),e.routing.history.push({pathname:"/Authentication",state:{path:e.routing.path}})},o=function(a){a.preventDefault(),console.log(e.routing),fetch("/user/logout/:"+t.username).then((function(a){t.resetAuthToken(),e.routing.history.push({pathname:"/Authentication",state:{path:e.routing.location.pathname,logoutMsg:"You have logged out"}})}))};return s.a.createElement(s.a.Fragment,null,s.a.createElement("header",null,s.a.createElement(d.c,{exact:!0,to:"/"},s.a.createElement("img",{src:"/images/trumpet-orcestra.png",alt:""})),s.a.createElement("div",{className:"navBarContainer"},s.a.createElement("div",{className:"navBar"},s.a.createElement("div",null,s.a.createElement(d.c,{exact:!0,to:"/",activeClassName:"active-link"},"Home")),s.a.createElement("div",null,s.a.createElement(d.c,{exact:!0,to:"/PSetSearch",activeClassName:"active-link"},"Search and Request")),s.a.createElement("div",null,s.a.createElement(d.c,{exact:!0,to:"/Dashboard",activeClassName:"active-link"},"Dashboard")),s.a.createElement("div",null,s.a.createElement(d.c,{exact:!0,to:"/Documentation",activeClassName:"active-link"},"Documentation")),t.authenticated&&s.a.createElement("div",{className:"menu-item"},s.a.createElement(d.c,{exact:!0,to:"/Profile",activeClassName:"active-link"},"Profile")),s.a.createElement("div",null,t.authenticated?s.a.createElement(N.Button,{label:"Logout",onClick:o}):s.a.createElement(N.Button,{label:"Login/Register",onClick:c})),s.a.createElement("div",null,l?s.a.createElement("div",{className:"pachydermStatus isOnline"},s.a.createElement("div",{className:"icon"},s.a.createElement("i",{className:"pi pi-check"})),s.a.createElement("div",{className:"text"},"Pachyderm is ",s.a.createElement("br",null),"online")):s.a.createElement("span",{className:"pachydermStatus isOffline"},s.a.createElement("div",{className:"icon"},s.a.createElement("i",{className:"pi pi-ban"})),s.a.createElement("div",{className:"text"},"Pachyderm is ",s.a.createElement("br",null),"offline")))),s.a.createElement("div",{className:"burgerNav"},s.a.createElement(j.slide,{width:200,isOpen:!0},s.a.createElement("div",{className:"menu-item"},s.a.createElement(d.c,{exact:!0,to:"/",activeClassName:"active-link"},"Home")),s.a.createElement("div",{className:"menu-item"},s.a.createElement(d.c,{exact:!0,to:"/PSetSearch",activeClassName:"active-link"},"Search and Request")),s.a.createElement("div",null,s.a.createElement(d.c,{exact:!0,to:"/Dashboard",activeClassName:"active-link"},"Dashboard")),s.a.createElement("div",null,s.a.createElement(d.c,{exact:!0,to:"/Documentation",activeClassName:"active-link"},"Documentation")),t.authenticated&&s.a.createElement("div",{className:"menu-item"},s.a.createElement(d.c,{exact:!0,to:"/Profile",activeClassName:"active-link"},"Profile")),s.a.createElement("div",{className:"menu-item"},t.authenticated?s.a.createElement(N.Button,{label:"Logout",onClick:o}):s.a.createElement(N.Button,{label:"Login/Register",onClick:c}))))),s.a.createElement("div",{className:"loggedIn"},t.authenticated?"Logged in as: "+t.username:"")))},w=a(29),P=a(15),D=(a(115),function(e){var t=Object(n.useState)([]),a=Object(O.a)(t,2),r=a[0],l=a[1],i=Object(n.useState)({dataset:[],rnaTool:[],dnaTool:[]}),c=Object(O.a)(i,2),o=c[0],u=c[1],m=Object(n.useState)(0),p=Object(O.a)(m,2),h=(p[0],p[1]),f=Object(n.useState)({pending:0,inProcess:0}),b=Object(O.a)(f,2),v=b[0],E=b[1];Object(n.useEffect)((function(){(function(){var e=Object(y.a)(S.a.mark((function e(t){var a,n;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:return a=e.sent,e.next=5,a.json();case 5:n=e.sent,console.log(n),l(n.pset),u(n.form[0]),h(n.user),E(n.dashboard);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}})()("/landing/data")}),[]);return s.a.createElement("div",{className:"mainContent"},s.a.createElement("div",{className:"home"},s.a.createElement("h1",null,"ORCESTRA"),s.a.createElement("h2",null,"Orchestration platform for reproducing pharmacogenomic analyses"),s.a.createElement("div",{className:"mainMenuContainer"},s.a.createElement("div",{className:"mainMenuRow"},s.a.createElement("div",{className:"mainMenuColumn"},s.a.createElement("div",{className:"mainMenuItem"},s.a.createElement("h2",null,"Search and Request PSets"),s.a.createElement("div",{className:"mainMenuItemContent"},s.a.createElement("div",null,"Design your own PSet using:"),s.a.createElement("div",{className:"mainMenuItemLine"},s.a.createElement("span",{className:"largeNum"},o.dataset.length)," ",s.a.createElement("span",null,"Datasets.")),s.a.createElement("div",{className:"mainMenuItemLine"},s.a.createElement("span",{className:"largeNum"},o.rnaTool.length)," ",s.a.createElement("span",null,"RNA tools.")),s.a.createElement("div",{className:"mainMenuItemLine"},s.a.createElement("span",{className:"largeNum"},o.dnaTool.length)," ",s.a.createElement("span",null,"DNA tools.")),s.a.createElement("div",{className:"mainMenuLink"},s.a.createElement("a",{className:"button",href:"/PSetSearch"},"Search and Request"))))),s.a.createElement("div",{className:"mainMenuColumn"},s.a.createElement("div",{className:"mainMenuItem",style:{alignSelf:"flex-start"}},s.a.createElement("h2",null,"View PSet Request Status"),s.a.createElement("div",{className:"mainMenuItemContent"},s.a.createElement("div",null,"ORCESTRA is processing following requests:"),s.a.createElement("div",{className:"mainMenuItemLine"},s.a.createElement("span",{className:"largeNum"},v.pending)," ",s.a.createElement("span",null,"Requests in queue.")),s.a.createElement("div",{className:"mainMenuItemLine"},s.a.createElement("span",{className:"largeNum"},v.inProcess)," ",s.a.createElement("span",null,"Requests in process.")),s.a.createElement("div",{className:"mainMenuLink"},s.a.createElement("a",{className:"button",href:"/Dashboard"},"View Dashboard"))))),s.a.createElement("div",{className:"mainMenuColumn"},s.a.createElement("div",{className:"mainMenuItem"},s.a.createElement("h2",null,"Top 5 Popular PSets"),s.a.createElement("div",{className:"mainMenuItemContent"},s.a.createElement(w.DataTable,{value:r},s.a.createElement(P.Column,{className:"textField",field:"download",header:"Download"}),s.a.createElement(P.Column,{className:"textField",field:"name",header:"Name",body:function(e,t){var a="/"+e.doi;return s.a.createElement(d.b,{to:a},e.name)}})),s.a.createElement("div",{className:"mainMenuLink"},s.a.createElement("a",{className:"button",href:"/Stats"},"View Statistics")))))))))}),k=(a(116),function(e){return s.a.createElement("div",{className:"appFooter"},s.a.createElement("div",{className:"footerContainer"},s.a.createElement("div",{className:"footerMenu footerLinks"},s.a.createElement("h3",null,"Menu"),s.a.createElement(d.c,{exact:!0,to:"/PSetSearch"},"Search and Request"),s.a.createElement(d.c,{exact:!0,to:"/Dashboard"},"Dashboard"),s.a.createElement(d.c,{exact:!0,to:"/Stats"},"Statistics")),s.a.createElement("div",{className:"footerSupport footerLinks"},s.a.createElement("h3",null,"Support"),s.a.createElement(d.c,{exact:!0,to:"/Documentation"},"Documentation"),s.a.createElement("a",{href:"https://github.com/bhklab"},"GitHub"),s.a.createElement("a",{href:"https://bhklab.ca/"},"BHKLab")),s.a.createElement("div",{className:"footerContact"},s.a.createElement("h3",null,"BHKLab"),s.a.createElement("div",{className:"contactInfo"},"The MaRS center",s.a.createElement("br",null),"101 College St, Toronto ON"," ",s.a.createElement("br",null),"TMDT RM 11-310"))))}),R=function(e){function t(){return Object(i.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"App"},s.a.createElement(C,{routing:this.props}),s.a.createElement(D,null),s.a.createElement(k,null))}}]),t}(s.a.Component),T=a(2),x=(a(117),a(52));function A(e){if(!q(e.dataType))return!0;if(1===e.dataType.length){if(!("RNA"!==e.dataType[0]||q(e.rnaRef)&&q(e.rnaTool)))return!0;if("DNA"===e.dataType[0]&&(!q(e.dnaRef)||!q(e.dnaTool)))return!0}else{if(!q(e.rnaRef))return!0;if(!q(e.dnaRef))return!0;if(!q(e.rnaTool))return!0;if(!q(e.dnaTool))return!0}return!q(e.genome)||(!q(e.dataset)||(!function(e){if("undefined"===typeof e||null===e)return!1;if(0===e.length)return!1;return!0}(e.name)||!function(e){if("undefined"===typeof e||null===e)return!1;if(0===e.length)return!1;if(!/^\w+([.-]?\w+)*@\w+([.-]?\w+)*(\.\w{2,3})+$/.test(e))return!1;return!0}(e.email)))}function q(e){return"undefined"!==typeof e&&null!==e&&!(Array.isArray(e)&&!e.length)}function I(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3?arguments[3]:void 0;a&&a(),e?n.show({severity:"success",summary:t.summary,detail:t.message}):n.show({severity:"error",summary:"An error occured",detail:t.toString(),sticky:!0})}function M(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=[];if("undefined"===typeof e||null===e)return a;if(0===Object.keys(e).length&&e.constructor===Object)return a;if(Array.isArray(e)){if(t)for(var n=0;n<e.length;n++)a.push(e[n].version);else for(var s=0;s<e.length;s++)a.push(e[s].name);return a}return t?a.push(e.version):a.push(e.name),a}function F(e,t){var a="";if(t.length>0)for(var n=0;n<t.length;n++)a+=e+"="+t[n],n<t.length-1&&(a+="&");return a}function B(e,t){fetch(e).then((function(e){return e.json()})).then((function(e){t(e)}))}a(119);var L=a(53),H=a(54),V=function(e){function t(){return Object(i.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=function(e){return s.a.createElement("div",{className:""},s.a.createElement("span",{style:{fontSize:"1em",margin:"1em .5em 0 0"}},e.label))};return this.props.isHidden?null:this.props.selectOne?s.a.createElement("div",{className:this.props.className},s.a.createElement("label",null,this.props.parameterName),s.a.createElement(H.Dropdown,{id:this.props.id,className:"paramInput",optionLabel:"label",value:this.props.selectedParameter,options:this.props.parameterOptions,onChange:this.props.handleUpdateSelection,filter:!0,itemTemplate:e,placeholder:"Select one...",disabled:this.props.disabled})):s.a.createElement("div",{className:this.props.className},s.a.createElement("label",null,this.props.parameterName),s.a.createElement(L.MultiSelect,{id:this.props.id,className:"paramInput",optionLabel:"label",value:this.props.selectedParameter,options:this.props.parameterOptions,onChange:this.props.handleUpdateSelection,filter:!0,itemTemplate:e,selectedItemTemplate:function(e){return e?s.a.createElement("div",{className:"my-multiselected-item-token"},s.a.createElement("span",null,e.label)):s.a.createElement("span",null,"Select...")},disabled:this.props.disabled}))}}]),t}(s.a.Component),U=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(o.a)(this,Object(u.a)(t).call(this))).state={drugSensitivityOptions:[],rnaRefOptions:[],dnaRefOptions:[],hideRNAToolRef:!1,hideDNAToolRef:!1,isReady:!1},e.handleFilterChange=e.handleFilterChange.bind(Object(T.a)(e)),e.setToolState=e.setToolState.bind(Object(T.a)(e)),e.setRefState=e.setRefState.bind(Object(T.a)(e)),e}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.setState({rnaRefOptions:this.props.formData.rnaRef,dnaRefOptions:this.props.formData.dnaRef,isReady:!0})}},{key:"handleFilterChange",value:function(){var e=Object(y.a)(S.a.mark((function e(t){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,this.props.setParentState([{name:t.target.id,value:t.value}]);case 3:if("dataType"!==t.target.id){e.next=7;break}this.setToolState(t),e.next=16;break;case 7:if("genome"!==t.target.id){e.next=11;break}this.setRefState(t),e.next=16;break;case 11:if("dataset"!==t.target.id){e.next=16;break}return console.log(t.value),this.setState({drugSensitivityOptions:[t.value.drugSensitivity]}),e.next=16,this.props.setParentState([{name:"drugSensitivity",value:t.value.drugSensitivity}]);case 16:this.props.autoUpdate&&this.props.requestUpdate();case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"setToolState",value:function(){var e=Object(y.a)(S.a.mark((function e(t){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(1!==t.value.length){e.next=12;break}if("RNA"!==this.props.parameters.dataType[0].name){e.next=7;break}return this.setState({hideDNAToolRef:!0}),e.next=5,this.props.setParentState([{name:"dnaTool",value:[]},{name:"dnaRef",value:[]}]);case 5:e.next=10;break;case 7:return this.setState({hideRNAToolRef:!0}),e.next=10,this.props.setParentState([{name:"rnaTool",value:[]},{name:"rnaRef",value:[]}]);case 10:e.next=13;break;case 12:this.setState({hideDNAToolRef:!1,hideRNAToolRef:!1});case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"setRefState",value:function(){var e=Object(y.a)(S.a.mark((function e(t){var a,n,s,r=this;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==t.value.length){e.next=4;break}this.setState({dnaRefOptions:this.props.formData.dnaRef,rnaRefOptions:this.props.formData.rnaRef}),e.next=9;break;case 4:return a=this.props.parameters.dnaRef,n=this.props.parameters.rnaRef,Array.isArray(this.props.parameters.genome)?(s=this.props.parameters.genome.map((function(e){return e.name})),a=a.filter((function(e){return s.includes(e.genome)&&e})),n=n.filter((function(e){return s.includes(e.genome)&&e})),this.setState({dnaRefOptions:this.props.formData.dnaRef.filter((function(e){return s.includes(e.genome)&&e})),rnaRefOptions:this.props.formData.rnaRef.filter((function(e){return s.includes(e.genome)&&e}))})):(a=a.filter((function(e){return r.props.parameters.genome.name===e.genome&&e})),n=n.filter((function(e){return r.props.parameters.genome.name===e.genome&&e})),this.setState({dnaRefOptions:this.props.formData.dnaRef.filter((function(e){return r.props.parameters.genome.name===e.genome&&e})),rnaRefOptions:this.props.formData.rnaRef.filter((function(e){return r.props.parameters.genome.name===e.genome&&e}))})),e.next=9,this.props.setParentState([{name:"dnaRef",value:a},{name:"rnaRef",value:n}]);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){return this.state.isReady?s.a.createElement(s.a.Fragment,null,s.a.createElement(V,{id:"dataType",className:this.props.dropdownClassName,isHidden:!1,parameterName:"Data Type:",parameterOptions:this.props.formData.dataType,selectedParameter:this.props.parameters.dataType,handleUpdateSelection:this.handleFilterChange}),s.a.createElement(V,{id:"dataset",className:this.props.dropdownClassName,isHidden:!1,parameterName:"Dataset:",selectOne:this.props.selectOne,parameterOptions:this.props.formData.dataset,selectedParameter:this.props.parameters.dataset,handleUpdateSelection:this.handleFilterChange}),s.a.createElement(V,{id:"genome",className:this.props.dropdownClassName,isHidden:!1,parameterName:"Genome:",selectOne:this.props.selectOne,parameterOptions:this.props.formData.genome,selectedParameter:this.props.parameters.genome,handleUpdateSelection:this.handleFilterChange}),s.a.createElement(V,{id:"rnaTool",className:this.props.dropdownClassName,isHidden:this.state.hideRNAToolRef,parameterName:"RNA Tool:",parameterOptions:this.props.formData.rnaTool,selectedParameter:this.props.parameters.rnaTool,handleUpdateSelection:this.handleFilterChange}),s.a.createElement(V,{id:"rnaRef",className:this.props.dropdownClassName,isHidden:this.state.hideRNAToolRef,parameterName:"RNA Ref:",parameterOptions:this.state.rnaRefOptions,selectedParameter:this.props.parameters.rnaRef,handleUpdateSelection:this.handleFilterChange}),s.a.createElement(V,{id:"dnaTool",className:this.props.dropdownClassName,isHidden:this.state.hideDNAToolRef,parameterName:"DNA Tool:",parameterOptions:this.props.formData.dnaTool,selectedParameter:this.props.parameters.dnaTool,handleUpdateSelection:this.handleFilterChange}),s.a.createElement(V,{id:"dnaRef",className:this.props.dropdownClassName,isHidden:this.state.hideDNAToolRef,parameterName:"DNA Ref:",parameterOptions:this.state.dnaRefOptions,selectedParameter:this.props.parameters.dnaRef,handleUpdateSelection:this.handleFilterChange})):s.a.createElement("div",null)}}]),t}(s.a.Component),J=(a(125),function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(o.a)(this,Object(u.a)(t).call(this))).setRequestView=function(t){e.props.setRequestView(t.value)},e.state={psetRequestMode:!1},e.sendFilterPSetRequest=e.sendFilterPSetRequest.bind(Object(T.a)(e)),e.setRequestView=e.setRequestView.bind(Object(T.a)(e)),e}return Object(m.a)(t,e),Object(c.a)(t,[{key:"sendFilterPSetRequest",value:function(){var e=this,t=function(e){var t="/pset?status=complete&",a=[];a.push(F("dtp",e.datatype)),a.push(F("dsv",e.datasetVersion)),a.push(F("dsn",e.datasetName)),a.push(F("gnm",e.genome)),a.push(F("rnat",e.rnaTool)),a.push(F("dnat",e.dnaTool)),a.push(F("rnar",e.rnaRef)),a.push(F("dnar",e.dnaRef)),a.push(F("dst",e.drugSensitivity));for(var n=0;n<a.length;n++)a[n].length>0&&(t+=a[n]+"&");return t=t.replace(/&$/,"")}(function(e){var t={};return t.datatype=M(e.dataType),t.datasetName=M(e.dataset),t.datasetVersion=M(e.dataset,!0),t.genome=M(e.genome),t.rnaTool=M(e.rnaTool),t.dnaTool=M(e.dnaTool),t.rnaRef=M(e.rnaRef),t.dnaRef=M(e.dnaRef),t.drugSensitivity=M(e.drugSensitivity,!0),t}(this.props.parameters));console.log(t);var a="/pset"===t||"/pset?"===t;B(t,(function(t){e.props.updateAllData(t,a)}))}},{key:"render",value:function(){return s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"pSetFilterContainer"},s.a.createElement("div",{className:"pSetFilter"},s.a.createElement("h2",null,"PSet Parameters"),s.a.createElement("div",{className:"filterSet"},s.a.createElement("label",{className:"bold"},"Request PSet: "),s.a.createElement(x.InputSwitch,{checked:this.props.isRequest,tooltip:"Turn this on to request a PSet.",onChange:this.setRequestView})),s.a.createElement(U,{autoUpdate:!0,setParentState:this.props.setParentState,requestUpdate:this.sendFilterPSetRequest,parameters:this.props.parameters,formData:this.props.formData,dropdownClassName:"filterSet",selectOne:this.props.isRequest}))))}}]),t}(s.a.Component));function z(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var Y=function(e){var t=Object(n.useContext)(h),a=Object(n.useState)({rows:10,first:0,start:0,end:10,totalRecords:0,loading:!0}),r=Object(O.a)(a,2),l=r[0],i=r[1];Object(n.useEffect)((function(){i(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?z(a,!0).forEach((function(t){Object(f.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):z(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},l,{loading:!1}))}),[]);var c=function(e,t){return function(a){a.preventDefault(),console.log("downloadOnePSet"),function(e){console.log("downloadOnePSet: "+e);var t=[e];fetch("/pset/download",{method:"POST",body:JSON.stringify({psetIDs:t}),headers:{"Content-type":"application/json"}}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))}(e);var n=document.createElement("a");n.setAttribute("download",null),n.style.display="none",n.setAttribute("href",t),document.body.appendChild(n),n.click(),document.body.removeChild(n)}},o=function(e,t){var a="";return e[t.field]&&(a=e[t.field].map((function(e){return s.a.createElement("div",{key:e.name},e.name)}))),s.a.createElement("div",null,a)};return s.a.createElement(w.DataTable,{value:e.allData,selection:e.selectedPSets,onSelectionChange:function(t){e.updatePSetSelection(t.value)},paginator:!0,rows:l.rows,scrollable:!0},t.authenticated&&s.a.createElement(P.Column,{selectionMode:"multiple",style:{width:"2.5em"}}),s.a.createElement(P.Column,{className:"textField",field:"name",header:"Name",style:{width:"10em"},body:function(e,t){var a="/"+e.doi;return s.a.createElement(d.b,{to:a},e.name)},sortable:!0}),s.a.createElement(P.Column,{className:"textField",field:"dataset.name",header:"Dataset",style:{width:"6.5em"},sortable:!0}),s.a.createElement(P.Column,{className:"textField",field:"drugSensitivity.version",header:"Drug Sensitivity",style:{width:"10.5em"},sortable:!0}),s.a.createElement(P.Column,{field:"rnaTool",body:o,style:{width:"8em"},header:"RNA Tool",sortable:!0}),s.a.createElement(P.Column,{field:"dnaTool",body:o,style:{width:"8em"},header:"DNA Tool",sortable:!0}),s.a.createElement(P.Column,{field:"rnaRef",body:o,style:{width:"15em"},header:"RNA Ref",sortable:!0}),s.a.createElement(P.Column,{field:"dnaRef",body:o,style:{width:"15em"},header:"DNA Ref",sortable:!0}),s.a.createElement(P.Column,{field:"downloadLink",body:function(e,t){var a="Not Available";return e.downloadLink&&(a=s.a.createElement("a",{id:e._id,href:"#",onClick:c(e._id,e.downloadLink)},"Download")),a},style:{width:"6.5em"},header:"Download"}))},_=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(o.a)(this,Object(u.a)(t).call(this))).saveSelectedPSets=function(t){t.preventDefault(),e.context.authenticated&&function(e,t,a){if(t.length){for(var n={username:e},s=[],r=0;r<t.length;r++)s.push(t[r]._id);n.psetId=s,fetch("/user/pset/add",{method:"POST",body:JSON.stringify({reqData:n}),headers:{"Content-type":"application/json"}}).then((function(e){return e.json()})).then((function(e){return a(1,e)})).catch((function(e){return a(0,e)}))}}(e.context.username,e.props.selectedPSets,(function(t,a){e.props.onSaveComplete(t,a)}))},e.saveSelectedPSets=e.saveSelectedPSets.bind(Object(T.a)(e)),e}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return this.context.authenticated?s.a.createElement(N.Button,{label:"Save",onClick:this.saveSelectedPSets,disabled:this.props.disabled}):"*Login or register to save existing PSets to your profile."}}]),t}(s.a.Component);_.contextType=h;var W=_,G=a(25),$=a(32),K=a.n($),Z=a(27),Q=a(20),X=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(o.a)(this,Object(u.a)(t).call(this))).handleSubmitRequest=function(t){t.preventDefault();var a=e.state.parameters;a.drugSensitivity=a.dataset.drugSensitivity,console.log(a),Object(G.trackPromise)(fetch("/pset/request",{method:"POST",body:JSON.stringify({reqData:a}),headers:{"Content-type":"application/json"}}).then((function(e){return e.json()})).then((function(t){return I(1,t,e.initializeState,e.messages)})).catch((function(t){return I(0,t,e.initializeState,e.messages)})))},e.updateReqInputEvent=function(t){t.preventDefault();var a=e.state.parameters;a[t.target.id]=t.target.value,e.setState({parameters:a,notReadyToSubmit:A(a)})},e.state={allData:[],formDataOriginal:{},formData:{},searchAll:!0,selectedPSets:[],disableSaveBtn:!0,isRequest:!1,isLoaded:!1,parameters:{dataType:[],dataset:[],drugSensitivity:[],genome:[],rnaTool:[],rnaRef:[],dnaTool:[],dnaRef:[],name:"",email:""},notReadyToSubmit:!0},e.updateAllData=e.updateAllData.bind(Object(T.a)(e)),e.setStateOnParamSelection=e.setStateOnParamSelection.bind(Object(T.a)(e)),e.updatePSetSelection=e.updatePSetSelection.bind(Object(T.a)(e)),e.initializeState=e.initializeState.bind(Object(T.a)(e)),e.showMessage=e.showMessage.bind(Object(T.a)(e)),e.setRequestView=e.setRequestView.bind(Object(T.a)(e)),e.handleSubmitRequest=e.handleSubmitRequest.bind(Object(T.a)(e)),e.updateReqInputEvent=e.updateReqInputEvent.bind(Object(T.a)(e)),e}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;B("/pset?status=complete",(function(t){e.updateAllData(t)})),fetch("/formdata").then((function(e){return e.json()})).then((function(t){e.setState({formData:t[0],formDataOriginal:JSON.parse(JSON.stringify(t[0])),isLoaded:!0})}))}},{key:"showMessage",value:function(e,t){I(e,t,this.initializeState,this.messages)}},{key:"setStateOnParamSelection",value:function(e){for(var t=this.state.parameters,a=0;a<e.length;a++)t[e[a].name]=e[a].value;console.log(t),this.setState({parameters:t,notReadyToSubmit:A(t)})}},{key:"updateAllData",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.setState({allData:e,searchAll:t})}},{key:"updatePSetSelection",value:function(e){var t=this;this.setState({selectedPSets:e},(function(){q(t.state.selectedPSets)?t.setState({disableSaveBtn:!1}):t.setState({disableSaveBtn:!0})}))}},{key:"setRequestView",value:function(e){var t=this.state.parameters,a=this.state.formData;if(e)t.dataset.length&&(a.dataset=t.dataset,t.dataset=t.dataset[0]),t.genome.length&&(a.genome=t.genome,t.genome=t.genome[0]);else{if(console.log(t),a.dataset.length<this.state.formDataOriginal.dataset.length)t.dataset=a.dataset;else if(!Array.isArray(t.dataset)){var n=JSON.parse(JSON.stringify(t.dataset));t.dataset=[],t.dataset.push(n)}if(a.genome.length<this.state.formDataOriginal.genome.length)t.genome=a.genome;else if(!Array.isArray(t.genome)){var s=JSON.parse(JSON.stringify(t.genome));t.genome=[],t.genome.push(s)}a=this.state.formDataOriginal}this.setState({parameters:t,formData:JSON.parse(JSON.stringify(a)),notReadyToSubmit:A(t),isRequest:e})}},{key:"initializeState",value:function(){this.setState({selectedPSets:[],disableSaveBtn:!0})}},{key:"render",value:function(){var e=this;return s.a.createElement(s.a.Fragment,null,s.a.createElement(C,{routing:this.props}),s.a.createElement("div",{className:"pageContent"},s.a.createElement("h1",null,"Search or Request Pharmacogenomic Datasets"),s.a.createElement("div",{className:"pSetListContainer"},this.state.isLoaded?s.a.createElement(J,{updateAllData:this.updateAllData,setRequestView:this.setRequestView,setParentState:this.setStateOnParamSelection,isRequest:this.state.isRequest,formData:this.state.formData,parameters:this.state.parameters}):s.a.createElement("div",null),s.a.createElement("div",{className:"pSetTable"},s.a.createElement(Q.Messages,{ref:function(t){return e.messages=t}}),s.a.createElement("div",{className:"pSetSelectionSummary"},s.a.createElement("div",{className:"summaryPanel"},s.a.createElement("h2",null,"Summary"),s.a.createElement("div",{className:"pSetSummaryContainer"},s.a.createElement("div",{className:"pSetSummaryItem"},this.state.searchAll?s.a.createElement("span",null,s.a.createElement("span",{className:"pSetSummaryNum"},this.state.allData.length)," ",s.a.createElement("span",null,"dataset(s) available.")):s.a.createElement("span",null,s.a.createElement("span",{className:"pSetSummaryNum"},this.state.allData.length)," ",s.a.createElement("span",null,1===this.state.allData.length?" match":" matches")," found."))),s.a.createElement(W,{selectedPSets:this.state.selectedPSets,disabled:this.state.disableSaveBtn,onSaveComplete:this.showMessage})),this.state.isRequest&&s.a.createElement("div",{className:"requestFormPanel"},s.a.createElement("h2",null,"Request PSet"),s.a.createElement("div",{className:"reqFormInput"},s.a.createElement("label",null,"PSet Name:"),s.a.createElement(Z.InputText,{id:"name",className:"paramInput",value:this.state.parameters.name||"",onChange:this.updateReqInputEvent})),s.a.createElement("div",{className:"reqFormInput"},s.a.createElement("label",null,"Email to receive DOI:"),s.a.createElement(Z.InputText,{id:"email",className:"paramInput",value:this.state.parameters.email||"",onChange:this.updateReqInputEvent})),s.a.createElement("div",{className:"reqFormInput"},s.a.createElement((function(t){return Object(G.usePromiseTracker)().promiseInProgress?s.a.createElement("div",{className:"loaderContainer"},s.a.createElement(K.a,{type:"ThreeDots",color:"#3D405A",height:100,width:100})):s.a.createElement(N.Button,{label:"Submit Request",type:"submit",disabled:!1,onClick:e.handleSubmitRequest})}),null)))),s.a.createElement(Y,{allData:this.state.allData,selectedPSets:this.state.selectedPSets,updatePSetSelection:this.updatePSetSelection,scrollHeight:"600px"})))),s.a.createElement(k,null))}}]),t}(s.a.Component);X.contextType=h;var ee=X,te=(a(150),function e(t){var a=Object(n.useContext)(h),r=Object(n.useState)([]),l=Object(O.a)(r,2),i=l[0],c=l[1],o=Object(n.useState)(!0),u=Object(O.a)(o,2),m=u[0],d=u[1],p=Object(G.usePromiseTracker)().promiseInProgress,f=function(t){e.messages.show(t)},b=function(){var e=Object(y.a)(S.a.mark((function e(t){var a,n;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:return a=e.sent,e.next=5,a.json();case 5:n=e.sent,c(n),d(!1);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),v=function(){var e=Object(y.a)(S.a.mark((function e(t){var a,n;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(G.trackPromise)(fetch("/pset/process",{method:"POST",body:JSON.stringify({id:t}),headers:{"Content-type":"application/json"}}));case 2:return a=e.sent,e.next=5,a.json();case 5:return n=e.sent,e.abrupt("return",{ok:a.ok,data:n});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){b("/pset?status=pending&status=in-process")}),[]);var E=function(){var e=Object(y.a)(S.a.mark((function e(t){var a;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),console.log(t.target.id),e.next=4,v(t.target.id);case 4:return(a=e.sent).ok?f({severity:"success",summary:a.data.summary,detail:a.data.message}):f({severity:"error",summary:a.data.summary,detail:a.data.message,sticky:!0}),e.next=8,b("/pset?status=pending&status=in-process");case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),g=function(e,t){var a="";return e[t.field]&&(a=new Date(e[t.field]).toLocaleString(void 0,{dateStyle:"long",timeStyle:"medium"})),s.a.createElement("div",null,a)};return s.a.createElement(s.a.Fragment,null,s.a.createElement(C,{routing:t}),s.a.createElement("div",{className:"pageContent"},s.a.createElement("div",{className:"dashboardWrapper"},s.a.createElement("h1",null,"PSet Request Dashboard"),s.a.createElement(Q.Messages,{ref:function(t){return e.messages=t}}),s.a.createElement("div",{className:"dashboardSummary"},s.a.createElement("h2",null,"Dashboard Summary"),s.a.createElement("div",{className:"dashboardSummaryContainer"},s.a.createElement("div",{className:"dashboardSummarySection"},s.a.createElement("span",{className:"number"},i.filter((function(e){return"pending"===e.status})).length)," pending request(s)."),s.a.createElement("div",{className:"dashboardSummarySection"},s.a.createElement("span",{className:"number"},i.filter((function(e){return"in-process"===e.status})).length)," request(s) in process."))),s.a.createElement("div",{className:"dashboardTable"},!m&&s.a.createElement(w.DataTable,{value:i,paginator:!0,scrollable:!0,rows:10},s.a.createElement(P.Column,{className:"textField",field:"status",header:"Status",style:{width:"2em"},sortable:!0}),s.a.createElement(P.Column,{className:"textField",field:"name",header:"Name",style:{width:"5em"},sortable:!0}),s.a.createElement(P.Column,{className:"textField",field:"dateSubmitted",header:"Submitted Date",body:g,style:{width:"4em"},sortable:!0}),s.a.createElement(P.Column,{className:"textField",field:"dateProcessed",header:"Process Start Date",body:g,style:{width:"4em"},sortable:!0}),a.isAdmin&&s.a.createElement(P.Column,{body:function(e,t){var a="";return"pending"===e.status&&(a=s.a.createElement("button",{id:e._id,onClick:E,className:"dashboardBtn",type:"button"},"Submit")),s.a.createElement("div",{className:"dashBoardBtnContainer"},a)},style:{width:"1.5em"}})),p&&s.a.createElement("div",{className:"dashboardTableOverlay"},s.a.createElement("div",{className:"dashboardLoaderContainer"},s.a.createElement(K.a,{type:"ThreeDots",color:"#3D405A",height:100,width:100})))))),s.a.createElement(k,null))}),ae=(a(151),a(55)),ne=a.n(ae),se=a(56),re=a.n(se)()(ne.a),le=function(e){function t(){return Object(i.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.data.value,t=this.props.data.name;return s.a.createElement(re,{data:[{type:"bar",x:e,y:t,orientation:"h",marker:{color:"#3D405A"}}],layout:{autosize:!0,title:this.props.title,xaxis:{title:{text:"Number of Downloads",font:{size:14,color:"#3D405A"}}},yaxis:{autorange:"reversed"},titlefont:{size:18,color:"#3D405A"},font:{color:"#3D405A"}},style:{width:"100%"},useResizeHandler:!0})}}]),t}(s.a.Component),ie=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(o.a)(this,Object(u.a)(t).call(this))).state={allData:[],chartData:{},selectedPSets:[],disableBtn:!0,isReady:!1},e.updatePSetSelection=e.updatePSetSelection.bind(Object(T.a)(e)),e.showMessages=e.showMessages.bind(Object(T.a)(e)),e.initializeState=e.initializeState.bind(Object(T.a)(e)),e}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;B("/pset/sort",(function(t){for(var a=[],n=[],s=[],r=0;r<t.length&&(a.push({name:t[r].name,value:t[r].download}),n.push(t[r].name),s.push(t[r].download),!(r>=9));r++);e.setState({allData:t,chartData:{data:a,name:n,value:s},isReady:!0})}))}},{key:"updatePSetSelection",value:function(e){var t=this;this.setState({selectedPSets:e},(function(){q(t.state.selectedPSets)?t.setState({disableBtn:!1}):t.setState({disableBtn:!0})}))}},{key:"showMessages",value:function(e,t){var a=this;I(e,t,this.initializeState,this.messages),B("/pset/sort",(function(e){a.setState({allData:e})}))}},{key:"initializeState",value:function(){this.setState({selectedPSets:[],disableBtn:!0})}},{key:"render",value:function(){var e=this;return s.a.createElement(s.a.Fragment,null,s.a.createElement(C,{routing:this.props}),s.a.createElement("div",{className:"pageContent"},s.a.createElement("h1",null,"PSet Usage and Downloads"),s.a.createElement("div",{className:"statContainer"},s.a.createElement("div",{className:"container rankingTable"},s.a.createElement("h3",null,"Download Ranking"),s.a.createElement(Q.Messages,{ref:function(t){return e.messages=t}}),s.a.createElement(Y,{allData:this.state.allData,selectedPSets:this.state.selectedPSets,updatePSetSelection:this.updatePSetSelection,showDownload:!0,scrollHeight:"340px"}),s.a.createElement("div",{className:"rankingTableFooter"},s.a.createElement(W,{selectedPSets:this.state.selectedPSets,disabled:this.state.disableBtn,onSaveComplete:this.showMessages}))),s.a.createElement("div",{className:"container downloadHistogram"},this.state.isReady&&s.a.createElement(le,{data:this.state.chartData,title:"Top 10 Most Popular PSets"})))),s.a.createElement(k,null))}}]),t}(s.a.Component);ie.contextType=h;var ce=ie,oe=(a(152),function(){return s.a.createElement("div",{className:"documentation"},s.a.createElement("h1",null,"Overview"),s.a.createElement("h3",null,"Introduction"),s.a.createElement("p",null,"ORCESTRA is a new web application that enables users to search, request and manage pharmacogenomic datasets (PSets).",s.a.createElement("br",null),"PSets are generated with an automated pipeline by using a verion controll platform called Pachyderm. Upon completion of the pipeline, a newly generated PSet is uploaded to Zenodo, a data-sharing platform, and is assigned a DOI.",s.a.createElement("br",null),"With Pachyderm's strict version controlling system, coupled with the DOI assignment, ORCESTRA ensures that your experiements with PSets are transparent and easily reproducible."))}),ue=function(){return s.a.createElement("div",{className:"documentation"},s.a.createElement("h1",null,"Search"))},me=function(){return s.a.createElement("div",{className:"documentation"},s.a.createElement("h1",null,"Request"))},de=function(){return s.a.createElement("div",{className:"documentation"},s.a.createElement("h1",null,"User Profile"))},pe=function(){return s.a.createElement("div",{className:"documentation"},s.a.createElement("h1",null,"Statistics"))},he=function(e){var t=Object(n.useState)("overview"),a=Object(O.a)(t,2),r=a[0],l=a[1];return s.a.createElement(s.a.Fragment,null,s.a.createElement(C,{routing:e}),s.a.createElement("div",{className:"pageContent"},s.a.createElement("div",{className:"documentationContent"},s.a.createElement("nav",{className:"documentationNav"},s.a.createElement("h2",null,"Functionality"),s.a.createElement("ul",null,s.a.createElement("li",{className:"overview"===r?"selected":void 0},s.a.createElement("button",{type:"button",onClick:function(){return l("overview")}},"Overview")),s.a.createElement("li",{className:"search"===r?"selected":void 0},s.a.createElement("button",{type:"button",onClick:function(){return l("search")}},"Search")),s.a.createElement("li",{className:"request"===r?"selected":void 0},s.a.createElement("button",{type:"button",onClick:function(){return l("request")}},"Request")),s.a.createElement("li",{className:"userProfile"===r?"selected":void 0},s.a.createElement("button",{type:"button",onClick:function(){return l("userProfile")}},"User Profile")),s.a.createElement("li",{className:"statistics"===r?"selected":void 0},s.a.createElement("button",{type:"button",onClick:function(){return l("statistics")}},"Statistics"))),s.a.createElement("h2",null,"API"),s.a.createElement("ul",null,s.a.createElement("li",{className:"api-psets-available"===r?"selected":void 0},s.a.createElement("button",{type:"button",onClick:function(){return l("api-psets-available")}},"Available PSets")),s.a.createElement("li",{className:"api-pset-single"===r?"selected":void 0},s.a.createElement("button",{type:"button",onClick:function(){return l("api-pset-single")}},"PSet Metadata")),s.a.createElement("li",{className:"api-statistics"===r?"selected":void 0},s.a.createElement("button",{type:"button",onClick:function(){return l("api-statistics")}},"Statistics")))),"overview"===r&&s.a.createElement(oe,null),"search"===r&&s.a.createElement(ue,null),"request"===r&&s.a.createElement(me,null),"userProfile"===r&&s.a.createElement(de,null),"statistics"===r&&s.a.createElement(pe,null))),s.a.createElement(k,null))},fe=(a(153),a(154),function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(o.a)(this,Object(u.a)(t).call(this))).state={user:{}},e.showModal=e.showModal.bind(Object(T.a)(e)),e.hideModal=e.hideModal.bind(Object(T.a)(e)),e}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;fetch("/user/?username="+this.context.username).then((function(e){return e.json()})).then((function(t){return e.setState({user:t})}))}},{key:"showModal",value:function(){}},{key:"hideModal",value:function(){}},{key:"render",value:function(){return s.a.createElement("div",{className:"userInfoContainer"},s.a.createElement("h2",null,"User Information"),s.a.createElement("div",{className:"userInfo"},"Username: ",this.state.user.username),s.a.createElement("div",{className:"userInfoBtn"},s.a.createElement(N.Button,{label:"Change User Settings",onClick:this.showModal})))}}]),t}(s.a.Component));fe.contextType=h;var be=fe,ve=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(o.a)(this,Object(u.a)(t).call(this))).downloadPSets=function(t){t.preventDefault();var a=e.props.selectedPSets,n=document.createElement("a");n.setAttribute("download",null),n.style.display="none",document.body.appendChild(n);for(var s=0;s<a.length;s++)a[s].downloadLink&&(n.setAttribute("href",a[s].downloadLink),n.click());document.body.removeChild(n),function(e,t){var a=[];console.log(e);for(var n=0;n<e.length;n++)a.push(e[n]._id);console.log(a),fetch("/pset/download",{method:"POST",body:JSON.stringify({psetIDs:a}),headers:{"Content-type":"application/json"}}).then((function(e){return e.json()})).then((function(e){t(1,e)})).catch((function(e){return t(0,e)}))}(e.props.selectedPSets,(function(e,t){}))},e.downloadPSets=e.downloadPSets.bind(Object(T.a)(e)),e}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return s.a.createElement(N.Button,{className:"downloadBtn",label:"Download",disabled:this.props.disabled,onClick:this.downloadPSets})}}]),t}(s.a.Component),Ee=a(57),ge=(a(156),function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(o.a)(this,Object(u.a)(t).call(this))).handleBtnClick=function(t){e.setState({dialogVisible:!0})},e.state={selectedPSets:[],btnDisabled:!0,dialogVisible:!1,btnYesDislabed:!1},e.handleBtnClick=e.handleBtnClick.bind(Object(T.a)(e)),e.handleSelectionChange=e.handleSelectionChange.bind(Object(T.a)(e)),e.onClickYes=e.onClickYes.bind(Object(T.a)(e)),e.onHide=e.onHide.bind(Object(T.a)(e)),e.showMessages=e.showMessages.bind(Object(T.a)(e)),e}return Object(m.a)(t,e),Object(c.a)(t,[{key:"handleSelectionChange",value:function(e){var t=this;this.setState({selectedPSets:e},(function(){t.state.selectedPSets&&t.state.selectedPSets.length>0?t.setState({btnDisabled:!1}):t.setState({btnDisabled:!0})}))}},{key:"showMessages",value:function(e,t){I(e,t,null,this.props.messages)}},{key:"onClickYes",value:function(){var e=this;this.setState({btnDisabled:!0,btnYesDislabed:!0}),this.props.handleBtnClick(this.state.selectedPSets,(function(t){t?e.setState({btnDisabled:!1}):e.setState({selectedPSets:[],dialogVisible:!1})}))}},{key:"onHide",value:function(){this.setState({dialogVisible:!1,btnYesDislabed:!1})}},{key:"render",value:function(){var e=s.a.createElement(s.a.Fragment,null,s.a.createElement("div",null,s.a.createElement(Y,{allData:this.props.pset,selectedPSets:this.state.selectedPSets,updatePSetSelection:this.handleSelectionChange,scrollHeight:"350px",pending:this.props.pending})),s.a.createElement("div",{className:"footer"},this.props.pending?"":s.a.createElement(ve,{selectedPSets:this.state.selectedPSets,disabled:this.state.btnDisabled,onDownloadComplete:this.showMessages}),s.a.createElement(N.Button,{label:this.props.btnLabel,onClick:this.handleBtnClick,disabled:this.state.btnDisabled}))),t=s.a.createElement("p",null,"No data available."),a=s.a.createElement("div",null,s.a.createElement(N.Button,{label:"Yes",onClick:this.onClickYes,disabled:this.state.btnYesDislabed}),s.a.createElement(N.Button,{label:"Cancel",onClick:this.onHide}));return s.a.createElement("div",{className:"userPSet"},s.a.createElement("h2",null,this.props.heading),s.a.createElement("div",{className:"userPSetContent"},this.props.pset?e:t),s.a.createElement("div",null,s.a.createElement(Ee.Dialog,{header:this.props.pending?"Canceling PSet Request(s)":"Removing Pset(s)",footer:a,visible:this.state.dialogVisible,style:{width:"300px"},modal:!0,onHide:this.onHide},this.props.pending?"Are you sure you would like to cancel the selected PSet request(s)?":"Are you sure you would like to remove the selected PSet(s) from the saved list?")))}}]),t}(s.a.Component)),Se=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(o.a)(this,Object(u.a)(t).call(this))).removeFromSavedList=function(t,a){for(var n=[],s=0;s<t.length;s++)n.push(t[s]._id);fetch("/user/pset/remove",{method:"POST",body:JSON.stringify({username:e.context.username,psetID:n}),headers:{"Content-type":"application/json"}}).then((function(e){return e.json()})).then((function(t){I(1,t,null,e.messages);var s=e.state.psetSaved;s=e.removePSetByID(s,n),e.setState({psetSaved:s},a(0))})).catch((function(t){I(0,t,null,e.messages),a(1)}))},e.cancelPSetRequest=function(t,a){for(var n=[],s=0;s<t.length;s++)n.push(t[s]._id);fetch("/pset/cancel",{method:"POST",body:JSON.stringify({username:e.context.username,psetID:n}),headers:{"Content-type":"application/json"}}).then((function(e){return e.json()})).then((function(t){I(1,t,null,e.messages);var s=e.state.psetInProcess;s=e.removePSetByID(s,n),e.setState({psetInProcess:s},a(0))})).catch((function(t){I(0,t,null,e.messages),a(1)}))},e.state={username:"",userEmail:"",psetSaved:[],psetInProcess:[]},e.removeFromSavedList=e.removeFromSavedList.bind(Object(T.a)(e)),e.cancelPSetRequest=e.cancelPSetRequest.bind(Object(T.a)(e)),e.findPSetByID=e.findPSetByID.bind(Object(T.a)(e)),e.removePSetByID=e.removePSetByID.bind(Object(T.a)(e)),e}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;fetch("/user/pset/?username="+this.context.username).then((function(e){return e.json()})).then((function(t){for(var a=[],n=[],s=0;s<t.length;s++)"complete"===t[s].status?a.push(t[s]):n.push(t[s]);e.setState({psetSaved:a,psetInProcess:n})}))}},{key:"findPSetByID",value:function(e,t){for(var a=0;a<e.length;a++)if(e[a]._id===t)return a;return-1}},{key:"removePSetByID",value:function(e,t){for(var a=0;a<t.length;a++){var n=this.findPSetByID(e,t[a]);n>-1&&e.splice(n,1)}return e}},{key:"render",value:function(){var e=this;return s.a.createElement(s.a.Fragment,null,s.a.createElement(C,{routing:this.props}),s.a.createElement("div",{className:"pageContent"},s.a.createElement("h1",null,"Your Profile"),s.a.createElement("div",{className:"userProfile"},s.a.createElement(be,null),s.a.createElement("div",{className:"userPSetLists"},s.a.createElement(Q.Messages,{ref:function(t){return e.messages=t}}),s.a.createElement(ge,{heading:"Your Saved PSets",btnLabel:"Remove from List",pset:this.state.psetSaved,handleBtnClick:this.removeFromSavedList,messages:this.messages}),s.a.createElement(ge,{heading:"Your PSet Requests in Process",btnLabel:"Cancel Request",pset:this.state.psetInProcess,pending:!0,handleBtnClick:this.cancelPSetRequest})))),s.a.createElement(k,null))}}]),t}(s.a.Component);Se.contextType=h;var ye=Se,Oe=function e(t){var a=Object(n.useContext)(h),r=Object(n.useState)(""),l=Object(O.a)(r,2),i=l[0],c=l[1],o=Object(n.useState)(""),u=Object(O.a)(o,2),m=u[0],d=u[1],p=Object(n.useState)(""),f=Object(O.a)(p,2),b=f[0],v=f[1],E=Object(n.useState)(""),g=Object(O.a)(E,2),j=g[0],C=g[1],w=Object(n.useState)(!1),P=Object(O.a)(w,2),D=P[0],k=P[1],R=Object(n.useState)(!1),T=Object(O.a)(R,2),x=T[0],A=T[1],q=Object(n.useState)(!1),I=Object(O.a)(q,2),M=I[0],F=I[1],B=Object(n.useState)(!0),L=Object(O.a)(B,2),H=L[0],V=L[1],U=Object(n.useState)(!0),J=Object(O.a)(U,2),z=J[0],Y=J[1],_=Object(n.useState)(!0),W=Object(O.a)(_,2),G=W[0],$=W[1];Object(n.useEffect)((function(){/^\w+([.-]?\w+)*@\w+([.-]?\w+)*(\.\w{2,3})+$/.test(i)?V(!1):V(!0)}),[i]),Object(n.useEffect)((function(){m.length>=6?Y(!1):Y(!0)}),[m]),Object(n.useEffect)((function(){b.length>=6?b===j&&$(!1):$(!0)}),[b,j]);var K=function(e){switch(e.target.name){case"email":c(e.target.value);break;case"password":d(e.target.value);break;case"passwordReg1":v(e.target.value);break;case"passwordReg2":C(e.target.value)}},X=function(){c(""),d(""),v(""),C(""),k(!1),A(!1),F(!1),V(!0),Y(!0),$(!0)},ee=function(){var e=Object(y.a)(S.a.mark((function e(t){var a,n,s;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a="user/check/?username="+i,e.next=4,fetch(a);case 4:return n=e.sent,e.next=7,n.json();case 7:s=e.sent,n.ok&&(k(!0),A(s.exists),F(s.registered));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),te=function(){var t=Object(y.a)(S.a.mark((function t(n){var s,r;return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),t.next=3,fetch("/user/login",{method:"POST",body:JSON.stringify({user:{username:i,password:m}}),headers:{"Content-type":"application/json"}});case 3:return s=t.sent,t.next=6,s.json();case 6:(r=t.sent).authenticated?(console.log("authenticated"),X(),a.setAuthToken(r)):e.messages.show({severity:"error",summary:"Login Failed",detail:"Please re-enter your email and password."});case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),ae=function(){var t=Object(y.a)(S.a.mark((function t(n){var s,r;return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),t.next=3,fetch("/user/register",{method:"POST",body:JSON.stringify({user:{username:i,password:b,exists:x}}),headers:{"Content-type":"application/json"}});case 3:return s=t.sent,t.next=6,s.json();case 6:(r=t.sent).status?(X(),a.setAuthToken({authenticated:r.authenticated,username:r.username})):e.messages.show({severity:"error",summary:"Registration Failed",detail:"Please try again."});case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return s.a.createElement(s.a.Fragment,null,s.a.createElement("h2",null,"Login/Register"),s.a.createElement(Q.Messages,{ref:function(t){return e.messages=t}}),s.a.createElement("h4",null,"Enter your email:"),s.a.createElement("div",{className:"emailInput"},s.a.createElement(Z.InputText,{type:"email",name:"email",value:i,onChange:K}),s.a.createElement(N.Button,{className:"btnLoginFind",label:"Find",icon:"pi pi-arrow-right",onClick:ee,disabled:H})),D?s.a.createElement("div",{className:"formContainer"},M?s.a.createElement(s.a.Fragment,null,s.a.createElement("h4",null,"Login with your password:"),s.a.createElement("div",{className:"pwdMsg"},"Password needs to be at least 6 characters in length"),s.a.createElement(Z.InputText,{className:"pwdInput",type:"password",name:"password",value:m,onChange:K}),s.a.createElement("div",null,s.a.createElement(N.Button,{label:"Login",onClick:te,disabled:z}))):s.a.createElement(s.a.Fragment,null,s.a.createElement("h4",null,x?"Email is not registered. ":"Email not found. ","Please register."),s.a.createElement("div",null,s.a.createElement("div",{className:"pwdMsg"},"Password needs to be at least 6 characters in length"),s.a.createElement(Z.InputText,{className:"pwdInput",type:"password",name:"passwordReg1",value:b,onChange:K})),s.a.createElement("div",null,s.a.createElement("label",null,"Confirm your password:"),s.a.createElement(Z.InputText,{className:"pwdInput",type:"password",name:"passwordReg2",value:j,onChange:K})),s.a.createElement("div",null,s.a.createElement(N.Button,{label:"Register",onClick:ae,disabled:G})))):"")},Ne=(a(157),function(e){var t=Object(n.useContext)(h),a=e.location.state.logoutMsg;return s.a.createElement(s.a.Fragment,null,s.a.createElement(C,{routing:e}),t.authenticated?s.a.createElement(p.a,{to:e.location.state.path}):s.a.createElement("div",{className:"pageContent"},s.a.createElement("div",{className:"loginRegContent"},s.a.createElement("div",{className:"logoutMsg"},a||""),s.a.createElement(Oe,null))),s.a.createElement(k,null))}),je=(a(158),a(33)),Ce=a(24),we=function(e){function t(){return Object(i.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.items.map((function(e){return s.a.createElement(Ce.AccordionTab,{key:e.name,header:e.name},e.commands.length?s.a.createElement("ul",null,e.commands.map((function(e){return s.a.createElement("li",{key:e},e)}))):"Not Available")}));return this.props.items.length?s.a.createElement(Ce.Accordion,{multiple:!0},e):s.a.createElement("div",{className:"subContent"},"Not Available")}}]),t}(s.a.Component),Pe=function(e){function t(){return Object(i.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.items.map((function(e){return s.a.createElement(Ce.AccordionTab,{key:e.name,header:e.name},s.a.createElement("ul",null,s.a.createElement("li",{className:"listItem-1"},s.a.createElement("div",null,e.name.length?e.name:"Currently not available"),s.a.createElement("div",null,e.source.length?s.a.createElement("a",{href:e.source},e.source):"Currently not available"))))}));return this.props.items.length?s.a.createElement(Ce.Accordion,{multiple:!0},e):s.a.createElement("div",{className:"subContent"},"Not Available")}}]),t}(s.a.Component),De=function(e){function t(){return Object(i.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.items.map((function(e){return s.a.createElement(Ce.AccordionTab,{key:e.name,header:e.name},s.a.createElement("ul",null,s.a.createElement("li",{className:"listItem-1"},s.a.createElement("div",null,e.name.length?e.name:"Currently not available"),s.a.createElement("div",null,e.source.length?s.a.createElement("a",{href:e.source},e.source):"Currently not available")),s.a.createElement("li",{className:"listItem-1"},s.a.createElement("div",null,e.cosmic.name),s.a.createElement("div",null,s.a.createElement("a",{href:e.cosmic.source},e.cosmic.source)," ")),s.a.createElement("li",{className:"listItem-1"},s.a.createElement("div",null,e.exonTarget.name),s.a.createElement("div",null,s.a.createElement("a",{href:e.exonTarget.source},e.exonTarget.source)))))}));return this.props.items.length?s.a.createElement(Ce.Accordion,{multiple:!0},e):s.a.createElement("div",{className:"subContent"},"Not Available")}}]),t}(s.a.Component),ke=function(e){function t(){return Object(i.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return s.a.createElement(Ce.Accordion,{className:"generalInfoAccordion"},s.a.createElement(Ce.AccordionTab,{header:"General Information"},s.a.createElement("h4",{className:"subContent"},"PSet Name: ",this.props.data.name),s.a.createElement("h4",{className:"subContent"},"Date Created: ",this.props.data.dateCreated),this.props.data.createdBy&&s.a.createElement("h4",{className:"subContent"},"Created By ",this.props.data.createdBy)))}}]),t}(s.a.Component),Re=function(e){function t(){return Object(i.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=s.a.createElement("div",null,this.props.metadata.dataset.publication.length?this.props.metadata.dataset.publication.map((function(e){return s.a.createElement("li",{key:e.link,className:"pubList"},s.a.createElement("div",{className:"subContent"},e.citation),s.a.createElement("br",null),s.a.createElement("div",{className:"subContent"},s.a.createElement("a",{href:e.link},e.link)))})):s.a.createElement("div",{className:"subContent"},"Not available."));return s.a.createElement(s.a.Fragment,null,s.a.createElement("h1",{className:"tabMainHeader"},"Dataset: ",this.props.metadata.dataset.label),s.a.createElement("div",{className:"tabContent"},s.a.createElement("div",{className:"tabContentSection"},s.a.createElement("h3",null,"Publication: "),s.a.createElement("ul",null,e)),s.a.createElement("div",{className:"tabContentSection"},s.a.createElement("h3",null,"Drug Sensitivity"),s.a.createElement("h4",{className:"subContent"},"Source: ",this.props.metadata.drugSensitivity.source?s.a.createElement("a",{href:this.props.metadata.drugSensitivity.source},this.props.metadata.drugSensitivity.source):"Not available"),s.a.createElement("h4",{className:"subContent"},"Version: ",this.props.metadata.drugSensitivity.version)),s.a.createElement("div",{className:"tabContentSection"},s.a.createElement("h3",null,"Genome Version"),s.a.createElement("div",{className:"subContent"},this.props.metadata.genome.name?this.props.metadata.genome.name:"Not Available"))))}}]),t}(s.a.Component),Te=function(e){function t(){return Object(i.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=s.a.createElement("div",null,this.props.metadata.rawSeqDataRNA?s.a.createElement("a",{href:this.props.metadata.rawSeqDataRNA},this.props.metadata.rawSeqDataRNA):"Not Available");return s.a.createElement(s.a.Fragment,null,s.a.createElement("h1",{className:"tabMainHeader"},"Analysis Details - RNA Data"),s.a.createElement("div",{className:"tabContent"},s.a.createElement("div",{className:"tabContentSection"},s.a.createElement("h3",null,"Raw Data Source: "),s.a.createElement("div",{className:"subContent"},e)),s.a.createElement("div",{className:"tabContentSection"},s.a.createElement("h3",null,"RNA Transcriptome"),s.a.createElement(Pe,{items:this.props.metadata.rnaRef})),s.a.createElement("div",{className:"tabContentSection"},s.a.createElement("h3",null,"Tools and Commands Used"),s.a.createElement(we,{items:this.props.metadata.rnaTool}))))}}]),t}(s.a.Component),xe=function(e){function t(){return Object(i.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=s.a.createElement("div",null,this.props.metadata.rawSeqDataDNA?s.a.createElement("a",{href:this.props.metadata.rawSeqDataDNA},this.props.metadata.rawSeqDataDNA):"Not Available");return s.a.createElement(s.a.Fragment,null,s.a.createElement("h1",{className:"tabMainHeader"},"Analysis Details - DNA(Exome) Data"),s.a.createElement("div",{className:"tabContent"},s.a.createElement("div",{className:"tabContentSection"},s.a.createElement("h3",null,"Raw Data Source: "),s.a.createElement("div",{className:"subContent"},e)),s.a.createElement("div",{className:"tabContentSection"},s.a.createElement("h3",null,"Exome Reference"),s.a.createElement(De,{items:this.props.metadata.dnaRef})),s.a.createElement("div",{className:"tabContentSection"},s.a.createElement("h3",null,"Tools and Commands Used"),s.a.createElement(we,{items:this.props.metadata.dnaTool}))))}}]),t}(s.a.Component),Ae=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(o.a)(this,Object(u.a)(t).call(this))).state={pset:{},general:{},dataset:{},rna:{},dna:{},isReady:!1,message:""},e.showMessage=e.showMessage.bind(Object(T.a)(e)),e}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;console.log(this.props.match.params.id1+"/"+this.props.match.params.id2);var t="/pset/one/"+this.props.match.params.id1+"/"+this.props.match.params.id2;console.log(t),B(t,(function(t){console.log(t),t?e.setState({pset:t,general:{name:t.name,createdBy:t.createdBy,dateCreated:t.dateCreated},dataset:{dataset:t.dataset,genome:t.genome,drugSensitivity:t.drugSensitivity},rna:{rnaTool:t.rnaTool,rnaRef:t.rnaRef,rawSeqDataRNA:t.dataset.rawSeqDataRNA},dna:{dnaTool:t.dnaTool,dnaRef:t.dnaRef,rawSeqDataDNA:t.dataset.rawSeqDataDNA},isReady:!0}):e.setState({message:"We could not find a PSet with the ID."})}))}},{key:"showMessage",value:function(e,t){I(e,t,this.initializeState,this.messages)}},{key:"render",value:function(){var e=this;return s.a.createElement(s.a.Fragment,null,s.a.createElement(C,{routing:this.props}),s.a.createElement("div",{className:"pageContent"},s.a.createElement(Q.Messages,{ref:function(t){return e.messages=t}}),s.a.createElement("div",{className:"psetTitle"},s.a.createElement("h1",null,"Explore PSet - ",this.state.pset.name),s.a.createElement(ve,{disabled:!1,selectedPSets:[this.state.pset],onDownloadComplete:this.showMessage})),s.a.createElement(ke,{data:this.state.general}),s.a.createElement("div",{className:"tabContainer"},this.state.isReady?s.a.createElement(je.TabView,{renderActiveOnly:!1},s.a.createElement(je.TabPanel,{header:"Dataset"},s.a.createElement(Re,{metadata:this.state.dataset})),this.state.pset.dataType.map((function(t){return s.a.createElement(je.TabPanel,{key:t.name,header:t.name},"RNA"===t.name?s.a.createElement(Te,{metadata:e.state.rna}):s.a.createElement(xe,{metadata:e.state.dna}))}))):s.a.createElement("h3",null,this.state.message))),s.a.createElement(k,null))}}]),t}(s.a.Component),qe=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(o.a)(this,Object(u.a)(t).call(this))).state={authenticated:!1,isAdmin:!1,user:"",setAuthToken:function(t){e.setState({authenticated:t.authenticated,username:t.username,isAdmin:t.isAdmin})},resetAuthToken:function(){e.setState({authenticated:!1,isAdmin:!1,user:""})}},e}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.state.authenticated||fetch("/user/checkToken").then((function(e){return 200===e.status?e.json():{authenticated:!1,isAdmin:!1,username:""}})).then((function(t){e.state.setAuthToken(t)}))}},{key:"render",value:function(){var e=s.a.createElement(ye,null);return s.a.createElement(h.Provider,{value:this.state},s.a.createElement(d.a,null,s.a.createElement(p.d,null,s.a.createElement(p.b,{exact:!0,path:"/",render:function(e){return s.a.createElement(R,Object.assign({path:"/"},e))}}),s.a.createElement(p.b,{exact:!0,path:"/PSetSearch",render:function(e){return s.a.createElement(ee,Object.assign({path:"/PSetSearch"},e))}}),s.a.createElement(p.b,{exact:!0,path:"/Dashboard",render:function(e){return s.a.createElement(te,Object.assign({path:"/Dashboard"},e))}}),s.a.createElement(p.b,{exact:!0,path:"/Stats",render:function(e){return s.a.createElement(ce,Object.assign({path:"/Stats"},e))}}),s.a.createElement(p.b,{exact:!0,path:"/Documentation",render:function(e){return s.a.createElement(he,Object.assign({path:"/Documentation"},e))}}),s.a.createElement(p.b,{exact:!0,path:"/Authentication",render:function(e){return s.a.createElement(Ne,e)}}),s.a.createElement(p.b,{path:"/:id1/:id2",render:function(e){return s.a.createElement(Ae,Object.assign({path:"/:id1/:id2"},e))}}),s.a.createElement(E,{path:"/Profile",component:e,redirect:"/Authentication"}))))}}]),t}(s.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(s.a.createElement(qe,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},59:function(e,t,a){e.exports=a(161)},64:function(e,t,a){},72:function(e,t,a){},73:function(e,t,a){},76:function(e,t,a){}},[[59,1,2]]]);
//# sourceMappingURL=main.deacba1e.chunk.js.map