(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{115:function(e,t,a){},116:function(e,t,a){},117:function(e,t,a){},119:function(e,t,a){},125:function(e,t,a){},150:function(e,t,a){},151:function(e,t,a){},152:function(e,t,a){},153:function(e,t,a){},154:function(e,t,a){},156:function(e,t,a){},157:function(e,t,a){},158:function(e,t,a){},161:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(23),l=a.n(s),c=(a(64),a(65),a(66),a(67),a(4)),i=a(5),o=a(7),u=a(6),m=a(8),d=a(11),p=a(26),h=Object(n.createContext)(),f=a(31);function b(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var v=function(e){function t(){return Object(c.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;fetch("/user/checkToken").then((function(e){return 200===e.status?e.json():{authenticated:!1,username:""}})).then((function(t){e.context.setAuthToken(t)}))}},{key:"render",value:function(){var e=this,t=this.context;return r.a.createElement(p.b,{exact:!0,path:this.props.path,render:function(a){return t.authenticated?r.a.cloneElement(e.props.component,function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?b(a,!0).forEach((function(t){Object(f.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):b(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},a)):r.a.createElement(p.a,{to:{pathname:e.props.redirect,state:{path:e.props.path}}})}})}}]),t}(r.a.Component);v.contextType=h;var E=v,g=(a(72),a(73),a(3)),S=a.n(g),y=a(14),O=a(2),j=a(13),N=(a(76),a(51)),C=function(e){var t=Object(n.useContext)(h),a=Object(n.useState)(!1),s=Object(O.a)(a,2),l=s[0],c=s[1];Object(n.useEffect)((function(){(function(){var e=Object(y.a)(S.a.mark((function e(){var t,a;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/pachyderm/status");case 2:return t=e.sent,e.next=5,t.json();case 5:a=e.sent,c(a.isOnline);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]);var i=function(t){t.preventDefault(),e.routing.history.push({pathname:"/Authentication",state:{path:e.routing.path}})},o=function(a){a.preventDefault(),console.log(e.routing),fetch("/user/logout/:"+t.username).then((function(a){t.resetAuthToken(),e.routing.history.push({pathname:"/Authentication",state:{path:e.routing.location.pathname,logoutMsg:"You have logged out"}})}))};return r.a.createElement(r.a.Fragment,null,r.a.createElement("header",null,r.a.createElement(d.c,{exact:!0,to:"/"},r.a.createElement("img",{src:"/images/trumpet-orcestra.png",alt:""})),r.a.createElement("div",{className:"navBarContainer"},r.a.createElement("div",{className:"navBar"},r.a.createElement("div",null,r.a.createElement(d.c,{exact:!0,to:"/",activeClassName:"active-link"},"Home")),r.a.createElement("div",null,r.a.createElement(d.c,{exact:!0,to:"/PSetSearch",activeClassName:"active-link"},"Search and Request")),r.a.createElement("div",null,r.a.createElement(d.c,{exact:!0,to:"/Dashboard",activeClassName:"active-link"},"Request Status")),r.a.createElement("div",null,r.a.createElement(d.c,{exact:!0,to:"/Documentation",activeClassName:"active-link"},"Documentation")),t.authenticated&&r.a.createElement("div",{className:"menu-item"},r.a.createElement(d.c,{exact:!0,to:"/Profile",activeClassName:"active-link"},"Profile")),r.a.createElement("div",null,t.authenticated?r.a.createElement(j.Button,{label:"Logout",onClick:o}):r.a.createElement(j.Button,{label:"Login/Register",onClick:i})),r.a.createElement("div",null,l?r.a.createElement("div",{className:"pachydermStatus isOnline"},r.a.createElement("div",{className:"icon"},r.a.createElement("i",{className:"pi pi-check"})),r.a.createElement("div",{className:"text"},"Pachyderm is ",r.a.createElement("br",null),"online")):r.a.createElement("span",{className:"pachydermStatus isOffline"},r.a.createElement("div",{className:"icon"},r.a.createElement("i",{className:"pi pi-ban"})),r.a.createElement("div",{className:"text"},"Pachyderm is ",r.a.createElement("br",null),"offline")))),r.a.createElement("div",{className:"burgerNav"},r.a.createElement(N.slide,{width:200,isOpen:!0},r.a.createElement("div",{className:"menu-item"},r.a.createElement(d.c,{exact:!0,to:"/",activeClassName:"active-link"},"Home")),r.a.createElement("div",{className:"menu-item"},r.a.createElement(d.c,{exact:!0,to:"/PSetSearch",activeClassName:"active-link"},"Search and Request")),r.a.createElement("div",null,r.a.createElement(d.c,{exact:!0,to:"/Dashboard",activeClassName:"active-link"},"Request Status")),r.a.createElement("div",null,r.a.createElement(d.c,{exact:!0,to:"/Documentation",activeClassName:"active-link"},"Documentation")),t.authenticated&&r.a.createElement("div",{className:"menu-item"},r.a.createElement(d.c,{exact:!0,to:"/Profile",activeClassName:"active-link"},"Profile")),r.a.createElement("div",{className:"menu-item"},t.authenticated?r.a.createElement(j.Button,{label:"Logout",onClick:o}):r.a.createElement(j.Button,{label:"Login/Register",onClick:i})),r.a.createElement("div",null,l?r.a.createElement("div",{className:"pachydermStatus isOnline"},r.a.createElement("div",{className:"icon"},r.a.createElement("i",{className:"pi pi-check"})),r.a.createElement("div",{className:"text"},"Pachyderm is ",r.a.createElement("br",null),"online")):r.a.createElement("span",{className:"pachydermStatus isOffline"},r.a.createElement("div",{className:"icon"},r.a.createElement("i",{className:"pi pi-ban"})),r.a.createElement("div",{className:"text"},"Pachyderm is ",r.a.createElement("br",null),"offline")))))),r.a.createElement("div",{className:"loggedIn"},t.authenticated?"Logged in as: "+t.username:"")))},w=a(29),P=a(16),k=(a(115),function(e){var t=Object(n.useState)([]),a=Object(O.a)(t,2),s=a[0],l=a[1],c=Object(n.useState)({dataset:[],rnaTool:[],dnaTool:[]}),i=Object(O.a)(c,2),o=i[0],u=i[1],m=Object(n.useState)(0),p=Object(O.a)(m,2),h=(p[0],p[1]),f=Object(n.useState)({pending:0,inProcess:0}),b=Object(O.a)(f,2),v=b[0],E=b[1];Object(n.useEffect)((function(){(function(){var e=Object(y.a)(S.a.mark((function e(t){var a,n;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:return a=e.sent,e.next=5,a.json();case 5:n=e.sent,console.log(n),l(n.pset),u(n.form[0]),h(n.user),E(n.dashboard);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}})()("/landing/data")}),[]);return r.a.createElement("div",{className:"mainContent"},r.a.createElement("div",{className:"home"},r.a.createElement("h1",null,"ORCESTRA"),r.a.createElement("h2",null,"Orchestration platform for reproducing pharmacogenomic analyses"),r.a.createElement("div",{className:"mainMenuContainer"},r.a.createElement("div",{className:"mainMenuRow"},r.a.createElement("div",{className:"mainMenuColumn"},r.a.createElement("div",{className:"mainMenuItem"},r.a.createElement("h2",null,"Search and Request PSets"),r.a.createElement("div",{className:"mainMenuItemContent"},r.a.createElement("div",null,"Design your own PSet using:"),r.a.createElement("div",{className:"mainMenuItemLine"},r.a.createElement("span",{className:"largeNum"},o.dataset.length)," ",r.a.createElement("span",null,"Datasets.")),r.a.createElement("div",{className:"mainMenuItemLine"},r.a.createElement("span",{className:"largeNum"},o.rnaTool.length)," ",r.a.createElement("span",null,"RNA pipelines.")),r.a.createElement("div",{className:"mainMenuItemLine"},r.a.createElement("span",{className:"largeNum"},o.dnaTool.length)," ",r.a.createElement("span",null,"DNA sequence alignment tools.")),r.a.createElement("div",{className:"mainMenuLink"},r.a.createElement("a",{className:"button",href:"/PSetSearch"},"Search and Request"))))),r.a.createElement("div",{className:"mainMenuColumn"},r.a.createElement("div",{className:"mainMenuItem",style:{alignSelf:"flex-start"}},r.a.createElement("h2",null,"View PSet Request Status"),r.a.createElement("div",{className:"mainMenuItemContent"},r.a.createElement("div",null,"ORCESTRA is processing following requests:"),r.a.createElement("div",{className:"mainMenuItemLine"},r.a.createElement("span",{className:"largeNum"},v.pending)," ",r.a.createElement("span",null,"Requests in queue.")),r.a.createElement("div",{className:"mainMenuItemLine"},r.a.createElement("span",{className:"largeNum"},v.inProcess)," ",r.a.createElement("span",null,"Requests in process.")),r.a.createElement("div",{className:"mainMenuLink"},r.a.createElement("a",{className:"button",href:"/Dashboard"},"View Dashboard"))))),r.a.createElement("div",{className:"mainMenuColumn"},r.a.createElement("div",{className:"mainMenuItem"},r.a.createElement("h2",null,"Top 5 Popular PSets"),r.a.createElement("div",{className:"mainMenuItemContent"},r.a.createElement(w.DataTable,{value:s},r.a.createElement(P.Column,{className:"textField",field:"download",header:"Download"}),r.a.createElement(P.Column,{className:"textField",field:"name",header:"Name",body:function(e,t){var a="/"+e.doi;return r.a.createElement(d.b,{to:a},e.name)}})),r.a.createElement("div",{className:"mainMenuLink"},r.a.createElement("a",{className:"button",href:"/Stats"},"View Statistics")))))))))}),D=(a(116),function(e){return r.a.createElement("div",{className:"appFooter"},r.a.createElement("div",{className:"footerContainer"},r.a.createElement("div",{className:"footerMenu footerLinks"},r.a.createElement("h3",null,"Menu"),r.a.createElement(d.c,{exact:!0,to:"/PSetSearch"},"Search and Request"),r.a.createElement(d.c,{exact:!0,to:"/Dashboard"},"request Status"),r.a.createElement(d.c,{exact:!0,to:"/Stats"},"Statistics")),r.a.createElement("div",{className:"footerSupport footerLinks"},r.a.createElement("h3",null,"Support"),r.a.createElement(d.c,{exact:!0,to:"/Documentation"},"Documentation"),r.a.createElement("a",{href:"https://github.com/bhklab"},"GitHub"),r.a.createElement("a",{href:"https://bhklab.ca/"},"BHKLab")),r.a.createElement("div",{className:"footerContact"},r.a.createElement("h3",null,"BHKLab"),r.a.createElement("div",{className:"contactInfo"},"The MaRS center",r.a.createElement("br",null),"101 College St, Toronto ON"," ",r.a.createElement("br",null),"TMDT RM 11-310"))))}),x=function(e){function t(){return Object(c.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement(C,{routing:this.props}),r.a.createElement(k,null),r.a.createElement(D,null))}}]),t}(r.a.Component),R=(a(117),a(52)),T=(a(119),a(53)),A=a(54),I=function(e){function t(){return Object(c.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=function(e){return r.a.createElement("div",{className:""},r.a.createElement("span",{style:{fontSize:"1em",margin:"1em .5em 0 0"}},e.label))};return this.props.isHidden?null:this.props.selectOne?r.a.createElement("div",{className:"filterSet"},r.a.createElement("label",null,this.props.parameterName),r.a.createElement(A.Dropdown,{id:this.props.id,className:"paramInput",optionLabel:"label",value:this.props.selectedParameter,options:this.props.parameterOptions,onChange:this.props.handleUpdateSelection,filter:!0,itemTemplate:e,placeholder:"Select one...",disabled:this.props.disabled})):r.a.createElement("div",{className:"filterSet"},r.a.createElement("label",null,this.props.parameterName),r.a.createElement(T.MultiSelect,{id:this.props.id,className:"paramInput",optionLabel:"label",value:this.props.selectedParameter,options:this.props.parameterOptions,onChange:this.props.handleUpdateSelection,filter:!0,itemTemplate:e,selectedItemTemplate:function(e){return e?r.a.createElement("div",{className:"my-multiselected-item-token"},r.a.createElement("span",null,e.label)):r.a.createElement("span",null,"Select...")},disabled:this.props.disabled}))}}]),t}(r.a.Component),M=(a(125),{}),q={},B=[],L=[];function F(e){return H.apply(this,arguments)}function H(){return(H=Object(y.a)(S.a.mark((function e(t){var a,n;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:return a=e.sent,e.next=5,a.json();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var U=function(){var e=Object(n.useContext)(le),t=Object(n.useState)([]),a=Object(O.a)(t,2),s=a[0],l=a[1],c=Object(n.useState)([]),i=Object(O.a)(c,2),o=i[0],u=i[1],m=Object(n.useState)([]),d=Object(O.a)(m,2),p=d[0],h=(d[1],Object(n.useState)([])),f=Object(O.a)(h,2),b=f[0],v=f[1],E=Object(n.useState)([]),g=Object(O.a)(E,2),j=g[0],N=g[1],C=Object(n.useState)([]),w=Object(O.a)(C,2),P=w[0],k=w[1],D=Object(n.useState)([]),x=Object(O.a)(D,2),T=x[0],A=x[1],H=Object(n.useState)([]),U=Object(O.a)(H,2),J=U[0],V=U[1],Y=Object(n.useState)([]),z=Object(O.a)(Y,2),_=(z[0],z[1],Object(n.useState)(!1)),W=Object(O.a)(_,2),G=W[0],$=W[1],K=Object(n.useState)(!1),Z=Object(O.a)(K,2),Q=Z[0],X=Z[1],ee=function(){return{dataType:s,dataset:o,drugSensitivity:p,genome:b,rnaTool:j,rnaRef:P,dnaTool:T,dnaRef:J}};Object(n.useEffect)((function(){(function(){var e=Object(y.a)(S.a.mark((function e(){var t;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F("/formData");case 2:t=e.sent,M=t[0],q=t[0],B=q.rnaRef,L=q.dnaRef;case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(n.useEffect)((function(){1===s.length?"RNA"===s[0].name?(X(!0),A([]),V([])):($(!0),N([]),k([])):($(!1),X(!1));var t=ee();e.setParameters(t)}),[s]),Object(n.useEffect)((function(){if(0===b.length)L=q.dnaRef,B=q.rnaRef;else{var t=J,a=P;if(Array.isArray(b)){var n=b.map((function(e){return e.name}));t=J.filter((function(e){return n.includes(e.genome)&&e})),a=P.filter((function(e){return n.includes(e.genome)&&e})),L=q.dnaRef.filter((function(e){return n.includes(e.genome)&&e})),B=q.rnaRef.filter((function(e){return n.includes(e.genome)&&e}))}else t=J.filter((function(e){return b.name===e.genome&&e})),a=P.filter((function(e){return b.name===e.genome&&e})),L=q.dnaRef.filter((function(e){return b.name===e.genome&&e})),B=q.rnaRef.filter((function(e){return b.name===e.genome&&e}));V(t),k(a)}var r=ee();e.setParameters(r)}),[b]),Object(n.useEffect)((function(){var t=ee();e.setParameters(t)}),[o,j,P,T,J]);return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"pSetFilterContainer"},r.a.createElement("div",{className:"pSetFilter"},r.a.createElement("h2",null,"PSet Parameters"),r.a.createElement("div",{className:"filterSet"},r.a.createElement("label",{className:"bold"},"Request PSet: "),r.a.createElement(R.InputSwitch,{checked:e.isRequest,tooltip:"Turn this on to request a PSet.",onChange:function(t){return function(t){var a=JSON.parse(JSON.stringify(q));if(t)o.length&&(a.dataset=o,u(o[0])),b.length&&(a.genome=b,v(b[0]));else{if(a.dataset.length<M.dataset.length)u(a.dataset);else if(!Array.isArray(o)){u([o])}if(a.genome.length<M.genome.length)v(a.genome);else if(!Array.isArray(b)){v([b])}a=M}q=a,e.setParameters(ee()),e.setIsRequest(t)}(t.value)}})),r.a.createElement(I,{id:"dataType",isHidden:!1,parameterName:"Data Type:",parameterOptions:q.dataType,selectedParameter:e.parameters.dataType,handleUpdateSelection:function(e){return l(e.value)}}),r.a.createElement(I,{id:"dataset",isHidden:!1,parameterName:"Dataset:",selectOne:e.isRequest,parameterOptions:q.dataset,selectedParameter:e.parameters.dataset,handleUpdateSelection:function(e){return u(e.value)}}),r.a.createElement(I,{id:"genome",isHidden:!1,parameterName:"Genome:",selectOne:e.isRequest,parameterOptions:q.genome,selectedParameter:e.parameters.genome,handleUpdateSelection:function(e){return v(e.value)}}),r.a.createElement(I,{id:"rnaTool",isHidden:G,parameterName:"RNA Tool:",parameterOptions:q.rnaTool,selectedParameter:e.parameters.rnaTool,handleUpdateSelection:function(e){return N(e.value)}}),r.a.createElement(I,{id:"rnaRef",isHidden:G,parameterName:"RNA Ref:",parameterOptions:B,selectedParameter:e.parameters.rnaRef,handleUpdateSelection:function(e){return k(e.value)}}),r.a.createElement(I,{id:"dnaTool",isHidden:Q,parameterName:"DNA Tool:",parameterOptions:q.dnaTool,selectedParameter:e.parameters.dnaTool,handleUpdateSelection:function(e){return A(e.value)}}),r.a.createElement(I,{id:"dnaRef",isHidden:Q,parameterName:"DNA Ref:",parameterOptions:L,selectedParameter:e.parameters.dnaRef,handleUpdateSelection:function(e){return V(e.value)}}))))};function J(e,t){fetch(e).then((function(e){return e.json()})).then((function(e){t(e)}))}function V(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var Y=function(e){var t=Object(n.useContext)(h),a=Object(n.useState)({rows:10,first:0,start:0,end:10,totalRecords:0,loading:!0}),s=Object(O.a)(a,2),l=s[0],c=s[1];Object(n.useEffect)((function(){c(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?V(a,!0).forEach((function(t){Object(f.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):V(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},l,{loading:!1}))}),[]);var i=function(e,t){return function(a){a.preventDefault(),console.log("downloadOnePSet"),function(e){console.log("downloadOnePSet: "+e);var t=[e];fetch("/pset/download",{method:"POST",body:JSON.stringify({psetIDs:t}),headers:{"Content-type":"application/json"}}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))}(e);var n=document.createElement("a");n.setAttribute("download",null),n.style.display="none",n.setAttribute("href",t),document.body.appendChild(n),n.click(),document.body.removeChild(n)}},o=function(e,t){var a="";return e[t.field]&&(a=e[t.field].map((function(e){return r.a.createElement("div",{key:e.name},e.name)}))),r.a.createElement("div",null,a)};return r.a.createElement(w.DataTable,{value:e.allData,selection:e.selectedPSets,onSelectionChange:function(t){e.updatePSetSelection(t.value)},paginator:!0,rows:l.rows,scrollable:!0},t.authenticated&&r.a.createElement(P.Column,{selectionMode:"multiple",style:{width:"2.5em"}}),r.a.createElement(P.Column,{className:"textField",field:"name",header:"Name",style:{width:"10em"},body:function(e,t){var a="/"+e.doi;return r.a.createElement(d.b,{to:a},e.name)},sortable:!0}),r.a.createElement(P.Column,{className:"textField",field:"dataset.name",header:"Dataset",style:{width:"6.5em"},sortable:!0}),r.a.createElement(P.Column,{className:"textField",field:"drugSensitivity.version",header:"Drug Sensitivity",style:{width:"10.5em"},sortable:!0}),r.a.createElement(P.Column,{field:"rnaTool",body:o,style:{width:"8em"},header:"RNA Tool",sortable:!0}),r.a.createElement(P.Column,{field:"dnaTool",body:o,style:{width:"8em"},header:"DNA Tool",sortable:!0}),r.a.createElement(P.Column,{field:"rnaRef",body:o,style:{width:"15em"},header:"RNA Ref",sortable:!0}),r.a.createElement(P.Column,{field:"dnaRef",body:o,style:{width:"15em"},header:"DNA Ref",sortable:!0}),r.a.createElement(P.Column,{field:"downloadLink",body:function(e,t){var a="Not Available";return e.downloadLink&&(a=r.a.createElement("a",{id:e._id,href:"#",onClick:i(e._id,e.downloadLink)},"Download")),a},style:{width:"6.5em"},header:"Download"}))},z=a(10),_=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(o.a)(this,Object(u.a)(t).call(this))).saveSelectedPSets=function(t){t.preventDefault(),e.context.authenticated&&function(e,t,a){if(t.length){for(var n={username:e},r=[],s=0;s<t.length;s++)r.push(t[s]._id);n.psetId=r,fetch("/user/pset/add",{method:"POST",body:JSON.stringify({reqData:n}),headers:{"Content-type":"application/json"}}).then((function(e){return e.json()})).then((function(e){return a(1,e)})).catch((function(e){return a(0,e)}))}}(e.context.username,e.props.selectedPSets,(function(t,a){e.props.onSaveComplete(t,a)}))},e.saveSelectedPSets=e.saveSelectedPSets.bind(Object(z.a)(e)),e}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return this.context.authenticated?r.a.createElement(j.Button,{label:"Save",onClick:this.saveSelectedPSets,disabled:this.props.disabled}):"*Login or register to save existing PSets to your profile."}}]),t}(r.a.Component);_.contextType=h;var W=_,G=a(25),$=a(32),K=a.n($),Z=a(27),Q=a(20);function X(e){var t={};return t.datatype=re(e.dataType),t.datasetName=re(e.dataset),t.datasetVersion=re(e.dataset,!0),t.genome=re(e.genome),t.rnaTool=re(e.rnaTool),t.dnaTool=re(e.dnaTool),t.rnaRef=re(e.rnaRef),t.dnaRef=re(e.dnaRef),t.drugSensitivity=re(e.drugSensitivity,!0),t}function ee(e){var t="/pset?status=complete&",a=[];a.push(se("dtp",e.datatype)),a.push(se("dsv",e.datasetVersion)),a.push(se("dsn",e.datasetName)),a.push(se("gnm",e.genome)),a.push(se("rnat",e.rnaTool)),a.push(se("dnat",e.dnaTool)),a.push(se("rnar",e.rnaRef)),a.push(se("dnar",e.dnaRef)),a.push(se("dst",e.drugSensitivity));for(var n=0;n<a.length;n++)a[n].length>0&&(t+=a[n]+"&");return t=t.replace(/&$/,"")}function te(e){if(!ae(e.dataType))return!0;if(1===e.dataType.length){if(!("RNA"!==e.dataType[0]||ae(e.rnaRef)&&ae(e.rnaTool)))return!0;if("DNA"===e.dataType[0]&&(!ae(e.dnaRef)||!ae(e.dnaTool)))return!0}else{if(!ae(e.rnaRef))return!0;if(!ae(e.dnaRef))return!0;if(!ae(e.rnaTool))return!0;if(!ae(e.dnaTool))return!0}return!ae(e.genome)||(!ae(e.dataset)||(!function(e){if("undefined"===typeof e||null===e)return!1;if(0===e.length)return!1;return!0}(e.name)||!function(e){if("undefined"===typeof e||null===e)return!1;if(0===e.length)return!1;if(!/^\w+([.-]?\w+)*@\w+([.-]?\w+)*(\.\w{2,3})+$/.test(e))return!1;return!0}(e.email)))}function ae(e){return"undefined"!==typeof e&&null!==e&&!(Array.isArray(e)&&!e.length)}function ne(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3?arguments[3]:void 0;a&&a(),e?n.show({severity:"success",summary:t.summary,detail:t.message,sticky:!0}):n.show({severity:"error",summary:"An error occured",detail:t.toString(),sticky:!0})}function re(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=[];if("undefined"===typeof e||null===e)return a;if(0===Object.keys(e).length&&e.constructor===Object)return a;if(Array.isArray(e)){if(t)for(var n=0;n<e.length;n++)a.push(e[n].version);else for(var r=0;r<e.length;r++)a.push(e[r].name);return a}return t?a.push(e.version):a.push(e.name),a}function se(e,t){var a="";if(t.length>0)for(var n=0;n<t.length;n++)a+=e+"="+t[n],n<t.length-1&&(a+="&");return a}var le=r.a.createContext();function ce(e){return ie.apply(this,arguments)}function ie(){return(ie=Object(y.a)(S.a.mark((function e(t){var a,n;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:return a=e.sent,e.next=5,a.json();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var oe=function e(t){var a=Object(n.useState)([]),s=Object(O.a)(a,2),l=s[0],c=s[1],i=Object(n.useState)(!0),o=Object(O.a)(i,2),u=o[0],m=o[1],d=Object(n.useState)([]),p=Object(O.a)(d,2),h=p[0],f=p[1],b=Object(n.useState)(!0),v=Object(O.a)(b,2),E=v[0],g=v[1],N=Object(n.useState)(!1),w=Object(O.a)(N,2),P=w[0],k=w[1],x=Object(n.useState)(!0),R=Object(O.a)(x,2),T=R[0],A=R[1],I=Object(n.useState)({}),M=Object(O.a)(I,2),q=M[0],B=M[1],L=Object(n.useState)(""),F=Object(O.a)(L,2),H=F[0],J=F[1],V=Object(n.useState)(""),z=Object(O.a)(V,2),_=z[0],$=z[1];Object(n.useEffect)((function(){(function(){var e=Object(y.a)(S.a.mark((function e(){var t;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ce("/pset?status=complete");case 2:t=e.sent,c(t),m(!0);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(n.useEffect)((function(){g(!ae(h))}),[h]),Object(n.useEffect)((function(){function e(){return(e=Object(y.a)(S.a.mark((function e(){var t,a,n,r;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=X(q),a=ee(t),console.log(a),n="/pset"===a||"/pset?"===a,e.next=6,ce(a);case 6:r=e.sent,c(r),m(n);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}();var t=q;t.name=H,t.email=_,A(te(t))}),[q]);var ne=function(){var e=Object(y.a)(S.a.mark((function e(){var t,a,n,r;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=X(q),a=ee(t),console.log(a),n="/pset"===a||"/pset?"===a,e.next=6,ce(a);case 6:r=e.sent,c(r),m(n);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),re=function(t,a){var n=t?"success":"error";e.messages.show({severity:n,summary:a.summary,detail:a.message,sticky:!0}),se()},se=function(){f([]),g(!0)},ie=function(){var e=Object(y.a)(S.a.mark((function e(t){var a,n,r;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),(a=q).drugSensitivity=a.dataset.drugSensitivity,a.name=H,a.email=_,console.log(a),e.next=8,Object(G.trackPromise)(fetch("/pset/request",{method:"POST",body:JSON.stringify({reqData:a}),headers:{"Content-type":"application/json"}}));case 8:return n=e.sent,e.next=11,n.json();case 11:r=e.sent,re(n.ok,r),se();case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){var e=q;e.name=H,e.email=_,A(te(e))}),[H,_]);return r.a.createElement(le.Provider,{value:{parameters:q,setParameters:B,updatePSets:ne,isRequest:P,setIsRequest:k}},r.a.createElement(C,{routing:t}),r.a.createElement("div",{className:"pageContent"},r.a.createElement("h1",null,"Search or Request Pharmacogenomic Datasets"),r.a.createElement("div",{className:"pSetListContainer"},r.a.createElement(U,null),r.a.createElement("div",{className:"pSetTable"},r.a.createElement(Q.Messages,{ref:function(t){return e.messages=t}}),r.a.createElement("div",{className:"pSetSelectionSummary"},r.a.createElement("div",{className:"summaryPanel"},r.a.createElement("h2",null,"Summary"),r.a.createElement("div",{className:"pSetSummaryContainer"},r.a.createElement("div",{className:"pSetSummaryItem"},u?r.a.createElement("span",null,r.a.createElement("span",{className:"pSetSummaryNum"},l.length)," ",r.a.createElement("span",null,"dataset(s) available.")):r.a.createElement("span",null,r.a.createElement("span",{className:"pSetSummaryNum"},l.length)," ",r.a.createElement("span",null,1===l.length?" match":" matches")," found."))),r.a.createElement(W,{selectedPSets:h,disabled:E,onSaveComplete:re})),P&&r.a.createElement("div",{className:"requestFormPanel"},r.a.createElement("h2",null,"Request PSet"),r.a.createElement("div",{className:"reqFormInput"},r.a.createElement("label",null,"PSet Name:"),r.a.createElement(Z.InputText,{id:"name",className:"paramInput",value:H||"",onChange:function(e){J(e.target.value)}})),r.a.createElement("div",{className:"reqFormInput"},r.a.createElement("label",null,"Email to receive DOI:"),r.a.createElement(Z.InputText,{id:"email",className:"paramInput",value:_||"",onChange:function(e){$(e.target.value)}})),r.a.createElement("div",{className:"reqFormInput"},r.a.createElement((function(){return Object(G.usePromiseTracker)().promiseInProgress?r.a.createElement("div",{className:"loaderContainer"},r.a.createElement(K.a,{type:"ThreeDots",color:"#3D405A",height:100,width:100})):r.a.createElement(j.Button,{label:"Submit Request",type:"submit",disabled:T,onClick:ie})}),null)))),r.a.createElement(Y,{allData:l,selectedPSets:h,updatePSetSelection:function(e){f(e)},scrollHeight:"600px"})))),r.a.createElement(D,null))},ue=(a(150),function e(t){var a=Object(n.useContext)(h),s=Object(n.useState)([]),l=Object(O.a)(s,2),c=l[0],i=l[1],o=Object(n.useState)(!0),u=Object(O.a)(o,2),m=u[0],d=u[1],p=Object(G.usePromiseTracker)().promiseInProgress,f=function(t){e.messages.show(t)},b=function(){var e=Object(y.a)(S.a.mark((function e(t){var a,n;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:return a=e.sent,e.next=5,a.json();case 5:n=e.sent,i(n),d(!1);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),v=function(){var e=Object(y.a)(S.a.mark((function e(t){var a,n;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(G.trackPromise)(fetch("/pset/process",{method:"POST",body:JSON.stringify({id:t}),headers:{"Content-type":"application/json"}}));case 2:return a=e.sent,e.next=5,a.json();case 5:return n=e.sent,e.abrupt("return",{ok:a.ok,data:n});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){b("/pset?status=pending&status=in-process")}),[]);var E=function(){var e=Object(y.a)(S.a.mark((function e(t){var a;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),console.log(t.target.id),e.next=4,v(t.target.id);case 4:return(a=e.sent).ok?f({severity:"success",summary:a.data.summary,detail:a.data.message,sticky:!0}):f({severity:"error",summary:a.data.summary,detail:a.data.message,sticky:!0}),e.next=8,b("/pset?status=pending&status=in-process");case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),g=function(e,t){var a="";return e[t.field]&&(a=new Date(e[t.field]).toLocaleString(void 0,{dateStyle:"long",timeStyle:"medium"})),r.a.createElement("div",null,a)};return r.a.createElement(r.a.Fragment,null,r.a.createElement(C,{routing:t}),r.a.createElement("div",{className:"pageContent"},r.a.createElement("div",{className:"dashboardWrapper"},r.a.createElement("h1",null,"PSet Request Status Board"),r.a.createElement(Q.Messages,{ref:function(t){return e.messages=t}}),r.a.createElement("div",{className:"dashboardSummary"},r.a.createElement("h2",null,"Request Status Summary"),r.a.createElement("div",{className:"dashboardSummaryContainer"},r.a.createElement("div",{className:"dashboardSummarySection"},r.a.createElement("span",{className:"number"},c.filter((function(e){return"pending"===e.status})).length)," pending request(s)."),r.a.createElement("div",{className:"dashboardSummarySection"},r.a.createElement("span",{className:"number"},c.filter((function(e){return"in-process"===e.status})).length)," request(s) in process."))),r.a.createElement("div",{className:"dashboardTable"},!m&&c.length>0?r.a.createElement(w.DataTable,{value:c,paginator:!0,scrollable:!0,rows:10},r.a.createElement(P.Column,{className:"textField",field:"status",header:"Status",style:{width:"2em"},sortable:!0}),r.a.createElement(P.Column,{className:"textField",field:"name",header:"Name",style:{width:"5em"},sortable:!0}),r.a.createElement(P.Column,{className:"textField",field:"dateSubmitted",header:"Submitted Date",body:g,style:{width:"4em"},sortable:!0}),r.a.createElement(P.Column,{className:"textField",field:"dateProcessed",header:"Process Start Date",body:g,style:{width:"4em"},sortable:!0}),a.isAdmin&&r.a.createElement(P.Column,{body:function(e,t){var a="";return"pending"===e.status&&(a=r.a.createElement("button",{id:e._id,onClick:E,className:"dashboardBtn",type:"button"},"Submit")),r.a.createElement("div",{className:"dashBoardBtnContainer"},a)},style:{width:"1.5em"}})):r.a.createElement("h3",null,"There currently are no pending or in-process requests."),p&&r.a.createElement("div",{className:"dashboardTableOverlay"},r.a.createElement("div",{className:"dashboardLoaderContainer"},r.a.createElement(K.a,{type:"ThreeDots",color:"#3D405A",height:100,width:100})))))),r.a.createElement(D,null))}),me=(a(151),a(55)),de=a.n(me),pe=a(56),he=a.n(pe)()(de.a),fe=function(e){function t(){return Object(c.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props.data.value,t=this.props.data.name;return r.a.createElement(he,{data:[{type:"bar",x:e,y:t,orientation:"h",marker:{color:"#3D405A"}}],layout:{autosize:!0,title:this.props.title,xaxis:{title:{text:"Number of Downloads",font:{size:14,color:"#3D405A"}}},yaxis:{autorange:"reversed"},titlefont:{size:18,color:"#3D405A"},font:{color:"#3D405A"}},style:{width:"100%"},useResizeHandler:!0})}}]),t}(r.a.Component),be=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(o.a)(this,Object(u.a)(t).call(this))).state={allData:[],chartData:{},selectedPSets:[],disableBtn:!0,isReady:!1},e.updatePSetSelection=e.updatePSetSelection.bind(Object(z.a)(e)),e.showMessages=e.showMessages.bind(Object(z.a)(e)),e.initializeState=e.initializeState.bind(Object(z.a)(e)),e}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;J("/pset/sort",(function(t){for(var a=[],n=[],r=[],s=0;s<t.length&&(a.push({name:t[s].name,value:t[s].download}),n.push(t[s].name),r.push(t[s].download),!(s>=9));s++);e.setState({allData:t,chartData:{data:a,name:n,value:r},isReady:!0})}))}},{key:"updatePSetSelection",value:function(e){var t=this;this.setState({selectedPSets:e},(function(){ae(t.state.selectedPSets)?t.setState({disableBtn:!1}):t.setState({disableBtn:!0})}))}},{key:"showMessages",value:function(e,t){var a=this;ne(e,t,this.initializeState,this.messages),J("/pset/sort",(function(e){a.setState({allData:e})}))}},{key:"initializeState",value:function(){this.setState({selectedPSets:[],disableBtn:!0})}},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement(C,{routing:this.props}),r.a.createElement("div",{className:"pageContent"},r.a.createElement("h1",null,"PSet Usage and Downloads"),r.a.createElement("div",{className:"statContainer"},r.a.createElement("div",{className:"container rankingTable"},r.a.createElement("h3",null,"Download Ranking"),r.a.createElement(Q.Messages,{ref:function(t){return e.messages=t}}),r.a.createElement(Y,{allData:this.state.allData,selectedPSets:this.state.selectedPSets,updatePSetSelection:this.updatePSetSelection,showDownload:!0,scrollHeight:"340px"}),r.a.createElement("div",{className:"rankingTableFooter"},r.a.createElement(W,{selectedPSets:this.state.selectedPSets,disabled:this.state.disableBtn,onSaveComplete:this.showMessages}))),r.a.createElement("div",{className:"container downloadHistogram"},this.state.isReady&&r.a.createElement(fe,{data:this.state.chartData,title:"Top 10 Most Popular PSets"})))),r.a.createElement(D,null))}}]),t}(r.a.Component);be.contextType=h;var ve=be,Ee=(a(152),function(){return r.a.createElement("div",{className:"documentation"},r.a.createElement("h1",null,"Overview"),r.a.createElement("h3",null,"Introduction"),r.a.createElement("p",null,"ORCESTRA is a new web application that enables users to search, request and manage pharmacogenomic datasets (PSets).",r.a.createElement("br",null),"PSets are generated with an automated pipeline by using a verion controll platform called Pachyderm. Upon completion of the pipeline, a newly generated PSet is uploaded to Zenodo, a data-sharing platform, and is assigned a DOI.",r.a.createElement("br",null),"With Pachyderm's strict version controlling system, coupled with the DOI assignment, ORCESTRA ensures that your experiements with PSets are transparent and easily reproducible."))}),ge=function(){return r.a.createElement("div",{className:"documentation"},r.a.createElement("h1",null,"Search"))},Se=function(){return r.a.createElement("div",{className:"documentation"},r.a.createElement("h1",null,"Request"))},ye=function(){return r.a.createElement("div",{className:"documentation"},r.a.createElement("h1",null,"User Profile"))},Oe=function(){return r.a.createElement("div",{className:"documentation"},r.a.createElement("h1",null,"Statistics"))},je=function(e){var t=Object(n.useState)("overview"),a=Object(O.a)(t,2),s=a[0],l=a[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(C,{routing:e}),r.a.createElement("div",{className:"pageContent"},r.a.createElement("div",{className:"documentationContent"},r.a.createElement("nav",{className:"documentationNav"},r.a.createElement("h2",null,"Functionality"),r.a.createElement("ul",null,r.a.createElement("li",{className:"overview"===s?"selected":void 0},r.a.createElement("button",{type:"button",onClick:function(){return l("overview")}},"Overview")),r.a.createElement("li",{className:"search"===s?"selected":void 0},r.a.createElement("button",{type:"button",onClick:function(){return l("search")}},"Search")),r.a.createElement("li",{className:"request"===s?"selected":void 0},r.a.createElement("button",{type:"button",onClick:function(){return l("request")}},"Request")),r.a.createElement("li",{className:"userProfile"===s?"selected":void 0},r.a.createElement("button",{type:"button",onClick:function(){return l("userProfile")}},"User Profile")),r.a.createElement("li",{className:"statistics"===s?"selected":void 0},r.a.createElement("button",{type:"button",onClick:function(){return l("statistics")}},"Statistics"))),r.a.createElement("h2",null,"API"),r.a.createElement("ul",null,r.a.createElement("li",{className:"api-psets-available"===s?"selected":void 0},r.a.createElement("button",{type:"button",onClick:function(){return l("api-psets-available")}},"Available PSets")),r.a.createElement("li",{className:"api-pset-single"===s?"selected":void 0},r.a.createElement("button",{type:"button",onClick:function(){return l("api-pset-single")}},"PSet Metadata")),r.a.createElement("li",{className:"api-statistics"===s?"selected":void 0},r.a.createElement("button",{type:"button",onClick:function(){return l("api-statistics")}},"Statistics")))),"overview"===s&&r.a.createElement(Ee,null),"search"===s&&r.a.createElement(ge,null),"request"===s&&r.a.createElement(Se,null),"userProfile"===s&&r.a.createElement(ye,null),"statistics"===s&&r.a.createElement(Oe,null))),r.a.createElement(D,null))},Ne=(a(153),a(154),function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(o.a)(this,Object(u.a)(t).call(this))).state={user:{}},e.showModal=e.showModal.bind(Object(z.a)(e)),e.hideModal=e.hideModal.bind(Object(z.a)(e)),e}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;fetch("/user/?username="+this.context.username).then((function(e){return e.json()})).then((function(t){return e.setState({user:t})}))}},{key:"showModal",value:function(){}},{key:"hideModal",value:function(){}},{key:"render",value:function(){return r.a.createElement("div",{className:"userInfoContainer"},r.a.createElement("h2",null,"User Information"),r.a.createElement("div",{className:"userInfo"},"Username: ",this.state.user.username),r.a.createElement("div",{className:"userInfoBtn"},r.a.createElement(j.Button,{label:"Change User Settings",onClick:this.showModal})))}}]),t}(r.a.Component));Ne.contextType=h;var Ce=Ne,we=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(o.a)(this,Object(u.a)(t).call(this))).downloadPSets=function(t){t.preventDefault();var a=e.props.selectedPSets,n=document.createElement("a");n.setAttribute("download",null),n.style.display="none",document.body.appendChild(n);for(var r=0;r<a.length;r++)a[r].downloadLink&&(n.setAttribute("href",a[r].downloadLink),n.click());document.body.removeChild(n),function(e,t){var a=[];console.log(e);for(var n=0;n<e.length;n++)a.push(e[n]._id);console.log(a),fetch("/pset/download",{method:"POST",body:JSON.stringify({psetIDs:a}),headers:{"Content-type":"application/json"}}).then((function(e){return e.json()})).then((function(e){t(1,e)})).catch((function(e){return t(0,e)}))}(e.props.selectedPSets,(function(e,t){}))},e.downloadPSets=e.downloadPSets.bind(Object(z.a)(e)),e}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(j.Button,{className:"downloadBtn",label:"Download",disabled:this.props.disabled,onClick:this.downloadPSets})}}]),t}(r.a.Component),Pe=a(57),ke=(a(156),function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(o.a)(this,Object(u.a)(t).call(this))).handleBtnClick=function(t){e.setState({dialogVisible:!0})},e.state={selectedPSets:[],btnDisabled:!0,dialogVisible:!1,btnYesDislabed:!1},e.handleBtnClick=e.handleBtnClick.bind(Object(z.a)(e)),e.handleSelectionChange=e.handleSelectionChange.bind(Object(z.a)(e)),e.onClickYes=e.onClickYes.bind(Object(z.a)(e)),e.onHide=e.onHide.bind(Object(z.a)(e)),e.showMessages=e.showMessages.bind(Object(z.a)(e)),e}return Object(m.a)(t,e),Object(i.a)(t,[{key:"handleSelectionChange",value:function(e){var t=this;this.setState({selectedPSets:e},(function(){t.state.selectedPSets&&t.state.selectedPSets.length>0?t.setState({btnDisabled:!1}):t.setState({btnDisabled:!0})}))}},{key:"showMessages",value:function(e,t){ne(e,t,null,this.props.messages)}},{key:"onClickYes",value:function(){var e=this;this.setState({btnDisabled:!0,btnYesDislabed:!0}),this.props.handleBtnClick(this.state.selectedPSets,(function(t){t?e.setState({btnDisabled:!1}):e.setState({selectedPSets:[],dialogVisible:!1})}))}},{key:"onHide",value:function(){this.setState({dialogVisible:!1,btnYesDislabed:!1})}},{key:"render",value:function(){var e=r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,r.a.createElement(Y,{allData:this.props.pset,selectedPSets:this.state.selectedPSets,updatePSetSelection:this.handleSelectionChange,scrollHeight:"350px",pending:this.props.pending})),r.a.createElement("div",{className:"footer"},this.props.pending?"":r.a.createElement(we,{selectedPSets:this.state.selectedPSets,disabled:this.state.btnDisabled,onDownloadComplete:this.showMessages}),r.a.createElement(j.Button,{label:this.props.btnLabel,onClick:this.handleBtnClick,disabled:this.state.btnDisabled}))),t=r.a.createElement("p",null,"No data available."),a=r.a.createElement("div",null,r.a.createElement(j.Button,{label:"Yes",onClick:this.onClickYes,disabled:this.state.btnYesDislabed}),r.a.createElement(j.Button,{label:"Cancel",onClick:this.onHide}));return r.a.createElement("div",{className:"userPSet"},r.a.createElement("h2",null,this.props.heading),r.a.createElement("div",{className:"userPSetContent"},this.props.pset?e:t),r.a.createElement("div",null,r.a.createElement(Pe.Dialog,{header:this.props.pending?"Canceling PSet Request(s)":"Removing Pset(s)",footer:a,visible:this.state.dialogVisible,style:{width:"300px"},modal:!0,onHide:this.onHide},this.props.pending?"Are you sure you would like to cancel the selected PSet request(s)?":"Are you sure you would like to remove the selected PSet(s) from the saved list?")))}}]),t}(r.a.Component)),De=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(o.a)(this,Object(u.a)(t).call(this))).removeFromSavedList=function(t,a){for(var n=[],r=0;r<t.length;r++)n.push(t[r]._id);fetch("/user/pset/remove",{method:"POST",body:JSON.stringify({username:e.context.username,psetID:n}),headers:{"Content-type":"application/json"}}).then((function(e){return e.json()})).then((function(t){ne(1,t,null,e.messages);var r=e.state.psetSaved;r=e.removePSetByID(r,n),e.setState({psetSaved:r},a(0))})).catch((function(t){ne(0,t,null,e.messages),a(1)}))},e.cancelPSetRequest=function(t,a){for(var n=[],r=0;r<t.length;r++)n.push(t[r]._id);fetch("/pset/cancel",{method:"POST",body:JSON.stringify({username:e.context.username,psetID:n}),headers:{"Content-type":"application/json"}}).then((function(e){return e.json()})).then((function(t){ne(1,t,null,e.messages);var r=e.state.psetInProcess;r=e.removePSetByID(r,n),e.setState({psetInProcess:r},a(0))})).catch((function(t){ne(0,t,null,e.messages),a(1)}))},e.state={username:"",userEmail:"",psetSaved:[],psetInProcess:[]},e.removeFromSavedList=e.removeFromSavedList.bind(Object(z.a)(e)),e.cancelPSetRequest=e.cancelPSetRequest.bind(Object(z.a)(e)),e.findPSetByID=e.findPSetByID.bind(Object(z.a)(e)),e.removePSetByID=e.removePSetByID.bind(Object(z.a)(e)),e}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;fetch("/user/pset/?username="+this.context.username).then((function(e){return e.json()})).then((function(t){for(var a=[],n=[],r=0;r<t.length;r++)"complete"===t[r].status?a.push(t[r]):n.push(t[r]);e.setState({psetSaved:a,psetInProcess:n})}))}},{key:"findPSetByID",value:function(e,t){for(var a=0;a<e.length;a++)if(e[a]._id===t)return a;return-1}},{key:"removePSetByID",value:function(e,t){for(var a=0;a<t.length;a++){var n=this.findPSetByID(e,t[a]);n>-1&&e.splice(n,1)}return e}},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement(C,{routing:this.props}),r.a.createElement("div",{className:"pageContent"},r.a.createElement("h1",null,"Your Profile"),r.a.createElement("div",{className:"userProfile"},r.a.createElement(Ce,null),r.a.createElement("div",{className:"userPSetLists"},r.a.createElement(Q.Messages,{ref:function(t){return e.messages=t}}),r.a.createElement(ke,{heading:"Your Saved PSets",btnLabel:"Remove from List",pset:this.state.psetSaved,handleBtnClick:this.removeFromSavedList,messages:this.messages}),r.a.createElement(ke,{heading:"Your PSet Requests in Process",btnLabel:"Cancel Request",pset:this.state.psetInProcess,pending:!0,handleBtnClick:this.cancelPSetRequest})))),r.a.createElement(D,null))}}]),t}(r.a.Component);De.contextType=h;var xe=De,Re=function e(t){var a=Object(n.useContext)(h),s=Object(n.useState)(""),l=Object(O.a)(s,2),c=l[0],i=l[1],o=Object(n.useState)(""),u=Object(O.a)(o,2),m=u[0],d=u[1],p=Object(n.useState)(""),f=Object(O.a)(p,2),b=f[0],v=f[1],E=Object(n.useState)(""),g=Object(O.a)(E,2),N=g[0],C=g[1],w=Object(n.useState)(!1),P=Object(O.a)(w,2),k=P[0],D=P[1],x=Object(n.useState)(!1),R=Object(O.a)(x,2),T=R[0],A=R[1],I=Object(n.useState)(!1),M=Object(O.a)(I,2),q=M[0],B=M[1],L=Object(n.useState)(!0),F=Object(O.a)(L,2),H=F[0],U=F[1],J=Object(n.useState)(!0),V=Object(O.a)(J,2),Y=V[0],z=V[1],_=Object(n.useState)(!0),W=Object(O.a)(_,2),G=W[0],$=W[1];Object(n.useEffect)((function(){/^\w+([.-]?\w+)*@\w+([.-]?\w+)*(\.\w{2,3})+$/.test(c)?U(!1):U(!0)}),[c]),Object(n.useEffect)((function(){m.length>=6?z(!1):z(!0)}),[m]),Object(n.useEffect)((function(){b.length>=6?b===N&&$(!1):$(!0)}),[b,N]);var K=function(e){switch(e.target.name){case"email":i(e.target.value);break;case"password":d(e.target.value);break;case"passwordReg1":v(e.target.value);break;case"passwordReg2":C(e.target.value)}},X=function(){i(""),d(""),v(""),C(""),D(!1),A(!1),B(!1),U(!0),z(!0),$(!0)},ee=function(){var e=Object(y.a)(S.a.mark((function e(t){var a,n,r;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a="user/check/?username="+c,e.next=4,fetch(a);case 4:return n=e.sent,e.next=7,n.json();case 7:r=e.sent,n.ok&&(D(!0),A(r.exists),B(r.registered));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),te=function(){var t=Object(y.a)(S.a.mark((function t(n){var r,s;return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),t.next=3,fetch("/user/login",{method:"POST",body:JSON.stringify({user:{username:c,password:m}}),headers:{"Content-type":"application/json"}});case 3:return r=t.sent,t.next=6,r.json();case 6:(s=t.sent).authenticated?(console.log("authenticated"),X(),a.setAuthToken(s)):e.messages.show({severity:"error",summary:"Login Failed",detail:"Please re-enter your email and password."});case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),ae=function(){var t=Object(y.a)(S.a.mark((function t(n){var r,s;return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),t.next=3,fetch("/user/register",{method:"POST",body:JSON.stringify({user:{username:c,password:b,exists:T}}),headers:{"Content-type":"application/json"}});case 3:return r=t.sent,t.next=6,r.json();case 6:(s=t.sent).status?(X(),a.setAuthToken({authenticated:s.authenticated,username:s.username})):e.messages.show({severity:"error",summary:"Registration Failed",detail:"Please try again."});case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null,"Login/Register"),r.a.createElement(Q.Messages,{ref:function(t){return e.messages=t}}),r.a.createElement("h4",null,"Enter your email:"),r.a.createElement("div",{className:"emailInput"},r.a.createElement(Z.InputText,{type:"email",name:"email",value:c,onChange:K}),r.a.createElement(j.Button,{className:"btnLoginFind",label:"Find",icon:"pi pi-arrow-right",onClick:ee,disabled:H})),k?r.a.createElement("div",{className:"formContainer"},q?r.a.createElement(r.a.Fragment,null,r.a.createElement("h4",null,"Login with your password:"),r.a.createElement("div",{className:"pwdMsg"},"Password needs to be at least 6 characters in length"),r.a.createElement(Z.InputText,{className:"pwdInput",type:"password",name:"password",value:m,onChange:K}),r.a.createElement("div",null,r.a.createElement(j.Button,{label:"Login",onClick:te,disabled:Y}))):r.a.createElement(r.a.Fragment,null,r.a.createElement("h4",null,T?"Email is not registered. ":"Email not found. ","Please register."),r.a.createElement("div",null,r.a.createElement("div",{className:"pwdMsg"},"Password needs to be at least 6 characters in length"),r.a.createElement(Z.InputText,{className:"pwdInput",type:"password",name:"passwordReg1",value:b,onChange:K})),r.a.createElement("div",null,r.a.createElement("label",null,"Confirm your password:"),r.a.createElement(Z.InputText,{className:"pwdInput",type:"password",name:"passwordReg2",value:N,onChange:K})),r.a.createElement("div",null,r.a.createElement(j.Button,{label:"Register",onClick:ae,disabled:G})))):"")},Te=(a(157),function(e){var t=Object(n.useContext)(h),a=e.location.state.logoutMsg;return r.a.createElement(r.a.Fragment,null,r.a.createElement(C,{routing:e}),t.authenticated?r.a.createElement(p.a,{to:e.location.state.path}):r.a.createElement("div",{className:"pageContent"},r.a.createElement("div",{className:"loginRegContent"},r.a.createElement("div",{className:"logoutMsg"},a||""),r.a.createElement(Re,null))),r.a.createElement(D,null))}),Ae=(a(158),a(33)),Ie=a(24),Me=function(e){function t(){return Object(c.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props.items.map((function(e){return r.a.createElement(Ie.AccordionTab,{key:e.name,header:e.name},e.commands.length?r.a.createElement("ul",null,e.commands.map((function(e){return r.a.createElement("li",{key:e},e)}))):"Not Available")}));return this.props.items.length?r.a.createElement(Ie.Accordion,{multiple:!0},e):r.a.createElement("div",{className:"subContent"},"Not Available")}}]),t}(r.a.Component),qe=function(e){function t(){return Object(c.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props.items.map((function(e){return r.a.createElement(Ie.AccordionTab,{key:e.name,header:e.name},r.a.createElement("ul",null,r.a.createElement("li",{className:"listItem-1"},r.a.createElement("div",null,e.name.length?e.name:"Currently not available"),r.a.createElement("div",null,e.source.length?r.a.createElement("a",{href:e.source},e.source):"Currently not available"))))}));return this.props.items.length?r.a.createElement(Ie.Accordion,{multiple:!0},e):r.a.createElement("div",{className:"subContent"},"Not Available")}}]),t}(r.a.Component),Be=function(e){function t(){return Object(c.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props.items.map((function(e){return r.a.createElement(Ie.AccordionTab,{key:e.name,header:e.name},r.a.createElement("ul",null,r.a.createElement("li",{className:"listItem-1"},r.a.createElement("div",null,e.name.length?e.name:"Currently not available"),r.a.createElement("div",null,e.source.length?r.a.createElement("a",{href:e.source},e.source):"Currently not available")),r.a.createElement("li",{className:"listItem-1"},r.a.createElement("div",null,e.cosmic.name),r.a.createElement("div",null,r.a.createElement("a",{href:e.cosmic.source},e.cosmic.source)," ")),r.a.createElement("li",{className:"listItem-1"},r.a.createElement("div",null,e.exonTarget.name),r.a.createElement("div",null,r.a.createElement("a",{href:e.exonTarget.source},e.exonTarget.source)))))}));return this.props.items.length?r.a.createElement(Ie.Accordion,{multiple:!0},e):r.a.createElement("div",{className:"subContent"},"Not Available")}}]),t}(r.a.Component),Le=function(e){function t(){return Object(c.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(Ie.Accordion,{className:"generalInfoAccordion"},r.a.createElement(Ie.AccordionTab,{header:"General Information"},r.a.createElement("h4",{className:"subContent"},"PSet Name: ",this.props.data.name),r.a.createElement("h4",{className:"subContent"},"Date Created: ",this.props.data.dateCreated),this.props.data.createdBy&&r.a.createElement("h4",{className:"subContent"},"Created By ",this.props.data.createdBy)))}}]),t}(r.a.Component),Fe=function(e){function t(){return Object(c.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=r.a.createElement("div",null,this.props.metadata.dataset.publication.length?this.props.metadata.dataset.publication.map((function(e){return r.a.createElement("li",{key:e.link,className:"pubList"},r.a.createElement("div",{className:"subContent"},e.citation),r.a.createElement("br",null),r.a.createElement("div",{className:"subContent"},r.a.createElement("a",{href:e.link},e.link)))})):r.a.createElement("div",{className:"subContent"},"Not available."));return r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",{className:"tabMainHeader"},"Dataset: ",this.props.metadata.dataset.label),r.a.createElement("div",{className:"tabContent"},r.a.createElement("div",{className:"tabContentSection"},r.a.createElement("h3",null,"Publication: "),r.a.createElement("ul",null,e)),r.a.createElement("div",{className:"tabContentSection"},r.a.createElement("h3",null,"Drug Sensitivity"),r.a.createElement("h4",{className:"subContent"},"Source: ",this.props.metadata.drugSensitivity.source?r.a.createElement("a",{href:this.props.metadata.drugSensitivity.source},this.props.metadata.drugSensitivity.source):"Not available"),r.a.createElement("h4",{className:"subContent"},"Version: ",this.props.metadata.drugSensitivity.version)),r.a.createElement("div",{className:"tabContentSection"},r.a.createElement("h3",null,"Genome Version"),r.a.createElement("div",{className:"subContent"},this.props.metadata.genome.name?this.props.metadata.genome.name:"Not Available"))))}}]),t}(r.a.Component),He=function(e){function t(){return Object(c.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=r.a.createElement("div",null,this.props.metadata.rawSeqDataRNA?r.a.createElement("a",{href:this.props.metadata.rawSeqDataRNA},this.props.metadata.rawSeqDataRNA):"Not Available");return r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",{className:"tabMainHeader"},"Analysis Details - RNA Data"),r.a.createElement("div",{className:"tabContent"},r.a.createElement("div",{className:"tabContentSection"},r.a.createElement("h3",null,"Raw Data Source: "),r.a.createElement("div",{className:"subContent"},e)),r.a.createElement("div",{className:"tabContentSection"},r.a.createElement("h3",null,"RNA Transcriptome"),r.a.createElement(qe,{items:this.props.metadata.rnaRef})),r.a.createElement("div",{className:"tabContentSection"},r.a.createElement("h3",null,"Tools and Commands Used"),r.a.createElement(Me,{items:this.props.metadata.rnaTool}))))}}]),t}(r.a.Component),Ue=function(e){function t(){return Object(c.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=r.a.createElement("div",null,this.props.metadata.rawSeqDataDNA?r.a.createElement("a",{href:this.props.metadata.rawSeqDataDNA},this.props.metadata.rawSeqDataDNA):"Not Available");return r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",{className:"tabMainHeader"},"Analysis Details - DNA(Exome) Data"),r.a.createElement("div",{className:"tabContent"},r.a.createElement("div",{className:"tabContentSection"},r.a.createElement("h3",null,"Raw Data Source: "),r.a.createElement("div",{className:"subContent"},e)),r.a.createElement("div",{className:"tabContentSection"},r.a.createElement("h3",null,"Exome Reference"),r.a.createElement(Be,{items:this.props.metadata.dnaRef})),r.a.createElement("div",{className:"tabContentSection"},r.a.createElement("h3",null,"Tools and Commands Used"),r.a.createElement(Me,{items:this.props.metadata.dnaTool}))))}}]),t}(r.a.Component),Je=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(o.a)(this,Object(u.a)(t).call(this))).state={pset:{},general:{},dataset:{},rna:{},dna:{},isReady:!1,message:""},e.showMessage=e.showMessage.bind(Object(z.a)(e)),e}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;console.log(this.props.match.params.id1+"/"+this.props.match.params.id2);var t="/pset/one/"+this.props.match.params.id1+"/"+this.props.match.params.id2;console.log(t),J(t,(function(t){console.log(t),t?e.setState({pset:t,general:{name:t.name,createdBy:t.createdBy,dateCreated:t.dateCreated},dataset:{dataset:t.dataset,genome:t.genome,drugSensitivity:t.drugSensitivity},rna:{rnaTool:t.rnaTool,rnaRef:t.rnaRef,rawSeqDataRNA:t.dataset.rawSeqDataRNA},dna:{dnaTool:t.dnaTool,dnaRef:t.dnaRef,rawSeqDataDNA:t.dataset.rawSeqDataDNA},isReady:!0}):e.setState({message:"We could not find a PSet with the ID."})}))}},{key:"showMessage",value:function(e,t){ne(e,t,this.initializeState,this.messages)}},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement(C,{routing:this.props}),r.a.createElement("div",{className:"pageContent"},r.a.createElement(Q.Messages,{ref:function(t){return e.messages=t}}),r.a.createElement("div",{className:"psetTitle"},r.a.createElement("h1",null,"Explore PSet - ",this.state.pset.name),r.a.createElement(we,{disabled:!1,selectedPSets:[this.state.pset],onDownloadComplete:this.showMessage})),r.a.createElement(Le,{data:this.state.general}),r.a.createElement("div",{className:"tabContainer"},this.state.isReady?r.a.createElement(Ae.TabView,{renderActiveOnly:!1},r.a.createElement(Ae.TabPanel,{header:"Dataset"},r.a.createElement(Fe,{metadata:this.state.dataset})),this.state.pset.dataType.map((function(t){return r.a.createElement(Ae.TabPanel,{key:t.name,header:t.name},"RNA"===t.name?r.a.createElement(He,{metadata:e.state.rna}):r.a.createElement(Ue,{metadata:e.state.dna}))}))):r.a.createElement("h3",null,this.state.message))),r.a.createElement(D,null))}}]),t}(r.a.Component),Ve=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(o.a)(this,Object(u.a)(t).call(this))).state={authenticated:!1,isAdmin:!1,user:"",setAuthToken:function(t){e.setState({authenticated:t.authenticated,username:t.username,isAdmin:t.isAdmin})},resetAuthToken:function(){e.setState({authenticated:!1,isAdmin:!1,user:""})}},e}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.state.authenticated||fetch("/user/checkToken").then((function(e){return 200===e.status?e.json():{authenticated:!1,isAdmin:!1,username:""}})).then((function(t){e.state.setAuthToken(t)}))}},{key:"render",value:function(){var e=r.a.createElement(xe,null);return r.a.createElement(h.Provider,{value:this.state},r.a.createElement(d.a,null,r.a.createElement(p.d,null,r.a.createElement(p.b,{exact:!0,path:"/",render:function(e){return r.a.createElement(x,Object.assign({path:"/"},e))}}),r.a.createElement(p.b,{exact:!0,path:"/PSetSearch",render:function(e){return r.a.createElement(oe,Object.assign({path:"/PSetSearch"},e))}}),r.a.createElement(p.b,{exact:!0,path:"/Dashboard",render:function(e){return r.a.createElement(ue,Object.assign({path:"/Dashboard"},e))}}),r.a.createElement(p.b,{exact:!0,path:"/Stats",render:function(e){return r.a.createElement(ve,Object.assign({path:"/Stats"},e))}}),r.a.createElement(p.b,{exact:!0,path:"/Documentation",render:function(e){return r.a.createElement(je,Object.assign({path:"/Documentation"},e))}}),r.a.createElement(p.b,{exact:!0,path:"/Authentication",render:function(e){return r.a.createElement(Te,e)}}),r.a.createElement(p.b,{path:"/:id1/:id2",render:function(e){return r.a.createElement(Je,Object.assign({path:"/:id1/:id2"},e))}}),r.a.createElement(E,{path:"/Profile",component:e,redirect:"/Authentication"}))))}}]),t}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(Ve,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},59:function(e,t,a){e.exports=a(161)},64:function(e,t,a){},72:function(e,t,a){},73:function(e,t,a){},76:function(e,t,a){}},[[59,1,2]]]);
//# sourceMappingURL=main.64406131.chunk.js.map